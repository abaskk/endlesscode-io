<!DOCTYPE html><html lang="zh"><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width" data-next-head=""/><meta name="twitter:card" content="summary_large_image" data-next-head=""/><meta name="twitter:site" content="@LeetCode" data-next-head=""/><meta property="og:locale" content="zh_CN" data-next-head=""/><meta property="og:site_name" content="力扣 LeetCode" data-next-head=""/><title data-next-head="">分享丨【算法题单】动态规划（入门/背包/划分/状态机/区间/状压/数位/树形/优化） - 讨论 - 力扣（LeetCode）</title><meta name="robots" content="index,follow" data-next-head=""/><meta name="description" content="前言掌握动态规划（DP）是没有捷径的，咱们唯一能做的，就是投入时间猛猛刷题。好比学数学，只看书看视频而不做习题，是不能说学会的。我能做的，是帮你节省找题的时间，并把这些题分类整理好。有着相同套路的题，一起做效率会更高，也更能领悟到 DP 的精髓。每个小节的题目已按照难度分排序（右侧数字为难度分）。记忆化搜索是新手村神器（甚至可以用到游戏后期），推荐先看 动态规划入门：从记忆化搜索到递推。但记忆化搜索并不是万能的，某些题目只有写成递推，才能结合数据结构等来优化时间复杂度，多数题目还可以优化空间复杂" data-next-head=""/><meta property="og:title" content="分享丨【算法题单】动态规划（入门/背包/划分/状态机/区间/状压/数位/树形/优化） - 讨论 - 力扣（LeetCode）" data-next-head=""/><meta property="og:description" content="前言掌握动态规划（DP）是没有捷径的，咱们唯一能做的，就是投入时间猛猛刷题。好比学数学，只看书看视频而不做习题，是不能说学会的。我能做的，是帮你节省找题的时间，并把这些题分类整理好。有着相同套路的题，一起做效率会更高，也更能领悟到 DP 的精髓。每个小节的题目已按照难度分排序（右侧数字为难度分）。记忆化搜索是新手村神器（甚至可以用到游戏后期），推荐先看 动态规划入门：从记忆化搜索到递推。但记忆化搜索并不是万能的，某些题目只有写成递推，才能结合数据结构等来优化时间复杂度，多数题目还可以优化空间复杂" data-next-head=""/><meta property="og:image" content="https://pic.leetcode.cn/1710769845-JRnIfA-dp-2.jpg" data-next-head=""/><link rel="preload" href="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/css/94829956983b388c.css" as="style"/><link rel="preload" href="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/css/f6d3247a62c3d58d.css" as="style"/><script type="text/javascript"></script><link rel="stylesheet" href="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/css/94829956983b388c.css" data-n-g=""/><link rel="stylesheet" href="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/css/f6d3247a62c3d58d.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" noModule="" src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/webpack-49d6c25c2a3865e6.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/framework-e0327dae6dbeda50.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/main-26b89906c123f8e0.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/pages/_app-6e7c5fed2ba5681b.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/328748d6-be30e1f46cec3cb9.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/c829854d-455b050da0ab8de9.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/2cca2479-839089c38244f273.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/c6bbd088-a5ace9ae73907885.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/f5d5890c-cad09a973138d70a.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/a82e3b52-f8b28b984ab18f97.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/748224bd-6fd53b79c53f4fa6.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/d3048c20-1aae83402cd9ede5.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/7dfef39c-cc05b2ddeac4165f.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/0a05f987-e18d80e0be34b9be.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/d9e3acfd-ebab5c7ab7cacd5a.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/ca4fe5a8-d3edb7d90408defe.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/deb84844-0569a0934f3613dd.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/5c0b189e-c45e3f36dff72f93.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/d2094a0f-34e4f03161abc5f5.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/e6848cf3-3dbfabdce4ab5e9b.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/5542-1d25e95458b91e89.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/1586-8607396d705d3233.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/2369-c6171a82c9e1ba75.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/8081-5cab487488b6a2cb.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/8176-71ac04d9e152350d.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/3367-9024e384d0546744.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/2773-168fdf6e26c1efc9.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/3370-47e0597953c1e30d.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/2762-d221488b3ec016de.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/7686-aa300a99b9037ce8.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/6341-560d0c06d66aabd7.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/4709-a4cd358442f760d2.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/3963-2fd7d0b3585fc2fe.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/6443-035e7c377aac67ef.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/6085-e89fec6ff48d385a.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/6957-6cba11865f29364f.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/9646-ea57380aed26feb0.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/2350-be60d9e0fd1db5fe.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/3181-7ff28397dea3f164.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/4738-20d7aeb55aa956c2.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/1302-186fe947bb654b8a.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/3161-95409d485a94a0c9.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/8363-ed4d4719d012e6e1.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/8929-77215ce4885ae634.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/5098-c81a762a34dd3792.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/6398-9e2f2ebd41278df2.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/6940-ccdc5c9950732337.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/3732-56ea11aea3f374c4.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/3943-10539b646dbf8f2c.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/8036-0612f55d88a628db.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/5973-8a9bd42aa89299f1.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/2742-9727c94c7899dc4c.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/7917-e660416357d1c7fe.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/chunks/pages/discuss/%5B%5B...page%5D%5D-fdab8284208d0058.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/uCvNwKv4DVCx0X_dqT3sP/_buildManifest.js" defer=""></script><script src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/uCvNwKv4DVCx0X_dqT3sP/_ssgManifest.js" defer=""></script><style id="__jsx-3741603521">@-webkit-keyframes confetti-fall-jsx-3741603521{0%{-webkit-transform:translateY(0) translateX(0) rotate(0deg);-ms-transform:translateY(0) translateX(0) rotate(0deg);transform:translateY(0) translateX(0) rotate(0deg);opacity:1;}100%{-webkit-transform:translateY(120vh) translateX(var(--drift)) rotate(var(--rotation));-ms-transform:translateY(120vh) translateX(var(--drift)) rotate(var(--rotation));transform:translateY(120vh) translateX(var(--drift)) rotate(var(--rotation));opacity:0;}}@keyframes confetti-fall-jsx-3741603521{0%{-webkit-transform:translateY(0) translateX(0) rotate(0deg);-ms-transform:translateY(0) translateX(0) rotate(0deg);transform:translateY(0) translateX(0) rotate(0deg);opacity:1;}100%{-webkit-transform:translateY(120vh) translateX(var(--drift)) rotate(var(--rotation));-ms-transform:translateY(120vh) translateX(var(--drift)) rotate(var(--rotation));transform:translateY(120vh) translateX(var(--drift)) rotate(var(--rotation));opacity:0;}}</style></head><body><link rel="preload" as="image" href="https://pic.leetcode.cn/1710769845-JRnIfA-dp-2.jpg"/><link rel="preload" as="image" href="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/images/beian-0c5770666939ca0a3bbdb0daa3e68cc2.png"/><div id="__next"><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('lc-theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><div id="aliyun-captcha-el" style="width:0;height:0;overflow:hidden"></div><button id="aliyun-captcha-btn" type="button" style="display:none"></button><div class="flex min-h-screen min-w-[360px] flex-col text-label-1 dark:text-dark-label-1 bg-[#fafafa] dark:bg-[#1a1a1a] relative"><div class="w-full"><div class="z-base-2 fixed left-0 right-0 top-0  md:relative bg-layer-1 dark:bg-dark-layer-1 z-nav-9" id="navbar-container"><nav id="leetcode-navbar" class="flex h-[50px] w-full items-center border-b-[1px] border-solid border-border-tertiary dark:border-border-tertiary z-nav-9 bg-layer-1 dark:bg-dark-layer-1 nav-bar-container"><div class="display-none m-auto h-[50px] w-full items-center justify-center px-6 md:flex"><a href="/" class="mb-0.5 flex items-center mr-8" aria-label="LeetCode"><span class="display-none h-[22px] dark:flex"><svg width="59" height="22" viewBox="0 0 59 22" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-full w-auto max-w-none"><path fill-rule="evenodd" clip-rule="evenodd" d="M27.8226 17.4752C28.3202 16.1443 28.7218 14.5458 28.9859 12.6607C29.1277 11.6491 29.2845 10.1658 29.4568 8.20813H35.2561C35.2637 8.20813 35.2713 8.20828 35.2789 8.20857C35.6071 8.22119 35.8628 8.49743 35.8502 8.82558L35.4996 17.9427C35.4873 18.262 35.2249 18.5144 34.9054 18.5144H33.2974C32.8595 18.5144 32.5046 18.8694 32.5046 19.3072C32.5046 19.7451 32.8595 20.1 33.2974 20.1H35.4776C36.3533 20.1 37.0631 19.3901 37.0631 18.5144L37.4595 8.20813C37.4595 7.33244 36.7497 6.62254 35.874 6.62254H29.5913C29.671 5.65054 29.7537 4.58575 29.8394 3.42794C29.8718 2.99129 29.544 2.61109 29.1074 2.57874C28.6707 2.54639 28.2905 2.87414 28.2582 3.3108C28.1689 4.51669 28.0829 5.62069 28.0004 6.62254H25.3695C24.9316 6.62254 24.5767 6.97749 24.5767 7.41534C24.5767 7.85318 24.9316 8.20813 25.3695 8.20813H27.8651C27.7 10.07 27.5501 11.4816 27.4157 12.4407C27.1674 14.2124 26.7941 15.6986 26.3374 16.9199C26.0981 17.5599 25.8527 18.0822 25.6163 18.4944C25.5366 18.6333 25.4649 18.7474 25.4029 18.8378C25.3703 18.8853 25.3512 18.9109 25.3475 18.9155C25.0722 19.256 25.1252 19.7552 25.4657 20.0305C25.8062 20.3057 26.3054 20.2528 26.5806 19.9123C26.6737 19.7971 26.8159 19.5898 26.9917 19.2833C27.271 18.7963 27.5531 18.1959 27.8226 17.4752ZM48.5586 17.3184V7.72969H55.6831C56.3474 7.72969 56.883 8.26047 56.883 8.9117V16.4576C56.883 17.1088 56.3474 17.6396 55.6831 17.6396H53.3916C52.7274 17.6396 52.1918 17.1088 52.1918 16.4576V10.1081C52.1918 9.67022 51.8369 9.31528 51.399 9.31528C50.9612 9.31528 50.6062 9.67022 50.6062 10.1081V16.4576C50.6062 17.9877 51.8548 19.2252 53.3916 19.2252H55.6831C57.2199 19.2252 58.4686 17.9877 58.4686 16.4576V8.9117C58.4686 7.38157 57.2199 6.14411 55.6831 6.14411H48.5586V3.76573C48.5586 3.32788 48.2037 2.97294 47.7658 2.97294C47.328 2.97294 46.9731 3.32788 46.9731 3.76573V6.14411H44.1983C43.7604 6.14411 43.4055 6.49905 43.4055 6.9369C43.4055 7.37475 43.7604 7.72969 44.1983 7.72969H46.9731V12.465L44.3002 13.5341C43.8937 13.6968 43.696 14.1581 43.8586 14.5647C44.0212 14.9712 44.4826 15.1689 44.8891 15.0063L46.9731 14.1727V17.3184C46.9731 18.3666 46.0906 19.2252 44.9911 19.2252C44.5532 19.2252 44.1983 19.5801 44.1983 20.018C44.1983 20.4558 44.5532 20.8108 44.9911 20.8108C46.9567 20.8108 48.5586 19.2522 48.5586 17.3184Z" fill="white"></path><path d="M13.3797 16.4636C13.874 15.9701 14.674 15.9714 15.1667 16.4665C15.6593 16.9616 15.6581 17.7631 15.1638 18.2566L12.9691 20.4481C10.9443 22.4699 7.64261 22.4992 5.58369 20.5162C5.57179 20.5048 4.655 19.6058 1.63058 16.6402C-0.381491 14.6673 -0.581941 11.5104 1.31147 9.4831L4.84172 5.7031C6.7209 3.69085 10.1849 3.47093 12.3335 5.20847L15.5398 7.80152C16.0828 8.24065 16.1676 9.03757 15.7292 9.58151C15.2909 10.1254 14.4953 10.2104 13.9523 9.77127L10.746 7.17824C9.62238 6.26954 7.65677 6.39434 6.68718 7.43259L3.15688 11.2126C2.23512 12.1996 2.33607 13.7895 3.39833 14.8311C5.61922 17.0088 7.33084 18.6871 7.33282 18.689C8.40324 19.72 10.134 19.7046 11.185 18.6551L13.3797 16.4636Z" fill="#FFA116"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M8.04824 14.2706C7.35039 14.2706 6.78467 13.7039 6.78467 13.0048C6.78467 12.3057 7.35039 11.739 8.04824 11.739H17.3671C18.0649 11.739 18.6306 12.3057 18.6306 13.0048C18.6306 13.7039 18.0649 14.2706 17.3671 14.2706H8.04824Z" fill="#B3B3B3"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M9.79343 0.401024C10.2702 -0.109469 11.0698 -0.136141 11.5794 0.34145C12.089 0.819042 12.1156 1.62004 11.6389 2.13054L3.15692 11.2126C2.23513 12.1995 2.33608 13.7894 3.39827 14.831L7.31536 18.6721C7.81405 19.1611 7.82258 19.9625 7.33442 20.4621C6.84626 20.9616 6.04626 20.9702 5.54757 20.4812L1.63046 16.6401C-0.381492 14.6671 -0.581942 11.5102 1.31155 9.48305L9.79343 0.401024Z" fill="white"></path></svg></span><span class="dark:display-none flex h-[22px]"><svg width="273" height="101" viewBox="0 0 273 101" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-full w-auto max-w-none"><path d="M68.4876 75.8086C70.7358 73.5637 74.375 73.5696 76.616 75.8217C78.857 78.0738 78.8511 81.7194 76.6029 83.9642L66.6199 93.9326C57.4098 103.129 42.3911 103.263 33.0256 94.2424C32.9715 94.1905 28.8012 90.1015 15.044 76.6115C5.89166 67.6374 4.97987 53.2774 13.5925 44.0559L29.6506 26.8617C38.1985 17.7086 53.9552 16.7082 63.7285 24.6118L78.3131 36.4069C80.783 38.4043 81.1688 42.0294 79.1748 44.5036C77.1808 46.9778 73.5621 47.3642 71.0922 45.3667L56.5077 33.5717C51.3965 29.4383 42.4555 30.006 38.0451 34.7287L21.9867 51.9232C17.7939 56.4124 18.2531 63.6445 23.085 68.3823C33.1872 78.2883 40.9729 85.9224 40.9819 85.931C45.8509 90.6207 53.7239 90.5508 58.5045 85.777L68.4876 75.8086Z" fill="#FFA116"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M44.2359 65.8329C41.0616 65.8329 38.4883 63.2551 38.4883 60.0752C38.4883 56.8954 41.0616 54.3176 44.2359 54.3176H86.6247C89.799 54.3176 92.3723 56.8954 92.3723 60.0752C92.3723 63.2551 89.799 65.8329 86.6247 65.8329H44.2359Z" fill="#B3B3B3"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M52.1745 2.74414C54.3432 0.422038 57.9804 0.300713 60.2984 2.47315C62.6165 4.64558 62.7376 8.28912 60.5689 10.6112L21.9869 51.9233C17.7939 56.4122 18.2531 63.6443 23.0847 68.3823L40.9025 85.8543C43.1709 88.0787 43.2097 91.724 40.9892 93.9964C38.7687 96.2688 35.1297 96.3077 32.8613 94.0833L15.0435 76.6112C5.89165 67.6366 4.97986 53.2768 13.5929 44.0559L52.1745 2.74414Z" fill="black"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M134.597 76.9199C136.835 70.9349 138.641 63.746 139.829 55.2689C140.466 50.7197 141.171 44.0491 141.946 35.2455H168.026C168.045 35.2455 168.065 35.2457 168.085 35.2461C168.099 35.2464 168.114 35.2469 168.128 35.2474C169.604 35.3042 170.754 36.5465 170.698 38.0221L169.121 79.0221C169.065 80.4579 167.885 81.5933 166.449 81.5933H159.217C157.248 81.5933 155.652 83.1895 155.652 85.1585C155.652 87.1275 157.248 88.7237 159.217 88.7237H169.022C172.96 88.7237 176.152 85.5313 176.152 81.5933L177.935 35.2455C177.935 31.3074 174.742 28.115 170.804 28.115H142.551C142.909 23.7439 143.281 18.9555 143.667 13.7488C143.812 11.7851 142.338 10.0754 140.375 9.92989C138.411 9.78442 136.701 11.2583 136.556 13.222C136.154 18.6449 135.768 23.6097 135.397 28.115H123.565C121.596 28.115 120 29.7112 120 31.6802C120 33.6493 121.596 35.2455 123.565 35.2455H134.788C134.046 43.6184 133.372 49.9666 132.767 54.2793C131.651 62.247 129.972 68.9303 127.918 74.4227C126.842 77.3007 125.739 79.6494 124.675 81.5033C124.317 82.1278 123.994 82.6411 123.716 83.0475C123.569 83.2613 123.483 83.3764 123.466 83.397C122.229 84.9283 122.467 87.1731 123.998 88.4109C125.529 89.6487 127.774 89.4107 129.012 87.8794C129.43 87.3615 130.07 86.4292 130.861 85.0509C132.117 82.8608 133.385 80.1607 134.597 76.9199ZM227.847 76.2146V33.0939H259.887C262.874 33.0939 265.282 35.4808 265.282 38.4095V72.3436C265.282 75.2722 262.874 77.6591 259.887 77.6591H249.582C246.594 77.6591 244.186 75.2722 244.186 72.3436V43.7896C244.186 41.8205 242.59 40.2243 240.621 40.2243C238.652 40.2243 237.055 41.8205 237.055 43.7896V72.3436C237.055 79.2246 242.671 84.7896 249.582 84.7896H259.887C266.798 84.7896 272.413 79.2246 272.413 72.3436V38.4095C272.413 31.5284 266.798 25.9635 259.887 25.9635H227.847V15.2678C227.847 13.2988 226.251 11.7026 224.282 11.7026C222.313 11.7026 220.717 13.2988 220.717 15.2678V25.9635H208.239C206.27 25.9635 204.674 27.5597 204.674 29.5287C204.674 31.4977 206.27 33.0939 208.239 33.0939H220.717V54.3888L208.697 59.1967C206.869 59.928 205.98 62.0028 206.711 63.831C207.442 65.6592 209.517 66.5484 211.345 65.8172L220.717 62.0685V76.2146C220.717 80.9286 216.749 84.7896 211.804 84.7896C209.835 84.7896 208.239 86.3858 208.239 88.3548C208.239 90.3238 209.835 91.92 211.804 91.92C220.643 91.92 227.847 84.9111 227.847 76.2146Z" fill="black"></path></svg></span></a><ul class="relative m-0 flex h-full grow items-center gap-6 self-end p-0"><li class="relative flex h-full items-center text-sm "><a class="relative whitespace-nowrap hover:text-text-primary dark:hover:text-text-primary flex items-center text-base leading-[22px] cursor-pointer hover:text-text-primary dark:hover:text-text-primary text-text-secondary dark:text-text-secondary" href="/problemset">题库</a></li><li class="relative flex h-full items-center text-sm "><a class="relative whitespace-nowrap hover:text-text-primary dark:hover:text-text-primary flex items-center text-base leading-[22px] cursor-pointer hover:text-text-primary dark:hover:text-text-primary text-text-secondary dark:text-text-secondary" href="/contest">竞赛</a></li><li class="relative flex h-full items-center text-sm "><a class="relative whitespace-nowrap hover:text-text-primary dark:hover:text-text-primary flex items-center text-base leading-[22px] cursor-pointer hover:text-text-primary dark:hover:text-text-primary text-text-secondary dark:text-text-secondary" href="/discuss">讨论</a></li><li class="relative flex h-full items-center text-sm "><a class="relative whitespace-nowrap hover:text-text-primary dark:hover:text-text-primary flex items-center text-base leading-[22px] cursor-pointer hover:text-text-primary dark:hover:text-text-primary text-text-secondary dark:text-text-secondary" href="/company">求职</a></li><li class="relative flex h-full items-center text-sm "><div class="relative whitespace-nowrap hover:text-text-primary dark:hover:text-text-primary flex items-center text-base leading-[22px] cursor-pointer hover:text-text-primary dark:hover:text-text-primary text-text-secondary dark:text-text-secondary"><div class="relative"><button class="flex items-center focus:outline-none !text-brand-orange border-brand-orange">商店<!-- --> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="1em" height="1em" fill="currentColor" class="ml-1 h-[14px] w-[14px]" aria-hidden="true"><path fill-rule="evenodd" d="M4.929 7.913l7.078 7.057 7.064-7.057a1 1 0 111.414 1.414l-7.77 7.764a1 1 0 01-1.415 0L3.515 9.328a1 1 0 011.414-1.414z" clip-rule="evenodd"></path></svg></button><div class="leaveTo overflow-hidden pointer-events-none max-h-0 opacity-0" aria-hidden="true"><ul class="transition-all duration-200 ease-out opacity-0 scale-95 flex flex-col absolute top-[36px] z-dropdown rounded-lg p-2 overflow-auto focus:outline-none text-sm shadow-level2 dark:shadow-dark-level2 bg-overlay-3 dark:bg-dark-overlay-3"><li><a href="https://detail.youzan.com/show/goods/newest?alias=271n43vr9hen7" class="cursor-pointer select-none relative h-8 py-1.5 px-2 whitespace-nowrap hover:bg-fill-4 dark:hover:bg-dark-fill-4 rounded !text-brand-orange border-brand-orange flex items-center" target="_blank"><span>精品商城</span></a></li><li><a href="/store" class="cursor-pointer select-none relative h-8 py-1.5 px-2 whitespace-nowrap hover:bg-fill-4 dark:hover:bg-dark-fill-4 rounded !text-brand-orange border-brand-orange flex items-center" target="_blank"><span>力扣周边</span></a></li><li><span class="cursor-pointer select-none relative h-8 py-1.5 px-2 whitespace-nowrap hover:bg-fill-4 dark:hover:bg-dark-fill-4 rounded !text-brand-orange border-brand-orange flex items-center" target="_self"><span>Plus 会员</span></span></li></ul></div></div></div></li></ul><div class="relative flex h-full items-center"></div></div><div class="md:display-none flex h-[50px] w-full items-center justify-between pl-3 pr-[5px]"><div class="flex h-full w-full items-center justify-between"><a href="/" class="mb-0.5 flex items-center" aria-label="LeetCode"><span class="display-none h-[22px] dark:flex"><svg width="59" height="22" viewBox="0 0 59 22" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-full w-auto max-w-none"><path fill-rule="evenodd" clip-rule="evenodd" d="M27.8226 17.4752C28.3202 16.1443 28.7218 14.5458 28.9859 12.6607C29.1277 11.6491 29.2845 10.1658 29.4568 8.20813H35.2561C35.2637 8.20813 35.2713 8.20828 35.2789 8.20857C35.6071 8.22119 35.8628 8.49743 35.8502 8.82558L35.4996 17.9427C35.4873 18.262 35.2249 18.5144 34.9054 18.5144H33.2974C32.8595 18.5144 32.5046 18.8694 32.5046 19.3072C32.5046 19.7451 32.8595 20.1 33.2974 20.1H35.4776C36.3533 20.1 37.0631 19.3901 37.0631 18.5144L37.4595 8.20813C37.4595 7.33244 36.7497 6.62254 35.874 6.62254H29.5913C29.671 5.65054 29.7537 4.58575 29.8394 3.42794C29.8718 2.99129 29.544 2.61109 29.1074 2.57874C28.6707 2.54639 28.2905 2.87414 28.2582 3.3108C28.1689 4.51669 28.0829 5.62069 28.0004 6.62254H25.3695C24.9316 6.62254 24.5767 6.97749 24.5767 7.41534C24.5767 7.85318 24.9316 8.20813 25.3695 8.20813H27.8651C27.7 10.07 27.5501 11.4816 27.4157 12.4407C27.1674 14.2124 26.7941 15.6986 26.3374 16.9199C26.0981 17.5599 25.8527 18.0822 25.6163 18.4944C25.5366 18.6333 25.4649 18.7474 25.4029 18.8378C25.3703 18.8853 25.3512 18.9109 25.3475 18.9155C25.0722 19.256 25.1252 19.7552 25.4657 20.0305C25.8062 20.3057 26.3054 20.2528 26.5806 19.9123C26.6737 19.7971 26.8159 19.5898 26.9917 19.2833C27.271 18.7963 27.5531 18.1959 27.8226 17.4752ZM48.5586 17.3184V7.72969H55.6831C56.3474 7.72969 56.883 8.26047 56.883 8.9117V16.4576C56.883 17.1088 56.3474 17.6396 55.6831 17.6396H53.3916C52.7274 17.6396 52.1918 17.1088 52.1918 16.4576V10.1081C52.1918 9.67022 51.8369 9.31528 51.399 9.31528C50.9612 9.31528 50.6062 9.67022 50.6062 10.1081V16.4576C50.6062 17.9877 51.8548 19.2252 53.3916 19.2252H55.6831C57.2199 19.2252 58.4686 17.9877 58.4686 16.4576V8.9117C58.4686 7.38157 57.2199 6.14411 55.6831 6.14411H48.5586V3.76573C48.5586 3.32788 48.2037 2.97294 47.7658 2.97294C47.328 2.97294 46.9731 3.32788 46.9731 3.76573V6.14411H44.1983C43.7604 6.14411 43.4055 6.49905 43.4055 6.9369C43.4055 7.37475 43.7604 7.72969 44.1983 7.72969H46.9731V12.465L44.3002 13.5341C43.8937 13.6968 43.696 14.1581 43.8586 14.5647C44.0212 14.9712 44.4826 15.1689 44.8891 15.0063L46.9731 14.1727V17.3184C46.9731 18.3666 46.0906 19.2252 44.9911 19.2252C44.5532 19.2252 44.1983 19.5801 44.1983 20.018C44.1983 20.4558 44.5532 20.8108 44.9911 20.8108C46.9567 20.8108 48.5586 19.2522 48.5586 17.3184Z" fill="white"></path><path d="M13.3797 16.4636C13.874 15.9701 14.674 15.9714 15.1667 16.4665C15.6593 16.9616 15.6581 17.7631 15.1638 18.2566L12.9691 20.4481C10.9443 22.4699 7.64261 22.4992 5.58369 20.5162C5.57179 20.5048 4.655 19.6058 1.63058 16.6402C-0.381491 14.6673 -0.581941 11.5104 1.31147 9.4831L4.84172 5.7031C6.7209 3.69085 10.1849 3.47093 12.3335 5.20847L15.5398 7.80152C16.0828 8.24065 16.1676 9.03757 15.7292 9.58151C15.2909 10.1254 14.4953 10.2104 13.9523 9.77127L10.746 7.17824C9.62238 6.26954 7.65677 6.39434 6.68718 7.43259L3.15688 11.2126C2.23512 12.1996 2.33607 13.7895 3.39833 14.8311C5.61922 17.0088 7.33084 18.6871 7.33282 18.689C8.40324 19.72 10.134 19.7046 11.185 18.6551L13.3797 16.4636Z" fill="#FFA116"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M8.04824 14.2706C7.35039 14.2706 6.78467 13.7039 6.78467 13.0048C6.78467 12.3057 7.35039 11.739 8.04824 11.739H17.3671C18.0649 11.739 18.6306 12.3057 18.6306 13.0048C18.6306 13.7039 18.0649 14.2706 17.3671 14.2706H8.04824Z" fill="#B3B3B3"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M9.79343 0.401024C10.2702 -0.109469 11.0698 -0.136141 11.5794 0.34145C12.089 0.819042 12.1156 1.62004 11.6389 2.13054L3.15692 11.2126C2.23513 12.1995 2.33608 13.7894 3.39827 14.831L7.31536 18.6721C7.81405 19.1611 7.82258 19.9625 7.33442 20.4621C6.84626 20.9616 6.04626 20.9702 5.54757 20.4812L1.63046 16.6401C-0.381492 14.6671 -0.581942 11.5102 1.31155 9.48305L9.79343 0.401024Z" fill="white"></path></svg></span><span class="dark:display-none flex h-[22px]"><svg width="273" height="101" viewBox="0 0 273 101" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-full w-auto max-w-none"><path d="M68.4876 75.8086C70.7358 73.5637 74.375 73.5696 76.616 75.8217C78.857 78.0738 78.8511 81.7194 76.6029 83.9642L66.6199 93.9326C57.4098 103.129 42.3911 103.263 33.0256 94.2424C32.9715 94.1905 28.8012 90.1015 15.044 76.6115C5.89166 67.6374 4.97987 53.2774 13.5925 44.0559L29.6506 26.8617C38.1985 17.7086 53.9552 16.7082 63.7285 24.6118L78.3131 36.4069C80.783 38.4043 81.1688 42.0294 79.1748 44.5036C77.1808 46.9778 73.5621 47.3642 71.0922 45.3667L56.5077 33.5717C51.3965 29.4383 42.4555 30.006 38.0451 34.7287L21.9867 51.9232C17.7939 56.4124 18.2531 63.6445 23.085 68.3823C33.1872 78.2883 40.9729 85.9224 40.9819 85.931C45.8509 90.6207 53.7239 90.5508 58.5045 85.777L68.4876 75.8086Z" fill="#FFA116"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M44.2359 65.8329C41.0616 65.8329 38.4883 63.2551 38.4883 60.0752C38.4883 56.8954 41.0616 54.3176 44.2359 54.3176H86.6247C89.799 54.3176 92.3723 56.8954 92.3723 60.0752C92.3723 63.2551 89.799 65.8329 86.6247 65.8329H44.2359Z" fill="#B3B3B3"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M52.1745 2.74414C54.3432 0.422038 57.9804 0.300713 60.2984 2.47315C62.6165 4.64558 62.7376 8.28912 60.5689 10.6112L21.9869 51.9233C17.7939 56.4122 18.2531 63.6443 23.0847 68.3823L40.9025 85.8543C43.1709 88.0787 43.2097 91.724 40.9892 93.9964C38.7687 96.2688 35.1297 96.3077 32.8613 94.0833L15.0435 76.6112C5.89165 67.6366 4.97986 53.2768 13.5929 44.0559L52.1745 2.74414Z" fill="black"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M134.597 76.9199C136.835 70.9349 138.641 63.746 139.829 55.2689C140.466 50.7197 141.171 44.0491 141.946 35.2455H168.026C168.045 35.2455 168.065 35.2457 168.085 35.2461C168.099 35.2464 168.114 35.2469 168.128 35.2474C169.604 35.3042 170.754 36.5465 170.698 38.0221L169.121 79.0221C169.065 80.4579 167.885 81.5933 166.449 81.5933H159.217C157.248 81.5933 155.652 83.1895 155.652 85.1585C155.652 87.1275 157.248 88.7237 159.217 88.7237H169.022C172.96 88.7237 176.152 85.5313 176.152 81.5933L177.935 35.2455C177.935 31.3074 174.742 28.115 170.804 28.115H142.551C142.909 23.7439 143.281 18.9555 143.667 13.7488C143.812 11.7851 142.338 10.0754 140.375 9.92989C138.411 9.78442 136.701 11.2583 136.556 13.222C136.154 18.6449 135.768 23.6097 135.397 28.115H123.565C121.596 28.115 120 29.7112 120 31.6802C120 33.6493 121.596 35.2455 123.565 35.2455H134.788C134.046 43.6184 133.372 49.9666 132.767 54.2793C131.651 62.247 129.972 68.9303 127.918 74.4227C126.842 77.3007 125.739 79.6494 124.675 81.5033C124.317 82.1278 123.994 82.6411 123.716 83.0475C123.569 83.2613 123.483 83.3764 123.466 83.397C122.229 84.9283 122.467 87.1731 123.998 88.4109C125.529 89.6487 127.774 89.4107 129.012 87.8794C129.43 87.3615 130.07 86.4292 130.861 85.0509C132.117 82.8608 133.385 80.1607 134.597 76.9199ZM227.847 76.2146V33.0939H259.887C262.874 33.0939 265.282 35.4808 265.282 38.4095V72.3436C265.282 75.2722 262.874 77.6591 259.887 77.6591H249.582C246.594 77.6591 244.186 75.2722 244.186 72.3436V43.7896C244.186 41.8205 242.59 40.2243 240.621 40.2243C238.652 40.2243 237.055 41.8205 237.055 43.7896V72.3436C237.055 79.2246 242.671 84.7896 249.582 84.7896H259.887C266.798 84.7896 272.413 79.2246 272.413 72.3436V38.4095C272.413 31.5284 266.798 25.9635 259.887 25.9635H227.847V15.2678C227.847 13.2988 226.251 11.7026 224.282 11.7026C222.313 11.7026 220.717 13.2988 220.717 15.2678V25.9635H208.239C206.27 25.9635 204.674 27.5597 204.674 29.5287C204.674 31.4977 206.27 33.0939 208.239 33.0939H220.717V54.3888L208.697 59.1967C206.869 59.928 205.98 62.0028 206.711 63.831C207.442 65.6592 209.517 66.5484 211.345 65.8172L220.717 62.0685V76.2146C220.717 80.9286 216.749 84.7896 211.804 84.7896C209.835 84.7896 208.239 86.3858 208.239 88.3548C208.239 90.3238 209.835 91.92 211.804 91.92C220.643 91.92 227.847 84.9111 227.847 76.2146Z" fill="black"></path></svg></span></a><div class="z-overlay-1 flex h-full items-center"><div class="relative inline-block h-8 w-8"><div class="relative z-base-2 !absolute right-0  top-0 inline-block h-8 w-0 transition-[width] duration-200 [@media(min-width:1180px)]:w-[200px]"><div class="h-full"><div class="relative h-full overflow-hidden rounded-md"><div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 leading-none"><span class="text-text-secondary dark:text-text-secondary"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="1em" height="1em" fill="none" class="w-4 h-4"><path d="M14.1057 14.2L17 17M16.0667 9.53333C16.0667 13.1416 13.1416 16.0667 9.53333 16.0667C5.92507 16.0667 3 13.1416 3 9.53333C3 5.92507 5.92507 3 9.53333 3C13.1416 3 16.0667 5.92507 16.0667 9.53333Z" stroke="currentColor" stroke-width="1.66667" stroke-linecap="round"></path></svg></span></div><input class="block h-full w-full rounded-full border-none py-1.5 pr-9 text-sm outline-none pl-9 bg-sd-accent text-sd-muted-foreground" placeholder="搜索" value=""/></div></div></div><a class="z-base-1 group relative flex h-full w-full  cursor-pointer items-center justify-center rounded p-1 transition-all duration-200  [@media(min-width:1180px)]:opacity-0 [@media(min-width:1180px)]:delay-100  hover:bg-fill-3 dark:hover:bg-dark-fill-3" aria-label="search"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="1em" height="1em" fill="none" class="h-4 w-4 transition-colors hover:text-text-primary dark:hover:text-text-primary text-text-secondary dark:text-text-secondary"><path d="M14.1057 14.2L17 17M16.0667 9.53333C16.0667 13.1416 13.1416 16.0667 9.53333 16.0667C5.92507 16.0667 3 13.1416 3 9.53333C3 5.92507 5.92507 3 9.53333 3C13.1416 3 16.0667 5.92507 16.0667 9.53333Z" stroke="currentColor" stroke-width="1.66667" stroke-linecap="round"></path></svg></a></div><button class="group relative"><div class="relative flex h-[40px] w-[40px] transform items-center justify-center overflow-hidden rounded-full ring-0 ring-opacity-30 transition-all duration-200"><div class="flex h-4 w-4 origin-center transform flex-col justify-between overflow-hidden py-[2px] transition-all duration-300"><div class="h-[2px] w-7 origin-left scale-y-75 transform rounded-[1px] transition-all duration-300 bg-gray-60 dark:bg-gray-60"></div><div class="h-[2px] w-7 scale-y-75 transform rounded-[1px] transition-all delay-75 duration-300 bg-gray-60 dark:bg-gray-60"></div><div class="h-[2px] w-7 origin-left scale-y-75 transform rounded-[1px] transition-all delay-150 duration-300 bg-gray-60 dark:bg-gray-60"></div><div class="absolute top-2 flex  transform items-center justify-between transition-all duration-300  w-0 -translate-x-10"><div class="absolute h-[2px] w-4 rotate-0 transform rounded-[1px] transition-all delay-100 duration-300 bg-gray-60 dark:bg-gray-60"></div><div class="absolute h-[2px] w-4 -rotate-0 transform rounded-[1px] transition-all delay-100 duration-300 bg-gray-60 dark:bg-gray-60"></div></div></div></div></button></div></div><div class="leaveTo overflow-hidden pointer-events-none max-h-0 opacity-0" aria-hidden="true"><div class="transform-all ease-in-out duration-100 ease-out -translate-y-[50%] opacity-0 z-overlay fixed left-0 right-0 top-0 h-full min-h-[300px] w-full overflow-y-auto bg-layer-01 dark:bg-layer-01"></div></div></div></nav></div><div class="md:!h-0" style="height:0px"></div><div></div><div class="z-nav flex w-full flex-col"></div></div><div class="mx-auto w-full grow relative p-0 md:max-w-none md:p-0 lg:max-w-none"><div class="relative flex w-full flex-1"><div class="relative flex flex-1 justify-center"><div class="lc-md:px-6 relative w-[calc(100vw_-_301px)] max-w-[1000px] flex-1 flex-col gap-0 px-4 py-2 hidden"><div class="group relative mb-2 mt-4"><div class="rounded-sd-md scrollbar-hide flex select-none gap-6 overflow-y-hidden overflow-x-scroll"><div class="rounded-sd-md h-[135px] w-[270px] flex-none overflow-hidden"><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-full w-full"></div></div><div class="rounded-sd-md h-[135px] w-[270px] flex-none overflow-hidden"><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-full w-full"></div></div><div class="rounded-sd-md h-[135px] w-[270px] flex-none overflow-hidden"><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-full w-full"></div></div><div class="rounded-sd-md h-[135px] w-[270px] flex-none overflow-hidden"><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-full w-full"></div></div></div></div><div></div><div class="z-base-5 lc-md:top-0 sticky top-[50px] flex flex-col items-start justify-between overflow-hidden bg-[#fafafa] py-4 dark:bg-[#1a1a1a] translate-y-0 transition-transform duration-300"><div class="lc-md:hidden mb-4 mt-4 flex w-full items-center gap-2 first-of-type:mt-0"><div class="w-full flex-1"><div class="w-full" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R14qkf6:" data-state="closed"><div class="relative rounded-md input_input-container__6l534"><div class="text-gray-6 dark:text-dark-gray-6 absolute inset-y-0 flex items-center pl-3 pointer-events-none left-0"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="1em" height="1em" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M5.527 5.527a7.5 7.5 0 0111.268 9.852l3.581 3.583a1 1 0 01-1.414 1.415l-3.582-3.583A7.501 7.501 0 015.527 5.527zm1.414 1.414a5.5 5.5 0 107.779 7.779A5.5 5.5 0 006.94 6.94z" clip-rule="evenodd"></path></svg></span></div><input class="block leading-5 outline-none placeholder:text-label-4 dark:placeholder:text-dark-label-4 border-none py-1.5 text-label-2 dark:text-dark-label-2 dark:bg-dark-fill-3 focus:bg-fill-2 dark:focus:bg-dark-fill-2 pl-9 pr-3 bg-sd-accent h-8 w-full rounded-full" autoComplete="off" type="text" placeholder="搜索" value=""/></div></div></div></div><div class="group/follow-tabs flex w-full items-center gap-4 overflow-hidden"><div class="_aa1h relative max-w-full flex-1 overflow-x-auto"><div class="react-horizontal-scrolling-menu--wrapper "><div class="react-horizontal-scrolling-menu--header"></div><div class="react-horizontal-scrolling-menu--inner-wrapper"><div class="react-horizontal-scrolling-menu--arrow-left"><div class="z-base-1 pointer-events-none absolute top-1/2 flex h-full w-[70px] -translate-y-1/2 transition-opacity opacity-0 left-0 justify-start bg-[linear-gradient(270deg,#fafafa00_0%,#fafafaff_70%)] dark:bg-[linear-gradient(270deg,#1a1a1a00_0%,#1a1a1aff_70%)]"><div class="flex h-full items-center px-1.5 opacity-0 transition-opacity"><div class="relative text-[14px] leading-[normal] p-[1px] before:block before:h-3.5 before:w-3.5 rotate-180"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="angles-right" class="svg-inline--fa fa-angles-right absolute left-1/2 top-1/2 h-[1em] -translate-x-1/2 -translate-y-1/2 align-[-0.125em]" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M113 433L273 273c9.4-9.4 9.4-24.6 0-33.9L113 79c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l143 143L79 399c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0zm192 0L465 273c9.4-9.4 9.4-24.6 0-33.9L305 79c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l143 143L271 399c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0z"></path></svg></div></div></div></div><div class="react-horizontal-scrolling-menu--scroll-container gap-4"><div class="react-horizontal-scrolling-menu--item flex-none" data-key="for-you" data-index="0"><button class="relative items-center justify-center transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-sd-ring disabled:pointer-events-none disabled:opacity-50 flex h-8 flex-none gap-1 rounded-lg px-2.5 py-1 text-base font-normal hover:bg-sd-accent hover:text-sd-foreground bg-sd-accent text-sd-foreground"><div class="relative text-[14px] leading-[normal] p-[1px] before:block before:h-3.5 before:w-3.5"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="fire" class="svg-inline--fa fa-fire absolute left-1/2 top-1/2 h-[1em] -translate-x-1/2 -translate-y-1/2 align-[-0.125em]" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M159.3 5.4c7.8-7.3 19.9-7.2 27.7 .1c27.6 25.9 53.5 53.8 77.7 84c11-14.4 23.5-30.1 37-42.9c7.9-7.4 20.1-7.4 28 .1c34.6 33 63.9 76.6 84.5 118c20.3 40.8 33.8 82.5 33.8 111.9C448 404.2 348.2 512 224 512C98.4 512 0 404.1 0 276.5c0-38.4 17.8-85.3 45.4-131.7C73.3 97.7 112.7 48.6 159.3 5.4zM225.7 416c25.3 0 47.7-7 68.8-21c42.1-29.4 53.4-88.2 28.1-134.4c-4.5-9-16-9.6-22.5-2l-25.2 29.3c-6.6 7.6-18.5 7.4-24.7-.5c-16.5-21-46-58.5-62.8-79.8c-6.3-8-18.3-8.1-24.7-.1c-33.8 42.5-50.8 69.3-50.8 99.4C112 375.4 162.6 416 225.7 416z"></path></svg></div><div class="relative flex-none capitalize"><span class="font-semibold">推荐</span><span class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 whitespace-nowrap font-normal hidden">推荐</span></div></button></div></div><div class="react-horizontal-scrolling-menu--arrow-right"><div class="z-base-1 pointer-events-none absolute top-1/2 flex h-full w-[70px] -translate-y-1/2 transition-opacity opacity-0 right-0 justify-end bg-[linear-gradient(90deg,#fafafa00_0%,#fafafaff_70%)] dark:bg-[linear-gradient(90deg,#1a1a1a00_0%,#1a1a1aff_70%)]"><div class="flex h-full items-center px-1.5 opacity-0 transition-opacity"><div class="relative text-[14px] leading-[normal] p-[1px] before:block before:h-3.5 before:w-3.5"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="angles-right" class="svg-inline--fa fa-angles-right absolute left-1/2 top-1/2 h-[1em] -translate-x-1/2 -translate-y-1/2 align-[-0.125em]" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M113 433L273 273c9.4-9.4 9.4-24.6 0-33.9L113 79c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l143 143L79 399c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0zm192 0L465 273c9.4-9.4 9.4-24.6 0-33.9L305 79c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l143 143L271 399c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0z"></path></svg></div></div></div></div></div><div class="react-horizontal-scrolling-menu--footer"></div></div></div><div class="lc-md:flex hidden flex-none items-center gap-2"><div class="hidden items-center group-hover/follow-tabs:flex"><div class="bg-sd-border mr-2 h-5 w-px rounded-full"></div><button class="relative inline-flex items-center justify-center font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-sd-ring disabled:pointer-events-none disabled:opacity-50 hover:bg-sd-accent text-xs p-0 rounded-sd-md h-7 w-7 text-sd-muted-foreground hover:text-sd-foreground flex-none" data-state="closed"><div class="relative text-[14px] leading-[normal] p-[1px] before:block before:h-3.5 before:w-3.5"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="gear" class="svg-inline--fa fa-gear absolute left-1/2 top-1/2 h-[1em] -translate-x-1/2 -translate-y-1/2 align-[-0.125em]" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 0c17 0 33.6 1.7 49.8 4.8c7.9 1.5 21.8 6.1 29.4 20.1c2 3.7 3.6 7.6 4.6 11.8l9.3 38.5C350.5 81 360.3 86.7 366 85l38-11.2c4-1.2 8.1-1.8 12.2-1.9c16.1-.5 27 9.4 32.3 15.4c22.1 25.1 39.1 54.6 49.9 86.3c2.6 7.6 5.6 21.8-2.7 35.4c-2.2 3.6-4.9 7-8 10L459 246.3c-4.2 4-4.2 15.5 0 19.5l28.7 27.3c3.1 3 5.8 6.4 8 10c8.2 13.6 5.2 27.8 2.7 35.4c-10.8 31.7-27.8 61.1-49.9 86.3c-5.3 6-16.3 15.9-32.3 15.4c-4.1-.1-8.2-.8-12.2-1.9L366 427c-5.7-1.7-15.5 4-16.9 9.8l-9.3 38.5c-1 4.2-2.6 8.2-4.6 11.8c-7.7 14-21.6 18.5-29.4 20.1C289.6 510.3 273 512 256 512s-33.6-1.7-49.8-4.8c-7.9-1.5-21.8-6.1-29.4-20.1c-2-3.7-3.6-7.6-4.6-11.8l-9.3-38.5c-1.4-5.8-11.2-11.5-16.9-9.8l-38 11.2c-4 1.2-8.1 1.8-12.2 1.9c-16.1 .5-27-9.4-32.3-15.4c-22-25.1-39.1-54.6-49.9-86.3c-2.6-7.6-5.6-21.8 2.7-35.4c2.2-3.6 4.9-7 8-10L53 265.7c4.2-4 4.2-15.5 0-19.5L24.2 218.9c-3.1-3-5.8-6.4-8-10C8 195.3 11 181.1 13.6 173.6c10.8-31.7 27.8-61.1 49.9-86.3c5.3-6 16.3-15.9 32.3-15.4c4.1 .1 8.2 .8 12.2 1.9L146 85c5.7 1.7 15.5-4 16.9-9.8l9.3-38.5c1-4.2 2.6-8.2 4.6-11.8c7.7-14 21.6-18.5 29.4-20.1C222.4 1.7 239 0 256 0zM218.1 51.4l-8.5 35.1c-7.8 32.3-45.3 53.9-77.2 44.6L97.9 120.9c-16.5 19.3-29.5 41.7-38 65.7l26.2 24.9c24 22.8 24 66.2 0 89L59.9 325.4c8.5 24 21.5 46.4 38 65.7l34.6-10.2c31.8-9.4 69.4 12.3 77.2 44.6l8.5 35.1c24.6 4.5 51.3 4.5 75.9 0l8.5-35.1c7.8-32.3 45.3-53.9 77.2-44.6l34.6 10.2c16.5-19.3 29.5-41.7 38-65.7l-26.2-24.9c-24-22.8-24-66.2 0-89l26.2-24.9c-8.5-24-21.5-46.4-38-65.7l-34.6 10.2c-31.8 9.4-69.4-12.3-77.2-44.6l-8.5-35.1c-24.6-4.5-51.3-4.5-75.9 0zM208 256a48 48 0 1 0 96 0 48 48 0 1 0 -96 0zm48 96a96 96 0 1 1 0-192 96 96 0 1 1 0 192z"></path></svg></div></button></div><a href="/post-editor/discuss/create/" target="_blank" rel="noreferrer" class="flex-none"><button class="relative inline-flex items-center justify-center font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-sd-ring disabled:pointer-events-none disabled:opacity-50 text-sd-fixed-white h-8 px-3 text-sm rounded-sd-md bg-sd-green-500 hover:bg-sd-green-500/80 gap-2"><div class="relative text-[14px] leading-[normal] p-[1px] before:block before:h-3.5 before:w-3.5"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="pen-to-square" class="svg-inline--fa fa-pen-to-square absolute left-1/2 top-1/2 h-[1em] -translate-x-1/2 -translate-y-1/2 align-[-0.125em]" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152V424c0 48.6 39.4 88 88 88H360c48.6 0 88-39.4 88-88V312c0-13.3-10.7-24-24-24s-24 10.7-24 24V424c0 22.1-17.9 40-40 40H88c-22.1 0-40-17.9-40-40V152c0-22.1 17.9-40 40-40H200c13.3 0 24-10.7 24-24s-10.7-24-24-24H88z"></path></svg></div>发帖</button></a></div></div><div class="flex mt-2"><div class="flex items-center"><button class="relative justify-center text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-sd-ring disabled:pointer-events-none disabled:opacity-50 h-9 rounded-sd-md text-sd-muted-foreground hover:text-sd-blue-400 flex flex-none items-center gap-2 px-2.5 py-1 hover:bg-transparent"><div class="relative text-[14px] leading-[normal] p-[1px] before:block before:h-3.5 before:w-3.5"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="thumbs-up" class="svg-inline--fa fa-thumbs-up absolute left-1/2 top-1/2 h-[1em] -translate-x-1/2 -translate-y-1/2 align-[-0.125em]" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M323.8 34.8c-38.2-10.9-78.1 11.2-89 49.4l-5.7 20c-3.7 13-10.4 25-19.5 35l-51.3 56.4c-8.9 9.8-8.2 25 1.6 33.9s25 8.2 33.9-1.6l51.3-56.4c14.1-15.5 24.4-34 30.1-54.1l5.7-20c3.6-12.7 16.9-20.1 29.7-16.5s20.1 16.9 16.5 29.7l-5.7 20c-5.7 19.9-14.7 38.7-26.6 55.5c-5.2 7.3-5.8 16.9-1.7 24.9s12.3 13 21.3 13L448 224c8.8 0 16 7.2 16 16c0 6.8-4.3 12.7-10.4 15c-7.4 2.8-13 9-14.9 16.7s.1 15.8 5.3 21.7c2.5 2.8 4 6.5 4 10.6c0 7.8-5.6 14.3-13 15.7c-8.2 1.6-15.1 7.3-18 15.1s-1.6 16.7 3.6 23.3c2.1 2.7 3.4 6.1 3.4 9.9c0 6.7-4.2 12.6-10.2 14.9c-11.5 4.5-17.7 16.9-14.4 28.8c.4 1.3 .6 2.8 .6 4.3c0 8.8-7.2 16-16 16H286.5c-12.6 0-25-3.7-35.5-10.7l-61.7-41.1c-11-7.4-25.9-4.4-33.3 6.7s-4.4 25.9 6.7 33.3l61.7 41.1c18.4 12.3 40 18.8 62.1 18.8H384c34.7 0 62.9-27.6 64-62c14.6-11.7 24-29.7 24-50c0-4.5-.5-8.8-1.3-13c15.4-11.7 25.3-30.2 25.3-51c0-6.5-1-12.8-2.8-18.7C504.8 273.7 512 257.7 512 240c0-35.3-28.6-64-64-64l-92.3 0c4.7-10.4 8.7-21.2 11.8-32.2l5.7-20c10.9-38.2-11.2-78.1-49.4-89zM32 192c-17.7 0-32 14.3-32 32V448c0 17.7 14.3 32 32 32H96c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32H32z"></path></svg></div><span class="text-sm font-normal">高赞</span></button><div style="max-width:0" class="flex items-center justify-start gap-2 overflow-hidden transition-[max-width] duration-300 text-xs"><div class="text-sd-foreground flex flex-none cursor-pointer items-center gap-1 whitespace-nowrap text-sm" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R4oqkf6:" data-state="closed"><span>全部时间</span><div class="relative text-[12px] leading-[normal] p-[1px] before:block before:h-3 before:w-3 origin-center transition-transform"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="chevron-down" class="svg-inline--fa fa-chevron-down absolute left-1/2 top-1/2 h-[1em] -translate-x-1/2 -translate-y-1/2 align-[-0.125em]" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M239 401c9.4 9.4 24.6 9.4 33.9 0L465 209c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-175 175L81 175c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9L239 401z"></path></svg></div></div></div></div><button class="relative justify-center text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-sd-ring disabled:pointer-events-none disabled:opacity-50 h-9 rounded-sd-md text-sd-muted-foreground hover:text-sd-blue-400 flex flex-none items-center gap-2 px-2.5 py-1 hover:bg-transparent"><div class="relative text-[14px] leading-[normal] p-[1px] before:block before:h-3.5 before:w-3.5"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="sparkles" class="svg-inline--fa fa-sparkles absolute left-1/2 top-1/2 h-[1em] -translate-x-1/2 -translate-y-1/2 align-[-0.125em]" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M327.5 85.2c-4.5 1.7-7.5 6-7.5 10.8s3 9.1 7.5 10.8L384 128l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L448 128l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L448 64 426.8 7.5C425.1 3 420.8 0 416 0s-9.1 3-10.8 7.5L384 64 327.5 85.2zM9.3 240C3.6 242.6 0 248.3 0 254.6s3.6 11.9 9.3 14.5L26.3 277l8.1 3.7 .6 .3 88.3 40.8L164.1 410l.3 .6 3.7 8.1 7.9 17.1c2.6 5.7 8.3 9.3 14.5 9.3s11.9-3.6 14.5-9.3l7.9-17.1 3.7-8.1 .3-.6 40.8-88.3L346 281l.6-.3 8.1-3.7 17.1-7.9c5.7-2.6 9.3-8.3 9.3-14.5s-3.6-11.9-9.3-14.5l-17.1-7.9-8.1-3.7-.6-.3-88.3-40.8L217 99.1l-.3-.6L213 90.3l-7.9-17.1c-2.6-5.7-8.3-9.3-14.5-9.3s-11.9 3.6-14.5 9.3l-7.9 17.1-3.7 8.1-.3 .6-40.8 88.3L35.1 228.1l-.6 .3-8.1 3.7L9.3 240zm83 14.5l51.2-23.6c10.4-4.8 18.7-13.1 23.5-23.5l23.6-51.2 23.6 51.2c4.8 10.4 13.1 18.7 23.5 23.5l51.2 23.6-51.2 23.6c-10.4 4.8-18.7 13.1-23.5 23.5l-23.6 51.2-23.6-51.2c-4.8-10.4-13.1-18.7-23.5-23.5L92.3 254.6zM384 384l-56.5 21.2c-4.5 1.7-7.5 6-7.5 10.8s3 9.1 7.5 10.8L384 448l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L448 448l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L448 384l-21.2-56.5c-1.7-4.5-6-7.5-10.8-7.5s-9.1 3-10.8 7.5L384 384z"></path></svg></div><span class="text-sm font-normal">最新</span></button></div></div><div class="mt-2 flex flex-col gap-4"><div class="flex h-[460px] flex-col items-center justify-center gap-6"><picture><source srcSet="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/images/null_dark-3f55ffa94690763ee68c9a2be3074a42.png?x-oss-process=image%2Fformat%2Cwebp" type="image/webp"/><img src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/images/null_dark-3f55ffa94690763ee68c9a2be3074a42.png" class="w-[200px]" alt="数据为空"/></picture><div class="text-sd-card-foreground text-sm">暂无相关内容</div><a target="_blank" rel="noopener noreferrer" class="no-underline hover:text-blue-s dark:hover:text-dark-blue-s truncate" href="/post-editor/discuss/create/"><button class="relative justify-center text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-sd-ring disabled:pointer-events-none disabled:opacity-50 bg-sd-primary text-sd-primary-foreground hover:bg-sd-primary/90 h-9 px-4 py-2 rounded-sd-md flex items-center gap-2"><div class="relative text-[14px] leading-[normal] p-[1px] before:block before:h-3.5 before:w-3.5"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="pen-to-square" class="svg-inline--fa fa-pen-to-square absolute left-1/2 top-1/2 h-[1em] -translate-x-1/2 -translate-y-1/2 align-[-0.125em]" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152V424c0 48.6 39.4 88 88 88H360c48.6 0 88-39.4 88-88V312c0-13.3-10.7-24-24-24s-24 10.7-24 24V424c0 22.1-17.9 40-40 40H88c-22.1 0-40-17.9-40-40V152c0-22.1 17.9-40 40-40H200c13.3 0 24-10.7 24-24s-10.7-24-24-24H88z"></path></svg></div><div>发帖</div></button></a></div></div><div class="w-full bg-[#fafafa] py-4 dark:bg-[#1a1a1a] hidden"><div class="flex flex-col gap-6"></div></div></div><div class="lc-md:px-6 relative flex w-[calc(100vw_-_301px)] max-w-[1000px] flex-1 flex-col px-0 pt-2.5"><div class="flex justify-between px-4 pt-3.5"><a class="no-underline hover:text-blue-s dark:hover:text-dark-blue-s truncate" href="/discuss/"><button class="relative inline-flex items-center justify-center font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-sd-ring disabled:pointer-events-none disabled:opacity-50 text-sd-secondary-foreground hover:bg-sd-secondary/80 text-sm p-0 rounded-sd-md h-8 w-8 bg-sd-accent"><div class="relative text-[14px] leading-[normal] p-[1px] before:block before:h-3.5 before:w-3.5"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="chevron-left" class="svg-inline--fa fa-chevron-left absolute left-1/2 top-1/2 h-[1em] -translate-x-1/2 -translate-y-1/2 align-[-0.125em]" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M15 239c-9.4 9.4-9.4 24.6 0 33.9L207 465c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9L65.9 256 241 81c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0L15 239z"></path></svg></div></button></a><button class="relative inline-flex items-center justify-center font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-sd-ring disabled:pointer-events-none disabled:opacity-50 hover:text-sd-accent-foreground text-sm p-0 rounded-sd-md h-8 w-8 bg-sd-accent text-sd-secondary-foreground hover:bg-sd-secondary/80" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:Rckkf6:" data-state="closed"><div class="relative text-[14px] leading-[normal] p-[1px] before:block before:h-3.5 before:w-3.5"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="ellipsis" class="svg-inline--fa fa-ellipsis absolute left-1/2 top-1/2 h-[1em] -translate-x-1/2 -translate-y-1/2 align-[-0.125em]" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M432 256a48 48 0 1 1 -96 0 48 48 0 1 1 96 0zm-160 0a48 48 0 1 1 -96 0 48 48 0 1 1 96 0zM64 304a48 48 0 1 1 0-96 48 48 0 1 1 0 96z"></path></svg></div></button></div><div class="w-full p-4"><div class="flex min-w-0 flex-col gap-3"><div class="text-[22px] font-medium leading-8 [overflow-wrap:anywhere] text-lc-text-primary dark:text-dark-lc-text-primary">分享丨【算法题单】动态规划（入门/背包/划分/状态机/区间/状压/数位/树形/优化）</div><div class="flex items-center gap-4"><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R33ckf6:" data-state="closed" class=""><div><a target="_blank" rel="noopener noreferrer" class="no-underline hover:text-blue-s dark:hover:text-dark-blue-s truncate h-8 min-h-[32px] w-8 min-w-[32px] block" href="/u/endlesscheng/"><picture><source srcSet="https://assets.leetcode.cn/aliyun-lc-upload/users/endlesscheng/avatar_1690721039.png?x-oss-process=image%2Fformat%2Cwebp" type="image/webp"/><img src="https://assets.leetcode.cn/aliyun-lc-upload/users/endlesscheng/avatar_1690721039.png" alt="" class="rounded-1/2 object-cover h-full w-full rounded-full"/></picture></a></div></button><div class="flex flex-col gap-0.5"><div class="flex items-center gap-2"><div class="flex items-center gap-1 truncate" translate="no"><a target="_blank" rel="noopener noreferrer" class="no-underline text-sm overflow-hidden md:max-w-[200px] max-w-[200px] truncate hover:text-blue-s dark:hover:text-dark-blue-s font-normal text-text-primary dark:text-text-primary" href="/u/endlesscheng/">灵茶山艾府</a></div></div><div class="flex flex-wrap items-center gap-x-3 gap-y-1"><div class="flex items-center gap-1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="1em" height="1em" fill="currentColor" class="h-4 w-4 dark:text-sd-gray-500 text-sd-gray-400"><path fill-rule="evenodd" d="M1.104 12.444a1 1 0 010-.888c.13-.26.37-.693.722-1.241A18.85 18.85 0 013.88 7.652C6.184 5.176 8.896 3.667 12 3.667s5.816 1.509 8.119 3.985c.79.85 1.475 1.756 2.055 2.663.352.548.593.98.722 1.24a1 1 0 010 .89c-.13.26-.37.692-.722 1.24a18.848 18.848 0 01-2.055 2.663c-2.303 2.476-5.015 3.985-8.119 3.985s-5.816-1.509-8.119-3.985a18.846 18.846 0 01-2.055-2.663c-.352-.548-.593-.98-.722-1.24zm2.406.162a16.87 16.87 0 001.836 2.38c1.959 2.106 4.19 3.347 6.654 3.347 2.465 0 4.695-1.24 6.654-3.347A16.87 16.87 0 0020.86 12a16.871 16.871 0 00-2.206-2.986C16.695 6.908 14.464 5.667 12 5.667c-2.465 0-4.695 1.24-6.654 3.347A16.87 16.87 0 003.14 12c.108.188.232.391.37.607zM12 15.75c-2.06 0-3.727-1.68-3.727-3.75 0-2.07 1.667-3.75 3.727-3.75 2.06 0 3.727 1.68 3.727 3.75 0 2.07-1.667 3.75-3.727 3.75zm0-2c.952 0 1.727-.782 1.727-1.75s-.775-1.75-1.727-1.75c-.952 0-1.727.782-1.727 1.75s.775 1.75 1.727 1.75z" clip-rule="evenodd"></path></svg><div class="text-xs dark:text-sd-gray-500 text-sd-gray-400">749465</div></div><div class="flex items-center gap-1.5"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="1em" height="1em" fill="currentColor" class="h-4 w-4 dark:text-sd-gray-500 text-sd-gray-400"><path fill-rule="evenodd" d="M19 11.063V7h-2v1a1 1 0 11-2 0V7H9v1a1 1 0 01-2 0V7H5v4.063h14zm0 2H5V19h14v-5.938zM9 5h6V4a1 1 0 112 0v1h2a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2V4a1 1 0 012 0v1z" clip-rule="evenodd"></path></svg><div class="min-w-max text-xs dark:text-sd-gray-500 text-sd-gray-400"><span class="" data-state="closed">2024.03.19</span></div></div><div class="flex items-center gap-1 dark:text-sd-gray-500 text-sd-gray-400"><div class="relative text-[12px] leading-[normal] p-[1px] before:block before:h-3 before:w-3"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="pen-to-square" class="svg-inline--fa fa-pen-to-square absolute left-1/2 top-1/2 h-[1em] -translate-x-1/2 -translate-y-1/2 align-[-0.125em]" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152V424c0 48.6 39.4 88 88 88H360c48.6 0 88-39.4 88-88V312c0-13.3-10.7-24-24-24s-24 10.7-24 24V424c0 22.1-17.9 40-40 40H88c-22.1 0-40-17.9-40-40V152c0-22.1 17.9-40 40-40H200c13.3 0 24-10.7 24-24s-10.7-24-24-24H88z"></path></svg></div><div class="min-w-max text-xs dark:text-sd-gray-500 text-sd-gray-400"><span class="" data-state="closed">2025.12.14</span></div></div><span class="flex-shrink-0 text-xs dark:text-sd-gray-500 text-sd-gray-400">发布于 <!-- -->未知归属地</span></div></div></div><div class="flex flex-wrap gap-1"><a class="no-underline truncate bg-sd-accent text-sd-muted-foreground hover:text-sd-foreground dark:hover:text-sd-foreground items-center rounded-full px-2 py-1 text-xs" href="/discuss/topic/bit-manipulation/">位运算</a><a class="no-underline truncate bg-sd-accent text-sd-muted-foreground hover:text-sd-foreground dark:hover:text-sd-foreground items-center rounded-full px-2 py-1 text-xs" href="/discuss/topic/tree/">树</a><a class="no-underline truncate bg-sd-accent text-sd-muted-foreground hover:text-sd-foreground dark:hover:text-sd-foreground items-center rounded-full px-2 py-1 text-xs" href="/discuss/topic/recursion/">递归</a><a class="no-underline truncate bg-sd-accent text-sd-muted-foreground hover:text-sd-foreground dark:hover:text-sd-foreground items-center rounded-full px-2 py-1 text-xs" href="/discuss/topic/memoization/">记忆化搜索</a><a class="no-underline truncate bg-sd-accent text-sd-muted-foreground hover:text-sd-foreground dark:hover:text-sd-foreground items-center rounded-full px-2 py-1 text-xs" href="/discuss/topic/math/">数学</a><a class="no-underline truncate bg-sd-accent text-sd-muted-foreground hover:text-sd-foreground dark:hover:text-sd-foreground items-center rounded-full px-2 py-1 text-xs" href="/discuss/topic/dynamic-programming/">动态规划</a><a class="no-underline truncate bg-sd-accent text-sd-muted-foreground hover:text-sd-foreground dark:hover:text-sd-foreground items-center rounded-full px-2 py-1 text-xs" href="/discuss/topic/game-theory/">博弈</a><a class="no-underline truncate bg-sd-accent text-sd-muted-foreground hover:text-sd-foreground dark:hover:text-sd-foreground items-center rounded-full px-2 py-1 text-xs" href="/discuss/topic/zhou-sai/">周赛</a><a class="no-underline truncate bg-sd-accent text-sd-muted-foreground hover:text-sd-foreground dark:hover:text-sd-foreground items-center rounded-full px-2 py-1 text-xs" href="/discuss/topic/shu-ju-jie-gou/">数据结构</a><a class="no-underline truncate bg-sd-accent text-sd-muted-foreground hover:text-sd-foreground dark:hover:text-sd-foreground items-center rounded-full px-2 py-1 text-xs" href="/discuss/topic/shu-ju-jie-gou-yu-suan-fa/">数据结构与算法</a><a class="no-underline truncate bg-sd-accent text-sd-muted-foreground hover:text-sd-foreground dark:hover:text-sd-foreground items-center rounded-full px-2 py-1 text-xs" href="/discuss/topic/monotonic-queue/">单调队列</a><a class="no-underline truncate bg-sd-accent text-sd-muted-foreground hover:text-sd-foreground dark:hover:text-sd-foreground items-center rounded-full px-2 py-1 text-xs" href="/discuss/topic/monotonic-stack/">单调栈</a><a class="no-underline truncate bg-sd-accent text-sd-muted-foreground hover:text-sd-foreground dark:hover:text-sd-foreground items-center rounded-full px-2 py-1 text-xs" href="/discuss/topic/shuang-zhou-sai/">双周赛</a><a class="no-underline truncate bg-sd-accent text-sd-muted-foreground hover:text-sd-foreground dark:hover:text-sd-foreground items-center rounded-full px-2 py-1 text-xs" href="/discuss/topic/probability-and-statistics/">概率与统计</a><a class="no-underline truncate bg-sd-accent text-sd-muted-foreground hover:text-sd-foreground dark:hover:text-sd-foreground items-center rounded-full px-2 py-1 text-xs" href="/discuss/topic/study-sharing/">学习分享</a></div></div></div><div class="relative mt-4 flex w-full flex-none flex-col overflow-auto px-4 pb-8 gap-4"><div class="break-words"><div><div class="mYe_l TAIHK"><h2 id="前言">前言</h2>
<p>掌握动态规划（DP）是没有捷径的，咱们唯一能做的，就是投入时间猛猛刷题。好比学数学，只看书看视频而不做习题，是不能说学会的。</p>
<p>我能做的，是帮你节省找题的时间，并把这些题分类整理好。有着相同套路的题，一起做效率会更高，也更能领悟到 DP 的精髓。每个小节的题目已按照难度分排序（右侧数字为难度分）。</p>
<p><img src="https://pic.leetcode.cn/1710769845-JRnIfA-dp-2.jpg" alt="动态规划算法题 DP题单 动态规划题单 入门动态规划题目 动态规划新手教程 力扣DP 力扣动态规划 leetcode动态规划 leetcode dp 灵茶山艾府 灵神 灵神题单"/></p>
<p><strong>记忆化搜索</strong>是新手村神器（甚至可以用到游戏后期），推荐先看 <a href="/link/?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1Xj411K7oF%2F" target="_blank">动态规划入门：从记忆化搜索到递推</a>。</p>
<p>但记忆化搜索并不是万能的，某些题目只有写成递推，才能结合数据结构等来优化时间复杂度，多数题目还可以优化空间复杂度。所以尽量在写完记忆化搜索后，把递推的代码也写一下。熟练之后直接写递推也可以。</p>
<h2 id="一入门-dp">一、入门 DP</h2>
<h3 id="11-爬楼梯">§1.1 爬楼梯</h3>
<p><a href="https://leetcode.cn/problems/climbing-stairs/solution/jiao-ni-yi-bu-bu-si-kao-dong-tai-gui-hua-7zm1/" target="_blank">讲解</a></p>
<ul>
<li><a href="https://leetcode.cn/problems/climbing-stairs/" target="_blank">70. 爬楼梯</a></li>
<li><a href="https://leetcode.cn/problems/min-cost-climbing-stairs/" target="_blank">746. 使用最小花费爬楼梯</a> 约 1500</li>
<li><a href="https://leetcode.cn/problems/climbing-stairs-ii/" target="_blank">3693. 爬楼梯 II</a> 1560</li>
<li><a href="https://leetcode.cn/problems/combination-sum-iv/" target="_blank">377. 组合总和 Ⅳ</a> 约 1600</li>
<li><a href="https://leetcode.cn/problems/count-ways-to-build-good-strings/" target="_blank">2466. 统计构造好字符串的方案数</a> 1694</li>
<li><a href="https://leetcode.cn/problems/count-number-of-texts/" target="_blank">2266. 统计打字方案数</a> 1857</li>
<li><a href="https://leetcode.cn/problems/number-of-good-binary-strings/" target="_blank">2533. 好二进制字符串的数量</a>（会员题）同 2466 题</li>
</ul>
<h3 id="12-打家劫舍">§1.2 打家劫舍</h3>
<h4 id="答疑">答疑</h4>
<p><strong>问</strong>：在 1:1 翻译的过程中，如何根据记忆化搜索，确定递推数组（DP 数组）的大小？为什么有时候要开 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">1</span></span></span></span></span> 大小的数组，有时候要开 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">2</span></span></span></span></span> 大小的数组？</p>
<p><strong>答</strong>：看记忆化搜索的参数的范围（最小值和最大值）。例如 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em"></span><span class="mord mathnormal">i</span></span></span></span></span> 最小是 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em"></span><span class="mord">−</span><span class="mord">1</span></span></span></span></span>（递归边界也算），最大是 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">1</span></span></span></span></span>（递归入口），那么一共有 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">1</span></span></span></span></span> 个不同的 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em"></span><span class="mord mathnormal">i</span></span></span></span></span>，就需要开 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">1</span></span></span></span></span> 大小的 DP 数组。如果 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em"></span><span class="mord mathnormal">i</span></span></span></span></span> 最小是 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em"></span><span class="mord">−</span><span class="mord">2</span></span></span></span></span>，最大是 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">1</span></span></span></span></span>，一共有 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">2</span></span></span></span></span> 个不同的 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em"></span><span class="mord mathnormal">i</span></span></span></span></span>，就需要开 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">2</span></span></span></span></span> 大小的 DP 数组。</p>
<ul>
<li><a href="https://leetcode.cn/problems/house-robber/" target="_blank">198. 打家劫舍</a></li>
<li><a href="https://leetcode.cn/problems/house-robber-ii/" target="_blank">213. 打家劫舍 II</a> 环形数组</li>
<li><a href="https://leetcode.cn/problems/count-number-of-ways-to-place-houses/" target="_blank">2320. 统计放置房子的方式数</a> 1608</li>
<li><a href="https://leetcode.cn/problems/delete-and-earn/" target="_blank">740. 删除并获得点数</a></li>
<li><a href="https://leetcode.cn/problems/maximum-total-damage-with-spell-casting/" target="_blank">3186. 施咒的最大总伤害</a> 1841</li>
</ul>
<p><strong>思维扩展</strong>：</p>
<ul>
<li><a href="https://leetcode.cn/problems/solving-questions-with-brainpower/" target="_blank">2140. 解决智力问题</a> 1709</li>
</ul>
<h3 id="13-最大子数组和最大子段和">§1.3 最大子数组和（最大子段和）</h3>
<p>有两种做法：</p>
<ol>
<li data-length="1">定义状态 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span> 表示以 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">a</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span> 结尾的最大子数组和，不和 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em"></span><span class="mord mathnormal">i</span></span></span></span></span> 左边拼起来就是 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">a</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span>，和 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em"></span><span class="mord mathnormal">i</span></span></span></span></span> 左边拼起来就是 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">a</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span>，取最大值就得到了状态转移方程 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mop">max</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord">1</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">0</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">a</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span>，答案为 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mop">max</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mclose">)</span></span></span></span></span>。这个做法也叫做 Kadane 算法。</li>
<li data-length="1">用 <a href="https://leetcode.cn/problems/range-sum-query-immutable/solution/qian-zhui-he-ji-qi-kuo-zhan-fu-ti-dan-py-vaar/" target="_blank">前缀和</a>，转化成 <a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock/" target="_blank">121. 买卖股票的最佳时机</a>。</li>
</ol>
<ul>
<li><a href="https://leetcode.cn/problems/maximum-subarray/" target="_blank">53. 最大子数组和</a> 可以看看我题解中的<strong>思考题</strong></li>
<li><a href="https://leetcode.cn/problems/find-the-substring-with-maximum-cost/" target="_blank">2606. 找到最大开销的子字符串</a> 1422</li>
<li><a href="https://leetcode.cn/problems/maximum-absolute-sum-of-any-subarray/" target="_blank">1749. 任意子数组和的绝对值的最大值</a> 1542</li>
<li><a href="https://leetcode.cn/problems/k-concatenation-maximum-sum/" target="_blank">1191. K 次串联后最大子数组之和</a> 1748</li>
<li><a href="https://leetcode.cn/problems/maximum-sum-circular-subarray/" target="_blank">918. 环形子数组的最大和</a> 1777 环形数组</li>
<li><a href="https://leetcode.cn/problems/maximum-score-of-spliced-array/" target="_blank">2321. 拼接数组的最大分数</a> 1791</li>
</ul>
<p><strong>思维扩展</strong>：</p>
<ul>
<li><a href="https://leetcode.cn/problems/maximum-product-subarray/" target="_blank">152. 乘积最大子数组</a></li>
<li><a href="https://leetcode.cn/problems/maximum-subarray-sum-with-one-deletion/" target="_blank">1186. 删除一次得到子数组最大和</a> 1799</li>
<li><a href="https://leetcode.cn/problems/maximum-subarray-sum-with-length-divisible-by-k/" target="_blank">3381. 长度可被 K 整除的子数组的最大元素和</a> 1943</li>
</ul>
<h3 id="思考题">思考题</h3>
<p>完成本章后，请思考：什么时候要返回 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">[</span><span class="mord mathnormal">n</span><span class="mclose">]</span></span></span></span></span>，什么时候要返回 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mop">max</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mclose">)</span></span></span></span></span>？</p>
<h2 id="二网格图-dp">二、网格图 DP</h2>
<p>对于一些二维 DP（例如背包、最长公共子序列），如果把 DP 矩阵画出来，其实状态转移可以视作<strong>在网格图上的移动</strong>。所以在学习相对更抽象的二维 DP 之前，做一些形象的网格图 DP 会让后续的学习更轻松（比如 0-1 背包的空间优化写法为什么要倒序遍历）。</p>
<p><a href="https://leetcode.cn/problems/minimum-path-sum/solutions/3045828/jiao-ni-yi-bu-bu-si-kao-dpcong-ji-yi-hua-zfb2/" target="_blank">讲解</a></p>
<h3 id="21-基础">§2.1 基础</h3>
<ul>
<li><a href="https://leetcode.cn/problems/minimum-path-sum/" target="_blank">64. 最小路径和</a></li>
<li><a href="https://leetcode.cn/problems/unique-paths/" target="_blank">62. 不同路径</a></li>
<li><a href="https://leetcode.cn/problems/unique-paths-ii/" target="_blank">63. 不同路径 II</a></li>
<li><a href="https://leetcode.cn/problems/triangle/" target="_blank">120. 三角形最小路径和</a></li>
<li><a href="https://leetcode.cn/problems/count-paths-with-the-given-xor-value/" target="_blank">3393. 统计异或值为给定值的路径数目</a> 1573</li>
<li><a href="https://leetcode.cn/problems/minimum-falling-path-sum/" target="_blank">931. 下降路径最小和</a> 1573</li>
<li><a href="https://leetcode.cn/problems/maximum-number-of-moves-in-a-grid/" target="_blank">2684. 矩阵中移动的最大次数</a> 1626</li>
<li><a href="https://leetcode.cn/problems/minimum-cost-path-with-alternating-directions-ii/" target="_blank">3603. 交替方向的最小路径代价 II</a> 1639</li>
<li><a href="https://leetcode.cn/problems/minimum-path-cost-in-a-grid/" target="_blank">2304. 网格中的最小路径代价</a> 1658</li>
<li><a href="https://leetcode.cn/problems/minimum-falling-path-sum-ii/" target="_blank">1289. 下降路径最小和 II</a> 1697</li>
<li><a href="https://leetcode.cn/problems/maximum-amount-of-money-robot-can-earn/" target="_blank">3418. 机器人可以获得的最大金币数</a> 1798</li>
<li><a href="https://leetcode.cn/problems/maximum-path-score-in-a-grid/" target="_blank">3742. 网格中得分最大的路径</a> 1804</li>
</ul>
<p><strong>思维扩展</strong>：</p>
<ul>
<li><a href="https://leetcode.cn/problems/minimum-sideway-jumps/" target="_blank">1824. 最少侧跳次数</a> 1778</li>
</ul>
<h3 id="22-进阶">§2.2 进阶</h3>
<ul>
<li><a href="https://leetcode.cn/problems/maximum-non-negative-product-in-a-matrix/" target="_blank">1594. 矩阵的最大非负积</a> 1807</li>
<li><a href="https://leetcode.cn/problems/number-of-paths-with-max-score/" target="_blank">1301. 最大得分的路径数目</a> 1853</li>
<li><a href="https://leetcode.cn/problems/twisted-mirror-path-count/" target="_blank">3665. 统计镜子反射路径数目</a> 1883</li>
<li><a href="https://leetcode.cn/problems/paths-in-matrix-whose-sum-is-divisible-by-k/" target="_blank">2435. 矩阵中和能被 K 整除的路径</a> 1952</li>
<li><a href="https://leetcode.cn/problems/dungeon-game/" target="_blank">174. 地下城游戏</a></li>
<li><a href="https://leetcode.cn/problems/longest-increasing-path-in-a-matrix/" target="_blank">329. 矩阵中的最长递增路径</a></li>
<li><a href="https://leetcode.cn/problems/number-of-increasing-paths-in-a-grid/" target="_blank">2328. 网格图中递增路径的数目</a> 2001</li>
<li><a href="https://leetcode.cn/problems/check-if-there-is-a-valid-parentheses-string-path/" target="_blank">2267. 检查是否有合法括号字符串路径</a> 2085</li>
<li><a href="https://leetcode.cn/problems/maximum-number-of-points-with-cost/" target="_blank">1937. 扣分后的最大得分</a> 2106</li>
<li><a href="https://leetcode.cn/problems/find-the-maximum-number-of-fruits-collected/" target="_blank">3363. 最多可收集的水果数目</a> 实际难度 2200</li>
<li><a href="https://leetcode.cn/problems/cherry-pickup-ii/" target="_blank">1463. 摘樱桃 II</a></li>
<li><a href="https://leetcode.cn/problems/cherry-pickup/" target="_blank">741. 摘樱桃</a></li>
<li><a href="https://leetcode.cn/problems/length-of-longest-v-shaped-diagonal-segment/" target="_blank">3459. 最长 V 形对角线段的长度</a> 2337 状态设计</li>
<li><a href="https://leetcode.cn/problems/check-if-there-is-a-path-with-equal-number-of-0s-and-1s/" target="_blank">2510. 检查是否有路径经过相同数量的 0 和 1</a>（会员题）</li>
</ul>
<h2 id="三背包">三、背包</h2>
<p>讲解：<a href="/link/?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV16Y411v7Y6%2F" target="_blank">0-1 背包 完全背包【基础算法精讲 18】</a></p>
<h3 id="31-0-1-背包">§3.1 0-1 背包</h3>
<p>每个物品只能选一次，即要么选，要么不选。</p>
<p>所以 0-1 背包是「选或不选」的代表。关于「枚举选哪个」的代表，见本题单的「§4.2 最长递增子序列」。</p>
<ul>
<li><a href="https://leetcode.cn/problems/partition-equal-subset-sum/" target="_blank">416. 分割等和子集</a></li>
<li><a href="https://leetcode.cn/problems/target-sum/" target="_blank">494. 目标和</a></li>
<li><a href="https://leetcode.cn/problems/length-of-the-longest-subsequence-that-sums-to-target/" target="_blank">2915. 和为目标值的最长子序列的长度</a> 1659</li>
<li><a href="https://leetcode.cn/problems/ways-to-express-an-integer-as-sum-of-powers/" target="_blank">2787. 将一个数字表示成幂的和的方案数</a> 1818</li>
<li><a href="https://leetcode.cn/problems/maximum-total-reward-using-operations-i/" target="_blank">3180. 执行操作可获得的最大总奖励 I</a> 1849</li>
</ul>
<p><strong>进阶</strong>：</p>
<ul>
<li><a href="https://leetcode.cn/problems/ones-and-zeroes/" target="_blank">474. 一和零</a> 二维背包</li>
<li><a href="https://leetcode.cn/problems/zero-array-transformation-iv/" target="_blank">3489. 零数组变换 IV</a> 2068</li>
<li><a href="https://leetcode.cn/problems/subsequence-sum-after-capping-elements/" target="_blank">3685. 含上限元素的子序列和</a> 2073</li>
<li><a href="https://leetcode.cn/problems/last-stone-weight-ii/" target="_blank">1049. 最后一块石头的重量 II</a> 2092</li>
<li><a href="https://leetcode.cn/problems/closest-dessert-cost/" target="_blank">1774. 最接近目标价格的甜点成本</a></li>
<li><a href="https://leetcode.cn/problems/profitable-schemes/" target="_blank">879. 盈利计划</a> 2204</li>
<li><a href="https://leetcode.cn/problems/find-the-sum-of-the-power-of-all-subsequences/" target="_blank">3082. 求出所有子序列的能量和</a> 2242</li>
<li><a href="https://leetcode.cn/problems/tallest-billboard/" target="_blank">956. 最高的广告牌</a> 2381</li>
<li><a href="https://leetcode.cn/problems/number-of-great-partitions/" target="_blank">2518. 好分区的数目</a> 2415</li>
<li><a href="https://leetcode.cn/problems/painting-the-walls/" target="_blank">2742. 给墙壁刷油漆</a> 2425 至少装满</li>
<li><a href="https://leetcode.cn/problems/find-the-maximum-sequence-value-of-array/" target="_blank">3287. 求出数组中最大序列值</a> 2545</li>
<li><a href="https://leetcode.cn/problems/maximum-total-reward-using-operations-ii/" target="_blank">3181. 执行操作可获得的最大总奖励 II</a> 2688 bitset 优化</li>
<li><a href="https://leetcode.cn/problems/oPs9Bm/" target="_blank">LCP 47. 入场安检</a></li>
<li><a href="https://leetcode.cn/problems/maximum-profit-from-trading-stocks/" target="_blank">2291. 最大股票收益</a>（会员题）</li>
<li><a href="https://leetcode.cn/problems/maximize-total-tastiness-of-purchased-fruits/" target="_blank">2431. 最大限度地提高购买水果的口味</a>（会员题）</li>
<li><a href="https://leetcode.cn/problems/maximum-weight-in-two-bags/" target="_blank">3647. 两个袋子中的最大重量</a>（会员题）多背包</li>
<li><a href="https://leetcode.cn/problems/number-of-ways-to-build-house-of-cards/" target="_blank">2189. 建造纸牌屋的方法数</a>（会员题）</li>
</ul>
<h3 id="32-完全背包">§3.2 完全背包</h3>
<p>物品可以重复选，无个数限制。</p>
<ul>
<li><a href="https://leetcode.cn/problems/coin-change/" target="_blank">322. 零钱兑换</a></li>
<li><a href="https://leetcode.cn/problems/coin-change-ii/" target="_blank">518. 零钱兑换 II</a></li>
<li><a href="https://leetcode.cn/problems/perfect-squares/" target="_blank">279. 完全平方数</a></li>
<li><a href="https://leetcode.cn/problems/minimum-number-of-primes-to-sum-to-target/" target="_blank">3610. 目标和所需的最小质数个数</a>（会员题）</li>
<li><a href="https://leetcode.cn/problems/the-number-of-ways-to-make-the-sum/" target="_blank">3183. 达到总和的方法数量</a>（会员题）混合背包</li>
</ul>
<p><strong>思维扩展</strong>：</p>
<ul>
<li><a href="https://leetcode.cn/problems/inverse-coin-change/" target="_blank">3592. 硬币面值还原</a> 1701</li>
<li><a href="https://leetcode.cn/problems/form-largest-integer-with-digits-that-add-up-to-target/" target="_blank">1449. 数位成本和为目标值的最大数字</a> 1927</li>
</ul>
<h3 id="33-多重背包选做">§3.3 多重背包（选做）</h3>
<p>物品可以重复选，有个数限制。</p>
<p><strong>求方案数</strong></p>
<p>注意求方案数的题目不能用二进制优化。比如从 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">6</span></span></span></span></span> 个相同物品中选 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">3</span></span></span></span></span> 个，只有一种选法。但按照二进制优化，会把 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">6</span></span></span></span></span> 分解为 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">3</span></span></span></span></span>，有 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">2</span></span></span></span></span> 和 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">3</span></span></span></span></span> 两种选法。</p>
<p>如果要优化，可以考虑用 <a href="https://leetcode.cn/problems/count-of-sub-multisets-with-bounded-sum/solutions/2482876/duo-zhong-bei-bao-fang-an-shu-cong-po-su-f5ay/" target="_blank">同余前缀和</a> 优化。</p>
<ul>
<li><a href="https://leetcode.cn/problems/number-of-ways-to-earn-points/" target="_blank">2585. 获得分数的方法数</a> 1910</li>
<li><a href="https://leetcode.cn/problems/find-the-original-typed-string-ii/" target="_blank">3333. 找到初始输入字符串 II</a> 2629</li>
<li><a href="https://leetcode.cn/problems/count-of-sub-multisets-with-bounded-sum/" target="_blank">2902. 和带限制的子多重集合的数目</a> 2759</li>
</ul>
<p><strong>二进制优化</strong></p>
<ul>
<li><a href="https://leetcode.cn/problems/zero-array-transformation-iv/" target="_blank">3489. 零数组变换 IV</a></li>
</ul>
<h3 id="34-分组背包">§3.4 分组背包</h3>
<p>同一组内的物品至多/恰好选一个。</p>
<ul>
<li><a href="https://leetcode.cn/problems/number-of-dice-rolls-with-target-sum/" target="_blank">1155. 掷骰子等于目标和的方法数</a> 1654</li>
<li><a href="https://leetcode.cn/problems/minimize-the-difference-between-target-and-chosen-elements/" target="_blank">1981. 最小化目标值与所选元素的差</a> 2010</li>
<li><a href="https://leetcode.cn/problems/maximum-value-of-k-coins-from-piles/" target="_blank">2218. 从栈中取出 K 个硬币的最大面值和</a> 2158</li>
</ul>
<h3 id="35-树形背包选做">§3.5 树形背包（选做）</h3>
<p>也叫树上背包、依赖背包等。</p>
<blockquote>
<p>注：目前力扣只有无依赖的背包，时间复杂度为 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em"></span><span class="mord mathcal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>。如果有依赖，可以优化到 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathcal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em">nW</span><span class="mclose">)</span></span></span></span></span>。</p>
</blockquote>
<ul>
<li><a href="https://leetcode.cn/problems/maximum-profit-from-trading-stocks-with-discounts/" target="_blank">3562. 折扣价交易股票的最大利润</a> 2458</li>
</ul>
<h2 id="四经典线性-dp">四、经典线性 DP</h2>
<h3 id="41-最长公共子序列lcs">§4.1 最长公共子序列（LCS）</h3>
<p>讲解：<a href="/link/?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1TM4y1o7ug%2F" target="_blank">最长公共子序列 编辑距离【基础算法精讲 19】</a></p>
<p>一般定义 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em">j</span><span class="mclose">]</span></span></span></span></span> 表示对 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mopen">[</span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">t</span><span class="mopen">[</span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.05724em">j</span><span class="mclose">])</span></span></span></span></span> 的求解结果。</p>
<h4 id="411-基础">§4.1.1 基础</h4>
<ul>
<li><a href="https://leetcode.cn/problems/longest-common-subsequence/" target="_blank">1143. 最长公共子序列</a></li>
<li><a href="https://leetcode.cn/problems/delete-operation-for-two-strings/" target="_blank">583. 两个字符串的删除操作</a></li>
<li><a href="https://leetcode.cn/problems/minimum-ascii-delete-sum-for-two-strings/" target="_blank">712. 两个字符串的最小 ASCII 删除和</a></li>
<li><a href="https://leetcode.cn/problems/edit-distance/" target="_blank">72. 编辑距离</a></li>
<li><a href="https://leetcode.cn/problems/uncrossed-lines/" target="_blank">1035. 不相交的线</a> 1806</li>
<li><a href="https://leetcode.cn/problems/max-dot-product-of-two-subsequences/" target="_blank">1458. 两个子序列的最大点积</a> 1824</li>
</ul>
<p><strong>思维扩展</strong>：</p>
<ul>
<li><a href="https://leetcode.cn/problems/maximum-length-of-repeated-subarray/" target="_blank">718. 最长重复子数组</a></li>
</ul>
<h4 id="412-进阶">§4.1.2 进阶</h4>
<ul>
<li><a href="https://leetcode.cn/problems/maximum-multiplication-score/" target="_blank">3290. 最高乘法得分</a> 1692</li>
<li><a href="https://leetcode.cn/problems/distinct-subsequences/" target="_blank">115. 不同的子序列</a></li>
<li><a href="https://leetcode.cn/problems/maximum-number-of-subsequences-after-one-inserting/" target="_blank">3628. 插入一个字母的最大子序列数</a> 1754</li>
<li><a href="https://leetcode.cn/problems/find-maximum-removals-from-source-string/" target="_blank">3316. 从原字符串里进行删除操作的最多次数</a> 2062</li>
<li><a href="https://leetcode.cn/problems/number-of-ways-to-form-a-target-string-given-a-dictionary/" target="_blank">1639. 通过给定词典构造目标字符串的方案数</a> 2082</li>
<li><a href="https://leetcode.cn/problems/interleaving-string/" target="_blank">97. 交错字符串</a></li>
<li><a href="https://leetcode.cn/problems/shortest-common-supersequence/" target="_blank">1092. 最短公共超序列</a></li>
<li><a href="https://leetcode.cn/problems/wildcard-matching/" target="_blank">44. 通配符匹配</a></li>
<li><a href="https://leetcode.cn/problems/regular-expression-matching/" target="_blank">10. 正则表达式匹配</a></li>
</ul>
<p><strong>思考题</strong>：</p>
<p>115 题的扩展。给定字符串 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">s</span></span></span></span></span> 和 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em"></span><span class="mord mathnormal">t</span></span></span></span></span>，你可以在 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">s</span></span></span></span></span> 的任意位置插入一个字母，插入后，<span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">s</span></span></span></span></span> 最多有多少个子序列等于 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em"></span><span class="mord mathnormal">t</span></span></span></span></span>？</p>
<p>思路和代码见 <a href="https://leetcode.cn/problems/maximize-number-of-subsequences-in-a-string/solutions/1352039/by-endlesscheng-yfyf/comments/2389140" target="_blank">评论</a>。</p>
<h3 id="42-最长递增子序列lis">§4.2 最长递增子序列（LIS）</h3>
<p>讲解：<a href="/link/?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1ub411Q7sB%2F" target="_blank">最长递增子序列【基础算法精讲 20】</a></p>
<p>做法有很多：</p>
<ol>
<li data-length="1">枚举选哪个。（见讲解）</li>
<li data-length="1">二分。（见讲解）</li>
<li data-length="1">计算 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">a</span></span></span></span></span> 和把 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">a</span></span></span></span></span> 排序后的数组 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord text"><span class="mord textit">sortedA</span></span></span></span></span></span> 的最长公共子序列。（用 LCS 求 LIS）</li>
<li data-length="1">数据结构优化。（见 <a href="https://leetcode.cn/problems/longest-increasing-subsequence-ii/" target="_blank">2407 题</a>）</li>
</ol>
<h4 id="421-基础">§4.2.1 基础</h4>
<ul>
<li><a href="https://leetcode.cn/problems/longest-increasing-subsequence/" target="_blank">300. 最长递增子序列</a></li>
<li><a href="https://leetcode.cn/problems/increasing-triplet-subsequence/" target="_blank">334. 递增的三元子序列</a></li>
<li><a href="https://leetcode.cn/problems/sorting-three-groups/" target="_blank">2826. 将三个组排序</a> 1721</li>
<li><a href="https://leetcode.cn/problems/minimum-number-of-removals-to-make-mountain-array/" target="_blank">1671. 得到山形数组的最少删除次数</a> 1913</li>
<li><a href="https://leetcode.cn/problems/find-the-longest-valid-obstacle-course-at-each-position/" target="_blank">1964. 找出到每个位置为止最长的有效障碍赛跑路线</a> 1933</li>
<li><a href="https://leetcode.cn/problems/minimum-operations-to-make-the-array-k-increasing/" target="_blank">2111. 使数组 K 递增的最少操作次数</a> 1941 包含进阶问题</li>
</ul>
<h4 id="422-进阶">§4.2.2 进阶</h4>
<ul>
<li><a href="https://leetcode.cn/problems/russian-doll-envelopes/" target="_blank">354. 俄罗斯套娃信封问题</a></li>
<li><a href="https://leetcode.cn/problems/best-team-with-no-conflicts/" target="_blank">1626. 无矛盾的最佳球队</a> 2027</li>
<li><a href="https://leetcode.cn/problems/maximum-height-by-stacking-cuboids/" target="_blank">1691. 堆叠长方体的最大高度</a> 2172</li>
<li><a href="https://leetcode.cn/problems/delete-columns-to-make-sorted-iii/" target="_blank">960. 删列造序 III</a> 2247</li>
<li><a href="https://leetcode.cn/problems/longest-increasing-subsequence-ii/" target="_blank">2407. 最长递增子序列 II</a> 2280</li>
<li><a href="https://leetcode.cn/problems/number-of-longest-increasing-subsequence/" target="_blank">673. 最长递增子序列的个数</a></li>
<li><a href="https://leetcode.cn/problems/make-array-strictly-increasing/" target="_blank">1187. 使数组严格递增</a> 2316</li>
<li><a href="https://leetcode.cn/problems/minimum-operations-to-make-a-subsequence/" target="_blank">1713. 得到子序列的最少操作次数</a> 2351 用 LIS 求 LCS</li>
<li><a href="https://leetcode.cn/problems/length-of-the-longest-increasing-path/" target="_blank">3288. 最长上升路径的长度</a> 2450</li>
</ul>
<p><strong>思维扩展</strong>：</p>
<ul>
<li><a href="https://leetcode.cn/problems/largest-divisible-subset/" target="_blank">368. 最大整除子集</a> 约 1800</li>
<li><a href="https://leetcode.cn/problems/longest-unequal-adjacent-groups-subsequence-ii/" target="_blank">2901. 最长相邻不相等子序列 II</a> 1899</li>
</ul>
<p><strong>思考题</strong>：</p>
<p>给定整数 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal" style="margin-right:0.03148em">k</span></span></span></span></span>，构造一个数组 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">a</span></span></span></span></span>，使得 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">a</span></span></span></span></span> 恰好有 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal" style="margin-right:0.03148em">k</span></span></span></span></span> 个最长递增子序列。</p>
<p><a href="https://leetcode.cn/problems/number-of-longest-increasing-subsequence/description/comments/2218054" target="_blank">解答（评论）</a></p>
<h2 id="五划分型-dp">五、划分型 DP</h2>
<h3 id="51-判定能否划分">§5.1 判定能否划分</h3>
<p>一般定义 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span> 表示长为 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em"></span><span class="mord mathnormal">i</span></span></span></span></span> 的前缀 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">a</span><span class="mopen">[</span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span> 能否划分。</p>
<p>枚举最后一个子数组的左端点 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal">L</span></span></span></span></span>，从 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">[</span><span class="mord mathnormal">L</span><span class="mclose">]</span></span></span></span></span> 转移到 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span>，并考虑 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">a</span><span class="mopen">[</span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span> 是否满足要求。</p>
<ul>
<li><a href="https://leetcode.cn/problems/check-if-there-is-a-valid-partition-for-the-array/" target="_blank">2369. 检查数组是否存在有效划分</a> 1780</li>
<li><a href="https://leetcode.cn/problems/word-break/" target="_blank">139. 单词拆分</a></li>
</ul>
<h3 id="52-最优划分">§5.2 最优划分</h3>
<p>计算最少（最多）可以划分出多少段、最优划分得分等。</p>
<p>一般定义 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span> 表示长为 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em"></span><span class="mord mathnormal">i</span></span></span></span></span> 的前缀 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">a</span><span class="mopen">[</span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span> 在题目约束下，分割出的最少（最多）子数组个数（或者定义成分割方案数）。</p>
<p>枚举最后一个子数组的左端点 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal">L</span></span></span></span></span>，从 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">[</span><span class="mord mathnormal">L</span><span class="mclose">]</span></span></span></span></span> 转移到 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span>，并考虑 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">a</span><span class="mopen">[</span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span> 对最优解的影响。</p>
<ul>
<li><a href="https://leetcode.cn/problems/palindrome-partitioning-ii/" target="_blank">132. 分割回文串 II</a></li>
<li><a href="https://leetcode.cn/problems/extra-characters-in-a-string/" target="_blank">2707. 字符串中的额外字符</a> 1736</li>
<li><a href="https://leetcode.cn/problems/maximize-total-cost-of-alternating-subarrays/" target="_blank">3196. 最大化子数组的总成本</a> 1847 也有状态机 DP 做法</li>
<li><a href="https://leetcode.cn/problems/partition-string-into-minimum-beautiful-substrings/" target="_blank">2767. 将字符串分割为最少的美丽子字符串</a> 1865</li>
<li><a href="https://leetcode.cn/problems/decode-ways/" target="_blank">91. 解码方法</a></li>
<li><a href="https://leetcode.cn/problems/decode-ways-ii/" target="_blank">639. 解码方法 II</a></li>
<li><a href="https://leetcode.cn/problems/ba-shu-zi-fan-yi-cheng-zi-fu-chuan-lcof/" target="_blank">LCR 165. 解密数字</a></li>
<li><a href="https://leetcode.cn/problems/partition-array-for-maximum-sum/" target="_blank">1043. 分隔数组以得到最大和</a> 1916</li>
<li><a href="https://leetcode.cn/problems/minimum-substring-partition-of-equal-character-frequency/" target="_blank">3144. 分割字符频率相等的最少子字符串</a> 1917</li>
<li><a href="https://leetcode.cn/problems/restore-the-array/" target="_blank">1416. 恢复数组</a> 1920</li>
<li><a href="https://leetcode.cn/problems/maximum-number-of-non-overlapping-palindrome-substrings/" target="_blank">2472. 不重叠回文子字符串的最大数目</a> 2013</li>
<li><a href="https://leetcode.cn/problems/filling-bookcase-shelves/" target="_blank">1105. 填充书架</a> 2014</li>
<li><a href="https://leetcode.cn/problems/minimum-cost-to-split-an-array/" target="_blank">2547. 拆分数组的最小代价</a> 2020</li>
<li><a href="https://leetcode.cn/problems/count-partitions-with-max-min-difference-at-most-k/" target="_blank">3578. 统计极差最大为 K 的分割方式数</a> 2033 优化</li>
<li><a href="https://leetcode.cn/problems/maximum-deletions-on-a-string/" target="_blank">2430. 对字母串可执行的最大删除数</a> 2102</li>
<li><a href="https://leetcode.cn/problems/minimum-total-distance-traveled/" target="_blank">2463. 最小移动总距离</a> 2454</li>
<li><a href="https://leetcode.cn/problems/minimum-steps-to-convert-string-with-operations/" target="_blank">3579. 字符串转换需要的最小操作数</a> 2493 可以做到 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em"></span><span class="mord mathcal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></li>
<li><a href="https://leetcode.cn/problems/minimum-cost-to-divide-array-into-subarrays/" target="_blank">3500. 将数组分割为子数组的最小代价</a> 2569 式子变形</li>
<li><a href="https://leetcode.cn/problems/minimum-cost-to-convert-string-ii/" target="_blank">2977. 转换字符串的最小成本 II</a> 2696</li>
<li><a href="https://leetcode.cn/problems/minimum-cost-good-caption/" target="_blank">3441. 变成好标题的最少代价</a> 2765</li>
<li><a href="https://leetcode.cn/problems/minimum-cost-to-separate-sentence-into-rows/" target="_blank">2052. 将句子分隔成行的最低成本</a>（会员题）</li>
<li><a href="https://leetcode.cn/problems/minimum-subarrays-in-a-valid-split/" target="_blank">2464. 有效分割中的最少子数组数目</a>（会员题）</li>
</ul>
<h3 id="53-约束划分个数">§5.3 约束划分个数</h3>
<p>将数组分成（恰好/至多）<span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal" style="margin-right:0.03148em">k</span></span></span></span></span> 个连续子数组，计算与这些子数组有关的最优值。</p>
<p>一般定义 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em">j</span><span class="mclose">]</span></span></span></span></span> 表示将长为 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em"></span><span class="mord mathnormal" style="margin-right:0.05724em">j</span></span></span></span></span> 的前缀 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">a</span><span class="mopen">[</span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.05724em">j</span><span class="mclose">]</span></span></span></span></span> 分成 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em"></span><span class="mord mathnormal">i</span></span></span></span></span> 个连续子数组所得到的最优解。</p>
<p>枚举最后一个子数组的左端点 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal">L</span></span></span></span></span>，从 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord">1</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal">L</span><span class="mclose">]</span></span></span></span></span> 转移到 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em">j</span><span class="mclose">]</span></span></span></span></span>，并考虑 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">a</span><span class="mopen">[</span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.05724em">j</span><span class="mclose">]</span></span></span></span></span> 对最优解的影响。</p>
<blockquote>
<p>注：对于恰好型划分 DP，可以通过控制内层循环的上下界，把时间复杂度从 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathcal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03148em">nk</span><span class="mclose">)</span></span></span></span></span> 优化至 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathcal" style="margin-right:0.02778em">O</span><span class="mopen">((</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.03148em">k</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.03148em">k</span><span class="mclose">)</span></span></span></span></span>。例如 3473 题。</p>
</blockquote>
<ul>
<li><a href="https://leetcode.cn/problems/largest-sum-of-averages/" target="_blank">813. 最大平均值和的分组</a> 1937</li>
<li><a href="https://leetcode.cn/problems/partition-array-to-minimize-xor/" target="_blank">3599. 划分数组得到最小 XOR</a> 1955 做法不止一种</li>
<li><a href="https://leetcode.cn/problems/split-array-largest-sum/" target="_blank">410. 分割数组的最大值</a></li>
<li><a href="https://leetcode.cn/problems/palindrome-partitioning-iii/" target="_blank">1278. 分割回文串 III</a> 1979</li>
<li><a href="https://leetcode.cn/problems/palindrome-partitioning-iv/" target="_blank">1745. 分割回文串 IV</a></li>
<li><a href="https://leetcode.cn/problems/minimum-difficulty-of-a-job-schedule/" target="_blank">1335. 工作计划的最低难度</a> 2035</li>
<li><a href="https://leetcode.cn/problems/paint-house-iii/" target="_blank">1473. 粉刷房子 III</a> 2056</li>
<li><a href="https://leetcode.cn/problems/minimum-white-tiles-after-covering-with-carpets/" target="_blank">2209. 用地毯覆盖后的最少白色砖块</a> 2106</li>
<li><a href="https://leetcode.cn/problems/allocate-mailboxes/" target="_blank">1478. 安排邮筒</a> 2190</li>
<li><a href="https://leetcode.cn/problems/sum-of-k-subarrays-with-length-at-least-m/" target="_blank">3473. 长度至少为 M 的 K 个子数组之和</a> 2274 优化</li>
<li><a href="https://leetcode.cn/problems/minimum-total-space-wasted-with-k-resizing-operations/" target="_blank">1959. K 次调整数组大小浪费的最小总空间</a> 2310</li>
<li><a href="https://leetcode.cn/problems/number-of-beautiful-partitions/" target="_blank">2478. 完美分割的方案数</a> 2344</li>
<li><a href="https://leetcode.cn/problems/merge-operations-for-minimum-travel-time/" target="_blank">3538. 合并得到最小旅行时间</a> 2461 相邻相关</li>
<li><a href="https://leetcode.cn/problems/minimum-operations-to-make-elements-within-k-subarrays-equal/" target="_blank">3505. 使 K 个子数组内元素相等的最少操作数</a> 2539</li>
<li><a href="https://leetcode.cn/problems/maximum-strength-of-k-disjoint-subarrays/" target="_blank">3077. K 个不相交子数组的最大能量值</a> 2557 优化</li>
<li><a href="https://leetcode.cn/problems/minimum-changes-to-make-k-semi-palindromes/" target="_blank">2911. 得到 K 个半回文串的最少修改次数</a> 2608</li>
<li><a href="https://leetcode.cn/problems/minimum-sum-of-values-by-dividing-array/" target="_blank">3117. 划分数组得到最小的值之和</a> 2735</li>
</ul>
<h2 id="六状态机-dp">六、状态机 DP</h2>
<p>一般定义 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em">j</span><span class="mclose">]</span></span></span></span></span> 表示前缀 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">a</span><span class="mopen">[</span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span> 在状态 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em"></span><span class="mord mathnormal" style="margin-right:0.05724em">j</span></span></span></span></span> 下的最优值。<span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em"></span><span class="mord mathnormal" style="margin-right:0.05724em">j</span></span></span></span></span> 一般很小。</p>
<h3 id="61-买卖股票">§6.1 买卖股票</h3>
<p><a href="/link/?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1ho4y1W7QK%2F" target="_blank">讲解【基础算法精讲 21】</a></p>
<ul>
<li><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock/" target="_blank">121. 买卖股票的最佳时机</a> 交易一次</li>
<li><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-ii/" target="_blank">122. 买卖股票的最佳时机 II</a> 交易次数不限</li>
<li><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iii/" target="_blank">123. 买卖股票的最佳时机 III</a> 交易两次</li>
<li><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iv/" target="_blank">188. 买卖股票的最佳时机 IV</a> 交易 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal" style="margin-right:0.03148em">k</span></span></span></span></span> 次</li>
<li><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-v/" target="_blank">3573. 买卖股票的最佳时机 V</a> 交易 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal" style="margin-right:0.03148em">k</span></span></span></span></span> 次 1777</li>
<li><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-cooldown/" target="_blank">309. 买卖股票的最佳时机含冷冻期</a> 交易次数不限</li>
<li><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-transaction-fee/" target="_blank">714. 买卖股票的最佳时机含手续费</a> 交易次数不限</li>
</ul>
<h3 id="62-基础">§6.2 基础</h3>
<ul>
<li><a href="https://leetcode.cn/problems/maximum-energy-boost-from-two-drinks/" target="_blank">3259. 超级饮料的最大强化能量</a> 1484</li>
<li><a href="https://leetcode.cn/problems/number-of-ways-to-select-buildings/" target="_blank">2222. 选择建筑的方案数</a> 1657</li>
<li><a href="https://leetcode.cn/problems/maximum-strength-of-a-group/" target="_blank">2708. 一个小组的最大实力值</a> 做到 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathcal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span> 时间（联系 152 题）</li>
<li><a href="https://leetcode.cn/problems/maximum-length-of-subarray-with-positive-product/" target="_blank">1567. 乘积为正数的最长子数组长度</a> 1710</li>
<li><a href="https://leetcode.cn/problems/visit-array-positions-to-maximize-score/" target="_blank">2786. 访问数组中的位置使分数最大</a> 1733</li>
<li><a href="https://leetcode.cn/problems/maximum-alternating-subsequence-sum/" target="_blank">1911. 最大交替子序列和</a> 1786</li>
<li><a href="https://leetcode.cn/problems/wiggle-subsequence/" target="_blank">376. 摆动序列</a></li>
<li><a href="https://leetcode.cn/problems/maximum-coin-collection/" target="_blank">3466. 最大硬币收集量</a>（会员题）</li>
</ul>
<h3 id="63-进阶">§6.3 进阶</h3>
<ul>
<li><a href="https://leetcode.cn/problems/maximum-number-of-subsequences-after-one-inserting/" target="_blank">3628. 插入一个字母的最大子序列数</a> 1754</li>
<li><a href="https://leetcode.cn/problems/longest-non-decreasing-subarray-from-two-arrays/" target="_blank">2771. 构造最长非递减子数组</a> 1792</li>
<li><a href="https://leetcode.cn/problems/maximum-subarray-sum-with-one-deletion/" target="_blank">1186. 删除一次得到子数组最大和</a> 1799</li>
<li><a href="https://leetcode.cn/problems/maximum-non-negative-product-in-a-matrix/" target="_blank">1594. 矩阵的最大非负积</a> 1807</li>
<li><a href="https://leetcode.cn/problems/longest-non-decreasing-subarray-after-replacing-at-most-one-element/" target="_blank">3738. 替换至多一个元素后最长非递减子数组</a> 1811</li>
<li><a href="https://leetcode.cn/problems/maximize-total-cost-of-alternating-subarrays/" target="_blank">3196. 最大化子数组的总成本</a> 1847 也有划分型 DP 做法</li>
<li><a href="https://leetcode.cn/problems/knight-dialer/" target="_blank">935. 骑士拨号器</a></li>
<li><a href="https://leetcode.cn/problems/get-the-maximum-score/" target="_blank">1537. 最大得分</a> 1961</li>
<li><a href="https://leetcode.cn/problems/minimum-increment-operations-to-make-array-beautiful/" target="_blank">2919. 使数组变美的最小增量运算数</a> 2031</li>
<li><a href="https://leetcode.cn/problems/minimum-swaps-to-make-sequences-increasing/" target="_blank">801. 使序列递增的最小交换次数</a> 2066</li>
<li><a href="https://leetcode.cn/problems/maximum-frequency-after-subarray-operation/" target="_blank">3434. 子数组操作后的最大频率</a> 2094</li>
<li><a href="https://leetcode.cn/problems/count-number-of-special-subsequences/" target="_blank">1955. 统计特殊子序列的数目</a> 2125</li>
<li><a href="https://leetcode.cn/problems/find-the-maximum-sum-of-node-values/" target="_blank">3068. 最大节点价值之和</a> 2268</li>
<li><a href="https://leetcode.cn/problems/trionic-array-ii/" target="_blank">3640. 三段式数组 II</a> 2278</li>
<li><a href="https://leetcode.cn/problems/substring-with-largest-variance/" target="_blank">2272. 最大波动的子字符串</a> 2516</li>
<li><a href="https://leetcode.cn/problems/maximum-walls-destroyed-by-robots/" target="_blank">3661. 可以被机器人摧毁的最大墙壁数目</a> 2525</li>
<li><a href="https://leetcode.cn/problems/maximize-cyclic-partition-score/" target="_blank">3743. 循环划分的最大得分</a> 3125 环形数组</li>
<li><a href="https://leetcode.cn/problems/UlBDOe/" target="_blank">LCP 19. 秋叶收藏集</a></li>
<li><a href="https://leetcode.cn/problems/paint-fence/" target="_blank">276. 栅栏涂色</a>（会员题）</li>
<li><a href="https://leetcode.cn/problems/maximum-subarray-sum-after-one-operation/" target="_blank">1746. 经过一次操作后的最大子数组和</a>（会员题）</li>
<li><a href="https://leetcode.cn/problems/maximum-alternating-subarray-sum/" target="_blank">2036. 最大交替子数组和</a>（会员题）</li>
<li><a href="https://leetcode.cn/problems/minimum-costs-using-the-train-line/" target="_blank">2361. 乘坐火车路线的最少费用</a>（会员题）</li>
<li><a href="https://leetcode.cn/problems/constructing-two-increasing-arrays/" target="_blank">3269. 构建两个递增数组</a>（会员题）</li>
</ul>
<h2 id="七其他线性-dp">七、其他线性 DP</h2>
<h3 id="71-一维-dp">§7.1 一维 DP</h3>
<p>发生在前缀/后缀之间的转移，例如从 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span></span> 转移到 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span>，或者从 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em">j</span><span class="mclose">]</span></span></span></span></span> 转移到 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span>。</p>
<ul>
<li><a href="https://leetcode.cn/problems/taking-maximum-energy-from-the-mystic-dungeon/" target="_blank">3147. 从魔法师身上吸取的最大能量</a> 1460</li>
<li><a href="https://leetcode.cn/problems/minimum-number-of-coins-for-fruits/" target="_blank">2944. 购买水果需要的最少金币数</a> 1709</li>
<li><a href="https://leetcode.cn/problems/solving-questions-with-brainpower/" target="_blank">2140. 解决智力问题</a> 1709 可以用刷表法</li>
<li><a href="https://leetcode.cn/problems/minimum-cost-for-tickets/" target="_blank">983. 最低票价</a> 1786 有 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathcal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span> 做法</li>
<li><a href="https://leetcode.cn/problems/largest-divisible-subset/" target="_blank">368. 最大整除子集</a> 约 1800</li>
<li><a href="https://leetcode.cn/problems/longest-unequal-adjacent-groups-subsequence-ii/" target="_blank">2901. 最长相邻不相等子序列 II</a> 1899</li>
<li><a href="https://leetcode.cn/problems/2-keys-keyboard/" target="_blank">650. 两个键的键盘</a> 约 2000</li>
<li><a href="https://leetcode.cn/problems/minimum-number-of-refueling-stops/" target="_blank">871. 最低加油次数</a> 2074</li>
<li><a href="https://leetcode.cn/problems/longest-valid-parentheses/" target="_blank">32. 最长有效括号</a></li>
<li><a href="https://leetcode.cn/problems/minimum-time-to-remove-all-cars-containing-illegal-goods/" target="_blank">2167. 移除所有载有违禁货物车厢所需的最少时间</a> 2219</li>
<li><a href="https://leetcode.cn/problems/minimum-time-to-finish-the-race/" target="_blank">2188. 完成比赛的最少时间</a> 2315</li>
<li><a href="https://leetcode.cn/problems/apply-operations-to-make-two-strings-equal/" target="_blank">2896. 执行操作使两个字符串相等</a> 做到 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathcal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></li>
<li><a href="https://leetcode.cn/problems/race-car/" target="_blank">818. 赛车</a> 2392</li>
<li><a href="https://leetcode.cn/problems/minimum-operations-to-make-character-frequencies-equal/" target="_blank">3389. 使字符频率相等的最少操作次数</a> 2940</li>
<li><a href="https://leetcode.cn/problems/maximize-the-distance-between-points-on-a-square/" target="_blank">3464. 正方形上的点之间的最大距离</a></li>
<li><a href="https://leetcode.cn/problems/maximum-array-hopping-score-i/" target="_blank">3205. 最大数组跳跃得分 I</a>（会员题）有 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathcal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span> 做法</li>
<li><a href="https://leetcode.cn/problems/handshakes-that-dont-cross/" target="_blank">1259. 不相交的握手</a>（会员题）</li>
<li><a href="https://leetcode.cn/problems/the-number-of-beautiful-subsets/" target="_blank">2597. 美丽子集的数目</a> 用 DP 解决</li>
<li><a href="https://leetcode.cn/problems/count-the-number-of-k-free-subsets/" target="_blank">2638. 统计 K-Free 子集的总数</a>（会员题）上面这题的加强版</li>
</ul>
<h3 id="72-不相交区间">§7.2 不相交区间</h3>
<ul>
<li><a href="https://leetcode.cn/problems/maximize-the-profit-as-the-salesman/" target="_blank">2830. 销售利润最大化</a> 1851</li>
<li><a href="https://leetcode.cn/problems/maximum-earnings-from-taxi/" target="_blank">2008. 出租车的最大盈利</a> 1872</li>
<li><a href="https://leetcode.cn/problems/two-best-non-overlapping-events/" target="_blank">2054. 两个最好的不重叠活动</a> 1883</li>
<li><a href="https://leetcode.cn/problems/maximum-profit-in-job-scheduling/" target="_blank">1235. 规划兼职工作</a> 2023 做法不止一种</li>
<li><a href="https://leetcode.cn/problems/maximum-number-of-events-that-can-be-attended-ii/" target="_blank">1751. 最多可以参加的会议数目 II</a> 2041</li>
<li><a href="https://leetcode.cn/problems/maximum-score-of-non-overlapping-intervals/" target="_blank">3414. 不重叠区间的最大得分</a> 2723</li>
</ul>
<h3 id="73-子数组-dp">§7.3 子数组 DP</h3>
<ul>
<li><a href="https://leetcode.cn/problems/maximum-subarray/" target="_blank">53. 最大子数组和</a></li>
<li><a href="https://leetcode.cn/problems/maximum-product-subarray/" target="_blank">152. 乘积最大子数组</a></li>
<li><a href="https://leetcode.cn/problems/maximum-subarray-sum-with-one-deletion/" target="_blank">1186. 删除一次得到子数组最大和</a> 1799</li>
<li><a href="https://leetcode.cn/problems/longest-non-decreasing-subarray-after-replacing-at-most-one-element/" target="_blank">3738. 替换至多一个元素后最长非递减子数组</a> 1811</li>
<li><a href="https://leetcode.cn/problems/find-x-value-of-array-i/" target="_blank">3524. 求出数组的 X 值 I</a> 2008 刷表法</li>
<li><a href="https://leetcode.cn/problems/count-substrings-divisible-by-last-digit/" target="_blank">3448. 统计可以被最后一个数位整除的子字符串数目</a> 2387 刷表法</li>
</ul>
<p><strong>思维扩展</strong>：</p>
<ul>
<li><a href="https://leetcode.cn/problems/total-appeal-of-a-string/" target="_blank">2262. 字符串的总引力</a> 2033</li>
<li><a href="https://leetcode.cn/problems/count-unique-characters-of-all-substrings-of-a-given-string/" target="_blank">828. 统计子串中的唯一字符</a> 2034</li>
<li><a href="https://leetcode.cn/problems/unique-substrings-in-wraparound-string/" target="_blank">467. 环绕字符串中唯一的子字符串</a></li>
</ul>
<h3 id="74-合法子序列-dp">§7.4 合法子序列 DP</h3>
<p>计算合法子序列的最长长度、个数、元素和等。</p>
<p>一般定义 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">[</span><span class="mord mathnormal">x</span><span class="mclose">]</span></span></span></span></span> 表示以元素 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">x</span></span></span></span></span> 结尾的合法子序列的最长长度/个数/元素和，从子序列的倒数第二个数转移过来。</p>
<p>注意这里的 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">x</span></span></span></span></span> 不是下标，是元素值。如果 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">x</span></span></span></span></span> 不是整数，或者值域范围很大，可以用哈希表代替数组。</p>
<ul>
<li><a href="https://leetcode.cn/problems/longest-square-streak-in-an-array/" target="_blank">2501. 数组中最长的方波</a> 1480</li>
<li><a href="https://leetcode.cn/problems/longest-arithmetic-subsequence-of-given-difference/" target="_blank">1218. 最长定差子序列</a> 1597</li>
<li><a href="https://leetcode.cn/problems/sorting-three-groups/" target="_blank">2826. 将三个组排序</a> 1721 做法不止一种</li>
<li><a href="https://leetcode.cn/problems/longest-arithmetic-subsequence/" target="_blank">1027. 最长等差数列</a> 1759</li>
<li><a href="https://leetcode.cn/problems/longest-ideal-subsequence/" target="_blank">2370. 最长理想子序列</a> 1835</li>
<li><a href="https://leetcode.cn/problems/length-of-longest-fibonacci-subsequence/" target="_blank">873. 最长的斐波那契子序列的长度</a> 1911</li>
<li><a href="https://leetcode.cn/problems/number-of-stable-subsequences/" target="_blank">3686. 稳定子序列的数量</a> 1969</li>
<li><a href="https://leetcode.cn/problems/find-the-maximum-length-of-valid-subsequence-ii/" target="_blank">3202. 找出有效子序列的最大长度 II</a> 1974</li>
<li><a href="https://leetcode.cn/problems/arithmetic-slices-ii-subsequence/" target="_blank">446. 等差数列划分 II - 子序列</a> 求个数</li>
<li><a href="https://leetcode.cn/problems/sum-of-good-subsequences/" target="_blank">3351. 好子序列的元素之和</a> 2086 求和</li>
<li><a href="https://leetcode.cn/problems/maximize-consecutive-elements-in-an-array-after-modification/" target="_blank">3041. 修改数组后最大化数组中的连续元素数目</a> 2231</li>
<li><a href="https://leetcode.cn/problems/longest-subsequence-with-decreasing-adjacent-difference/" target="_blank">3409. 最长相邻绝对差递减子序列</a> 2500 状态设计</li>
<li><a href="https://leetcode.cn/problems/find-the-sum-of-subsequence-powers/" target="_blank">3098. 求出所有子序列的能量和</a> 2553</li>
<li><a href="https://leetcode.cn/problems/longest-unequal-adjacent-groups-subsequence-ii/" target="_blank">2901. 最长相邻不相等子序列 II</a> 做到线性复杂度</li>
<li><a href="https://leetcode.cn/problems/sum-of-consecutive-subsequences/" target="_blank">3299. 连续子序列的和</a>（会员题）</li>
</ul>
<p><strong>思维扩展</strong>：</p>
<ul>
<li><a href="https://leetcode.cn/problems/longest-string-chain/" target="_blank">1048. 最长字符串链</a> 1599</li>
<li><a href="https://leetcode.cn/problems/distinct-subsequences-ii/" target="_blank">940. 不同的子序列 II</a> 1985</li>
<li><a href="https://leetcode.cn/problems/number-of-unique-good-subsequences/" target="_blank">1987. 不同的好子序列数目</a> 2422 思考方式同 940 题</li>
<li><a href="https://leetcode.cn/problems/count-different-palindromic-subsequences/" target="_blank">730. 统计不同回文子序列</a></li>
</ul>
<h3 id="75-子矩形-dp">§7.5 子矩形 DP</h3>
<ul>
<li><a href="https://leetcode.cn/problems/maximum-difference-score-in-a-grid/" target="_blank">3148. 矩阵中的最大得分</a> 1820</li>
<li><a href="https://leetcode.cn/problems/maximal-square/" target="_blank">221. 最大正方形</a></li>
<li><a href="https://leetcode.cn/problems/count-square-submatrices-with-all-ones/" target="_blank">1277. 统计全为 1 的正方形子矩阵</a></li>
<li><a href="https://leetcode.cn/problems/count-fertile-pyramids-in-a-land/" target="_blank">2088. 统计农场中肥沃金字塔的数目</a> 2105</li>
<li><a href="https://leetcode.cn/problems/find-the-minimum-area-to-cover-all-ones-ii/" target="_blank">3197. 包含所有 1 的最小矩形面积 II</a> 做到 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathcal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal">mn</span><span class="mclose">)</span></span></span></span></span></li>
</ul>
<h3 id="76-多维-dp">§7.6 多维 DP</h3>
<p>不会设计状态？那你可要好好刷这一节了。</p>
<ul>
<li><a href="https://leetcode.cn/problems/number-of-ways-to-select-buildings/" target="_blank">2222. 选择建筑的方案数</a> 1657 把 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">3</span></span></span></span></span> 改成 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal" style="margin-right:0.03148em">k</span></span></span></span></span> 怎么做？</li>
<li><a href="https://leetcode.cn/problems/sorting-three-groups/" target="_blank">2826. 将三个组排序</a> 1721 做法不止一种</li>
<li><a href="https://leetcode.cn/problems/number-of-ways-to-reach-a-position-after-exactly-k-steps/" target="_blank">2400. 恰好移动 k 步到达某一位置的方法数目</a> 1751</li>
<li><a href="https://leetcode.cn/problems/greatest-sum-divisible-by-three/" target="_blank">1262. 可被三整除的最大和</a> 1762</li>
<li><a href="https://leetcode.cn/problems/maximum-points-tourist-can-earn/" target="_blank">3332. 旅客可以得到的最多点数</a> 1828</li>
<li><a href="https://leetcode.cn/problems/find-the-maximum-length-of-a-good-subsequence-i/" target="_blank">3176. 求出最长好子序列 I</a> 1849</li>
<li><a href="https://leetcode.cn/problems/number-of-ways-to-stay-in-the-same-place-after-some-steps/" target="_blank">1269. 停在原地的方案数</a> 1854</li>
<li><a href="https://leetcode.cn/problems/find-the-count-of-monotonic-pairs-i/" target="_blank">3250. 单调数组对的数目 I</a> 1898</li>
<li><a href="https://leetcode.cn/problems/minimum-cost-for-cutting-cake-i/" target="_blank">3218. 切蛋糕的最小总开销 I</a> 也有贪心做法</li>
<li><a href="https://leetcode.cn/problems/minimum-number-of-operations-to-satisfy-conditions/" target="_blank">3122. 使矩阵满足条件的最少操作次数</a> 1905</li>
<li><a href="https://leetcode.cn/problems/out-of-boundary-paths/" target="_blank">576. 出界的路径数</a></li>
<li><a href="https://leetcode.cn/problems/frog-jump/" target="_blank">403. 青蛙过河</a></li>
<li><a href="https://leetcode.cn/problems/count-ways-to-choose-coprime-integers-from-rows/" target="_blank">3725. 统计每一行选择互质整数的方案数</a> 1982</li>
<li><a href="https://leetcode.cn/problems/dice-roll-simulation/" target="_blank">1223. 掷骰子模拟</a> 2008</li>
<li><a href="https://leetcode.cn/problems/minimum-distance-to-type-a-word-using-two-fingers/" target="_blank">1320. 二指输入的的最小距离</a> 2028 状态优化</li>
<li><a href="https://leetcode.cn/problems/minimum-array-sum/" target="_blank">3366. 最小数组和</a> 2040</li>
<li><a href="https://leetcode.cn/problems/count-all-possible-routes/" target="_blank">1575. 统计所有可行路径</a> 2055</li>
<li><a href="https://leetcode.cn/problems/find-number-of-ways-to-reach-the-k-th-stair/" target="_blank">3154. 到达第 K 级台阶的方案数</a> 2071</li>
<li><a href="https://leetcode.cn/problems/number-of-distinct-roll-sequences/" target="_blank">2318. 不同骰子序列的数目</a> 2090</li>
<li><a href="https://leetcode.cn/problems/find-minimum-cost-to-remove-array-elements/" target="_blank">3469. 移除所有数组元素的最小代价</a> 2112 状态设计</li>
<li><a href="https://leetcode.cn/problems/decremental-string-concatenation/" target="_blank">2746. 字符串连接删减字母</a> 2126</li>
<li><a href="https://leetcode.cn/problems/number-of-ways-of-cutting-a-pizza/" target="_blank">1444. 切披萨的方案数</a> 2127</li>
<li><a href="https://leetcode.cn/problems/count-the-number-of-winning-sequences/" target="_blank">3320. 统计能获胜的出招序列数</a> 2153</li>
<li><a href="https://leetcode.cn/problems/paint-house-iv/" target="_blank">3429. 粉刷房子 IV</a> 2166</li>
<li><a href="https://leetcode.cn/problems/apply-operations-to-make-two-strings-equal/" target="_blank">2896. 执行操作使两个字符串相等</a> 2172</li>
<li><a href="https://leetcode.cn/problems/build-array-where-you-can-find-the-maximum-exactly-k-comparisons/" target="_blank">1420. 生成数组</a> 2176</li>
<li><a href="https://leetcode.cn/problems/count-the-number-of-inversions/" target="_blank">3193. 统计逆序对的数目</a> 2266</li>
<li><a href="https://leetcode.cn/problems/letter-tile-possibilities/" target="_blank">1079. 活字印刷</a> 计数 DP，做到 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em"></span><span class="mord mathcal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></li>
<li><a href="https://leetcode.cn/problems/number-of-ways-to-rearrange-sticks-with-k-sticks-visible/" target="_blank">1866. 恰有 K 根木棍可以看到的排列数目</a> 2333</li>
<li><a href="https://leetcode.cn/problems/selling-pieces-of-wood/" target="_blank">2312. 卖木头块</a> 2363</li>
<li><a href="https://leetcode.cn/problems/find-the-maximum-length-of-a-good-subsequence-ii/" target="_blank">3177. 求出最长好子序列 II</a> 2365</li>
<li><a href="https://leetcode.cn/problems/egg-drop-with-2-eggs-and-n-floors/" target="_blank">1884. 鸡蛋掉落-两枚鸡蛋</a></li>
<li><a href="https://leetcode.cn/problems/super-egg-drop/" target="_blank">887. 鸡蛋掉落</a> 2377</li>
<li><a href="https://leetcode.cn/problems/number-of-music-playlists/" target="_blank">920. 播放列表的数量</a> 2400</li>
<li><a href="https://leetcode.cn/problems/freedom-trail/" target="_blank">514. 自由之路</a> 做到 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathcal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal">nm</span><span class="mclose">)</span></span></span></span></span></li>
<li><a href="https://leetcode.cn/problems/find-the-number-of-subsequences-with-equal-gcd/" target="_blank">3336. 最大公约数相等的子序列数量</a> 2403</li>
<li><a href="https://leetcode.cn/problems/pizza-with-3n-slices/" target="_blank">1388. 3n 块披萨</a> 2410</li>
<li><a href="https://leetcode.cn/problems/valid-permutations-for-di-sequence/" target="_blank">903. DI 序列的有效排列</a> 2433</li>
<li><a href="https://leetcode.cn/problems/the-earliest-and-latest-rounds-where-players-compete/" target="_blank">1900. 最佳运动员的比拼回合</a> 2455</li>
<li><a href="https://leetcode.cn/problems/string-compression-ii/" target="_blank">1531. 压缩字符串 II</a> 2576</li>
<li><a href="https://leetcode.cn/problems/minimum-skips-to-arrive-at-meeting-on-time/" target="_blank">1883. 准时抵达会议现场的最小跳过休息次数</a> 2588 避免浮点运算的技巧</li>
<li><a href="https://leetcode.cn/problems/least-operators-to-express-number/" target="_blank">964. 表示数字的最少运算符</a> 2594</li>
<li><a href="https://leetcode.cn/problems/count-number-of-balanced-permutations/" target="_blank">3343. 统计平衡排列的数目</a> 2615 计数 DP</li>
<li><a href="https://leetcode.cn/problems/make-the-xor-of-all-segments-equal-to-zero/" target="_blank">1787. 使所有区间的异或结果为零</a> 2640</li>
<li><a href="https://leetcode.cn/problems/maximum-product-of-subsequences-with-an-alternating-sum-equal-to-k/" target="_blank">3509. 最大化交错和为 K 的子序列乘积</a> 2703</li>
<li><a href="https://leetcode.cn/problems/minimum-cost-good-caption/" target="_blank">3441. 变成好标题的最少代价</a> 2765</li>
<li><a href="https://leetcode.cn/problems/find-sum-of-array-product-of-magical-sequences/" target="_blank">3539. 魔法序列的数组乘积之和</a> 2694 计数 DP</li>
<li><a href="https://leetcode.cn/problems/check-if-an-original-string-exists-given-two-encoded-strings/" target="_blank">2060. 同源字符串检测</a> 2804</li>
<li><a href="https://leetcode.cn/problems/minimum-time-to-make-array-sum-at-most-x/" target="_blank">2809. 使数组和小于等于 x 的最少时间</a> 2979</li>
<li><a href="https://leetcode.cn/problems/maximize-the-number-of-partitions-after-operations/" target="_blank">3003. 执行操作后的最大分割数量</a> 3039 如何分析时间复杂度</li>
<li><a href="https://leetcode.cn/problems/maximum-score-from-grid-operations/" target="_blank">3225. 网格图操作后的最大分数</a> 3028 IOI2022 原题</li>
<li><a href="https://leetcode.cn/problems/ZbAuEH/" target="_blank">LCP 57. 打地鼠</a></li>
<li><a href="https://leetcode.cn/problems/Y1VbOX/" target="_blank">LCP 43. 十字路口的交通</a></li>
<li><a href="https://leetcode.cn/problems/3aqs1c/" target="_blank">LCP 65. 舒适的湿度</a></li>
<li><a href="https://leetcode.cn/problems/Up5XYM/" target="_blank">LCP 36. 最多牌组数</a></li>
<li><a href="https://leetcode.cn/problems/7rLGCR/" target="_blank">LCP 38. 守卫城堡</a></li>
<li><a href="https://leetcode.cn/problems/paint-house/" target="_blank">256. 粉刷房子</a>（会员题）</li>
<li><a href="https://leetcode.cn/problems/paint-house-ii/" target="_blank">265. 粉刷房子 II</a>（会员题）</li>
<li><a href="https://leetcode.cn/problems/find-the-number-of-k-even-arrays/" target="_blank">3339. 查找 K 偶数数组的数量</a>（会员题）</li>
<li><a href="https://leetcode.cn/problems/maximum-vacation-days/" target="_blank">568. 最大休假天数</a>（会员题）</li>
<li><a href="https://leetcode.cn/problems/count-ways-to-distribute-candies/" target="_blank">1692. 计算分配糖果的不同方式</a>（会员题）</li>
<li><a href="https://leetcode.cn/problems/choose-numbers-from-two-arrays-in-range/" target="_blank">2143. 在两个数组的区间中选取数字</a>（会员题）</li>
<li><a href="https://leetcode.cn/problems/constructing-two-increasing-arrays/" target="_blank">3269. 构建两个递增数组</a>（会员题）</li>
</ul>
<p><strong>思维扩展</strong>：</p>
<ul>
<li><a href="https://leetcode.cn/problems/shopping-offers/" target="_blank">638. 大礼包</a></li>
</ul>
<h2 id="八区间-dp">八、区间 DP</h2>
<p>讲解：<a href="/link/?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1Gs4y1E7EU%2F" target="_blank">区间 DP【基础算法精讲 22】</a></p>
<p>从数组的左右两端不断缩短，求解关于某段下标区间的最优值。</p>
<p>一般定义 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em">j</span><span class="mclose">]</span></span></span></span></span> 表示下标区间 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.05724em">j</span><span class="mclose">]</span></span></span></span></span> 的最优值。</p>
<h3 id="81-最长回文子序列">§8.1 最长回文子序列</h3>
<ul>
<li><a href="https://leetcode.cn/problems/longest-palindromic-subsequence/" target="_blank">516. 最长回文子序列</a></li>
<li><a href="https://leetcode.cn/problems/minimum-insertion-steps-to-make-a-string-palindrome/" target="_blank">1312. 让字符串成为回文串的最少插入次数</a> 1787</li>
<li><a href="https://leetcode.cn/problems/longest-palindromic-subsequence-after-at-most-k-operations/" target="_blank">3472. 至多 K 次操作后的最长回文子序列</a> 1884</li>
<li><a href="https://leetcode.cn/problems/maximize-palindrome-length-from-subsequences/" target="_blank">1771. 由子序列构造的最长回文串的长度</a> 2182</li>
<li><a href="https://leetcode.cn/problems/count-different-palindromic-subsequences/" target="_blank">730. 统计不同回文子序列</a></li>
<li><a href="https://leetcode.cn/problems/longest-palindromic-subsequence-ii/" target="_blank">1682. 最长回文子序列 II</a>（会员题）</li>
<li><a href="https://leetcode.cn/problems/valid-palindrome-iii/" target="_blank">1216. 验证回文串 III</a>（会员题）</li>
<li><a href="https://leetcode.cn/problems/palindrome-removal/" target="_blank">1246. 删除回文子数组</a>（会员题）</li>
</ul>
<h3 id="82-区间-dp">§8.2 区间 DP</h3>
<p>对于类似合法括号字符串（RBS）的消除问题，通常根据题意，会有如下性质：</p>
<ol>
<li data-length="1">可以消除相邻的匹配字符。</li>
<li data-length="1">相邻匹配字符消除后，原本不相邻的字符会变成相邻，可以继续消除。换句话说，设子串 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em"></span><span class="mord mathnormal" style="margin-right:0.05017em">B</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span></span></span></span></span>，如果 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">x</span></span></span></span></span> 和 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span></span></span></span></span> 是匹配的（可以消除），且子串 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.05017em">B</span></span></span></span></span> 可以完全消除，那么子串 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal">A</span></span></span></span></span> 可以完全消除。</li>
<li data-length="1">设子串 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em"></span><span class="mord mathnormal" style="margin-right:0.05017em">B</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.07153em">C</span></span></span></span></span>，如果子串 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.05017em">B</span></span></span></span></span> 和 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.07153em">C</span></span></span></span></span> 可以完全消除，那么子串 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal">A</span></span></span></span></span> 可以完全消除。</li>
</ol>
<p>满足上述性质的题目（例如 3563 题），可以用区间 DP 解决。</p>
<p>定义 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.05724em">j</span><span class="mclose">)</span></span></span></span></span> 表示消除 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">s</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span> 到 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">s</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em">j</span><span class="mclose">]</span></span></span></span></span> 的最优值。</p>
<ul>
<li>根据性质 2，可以把 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.05724em">j</span><span class="mclose">)</span></span></span></span></span> 缩小成子问题 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.05724em">j</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span>。</li>
<li>根据性质 3，可以枚举子串 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.05017em">B</span></span></span></span></span> 的右端点，即枚举 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal" style="margin-right:0.03148em">k</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.7429em;vertical-align:-0.0833em"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em"></span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em"></span><span class="mord">5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.05724em">j</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">2</span></span></span></span></span>，把 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.05724em">j</span><span class="mclose">)</span></span></span></span></span> 划分成子问题 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.03148em">k</span><span class="mclose">)</span></span></span></span></span> 和 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03148em">k</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.05724em">j</span><span class="mclose">)</span></span></span></span></span>。注意这里枚举 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal" style="margin-right:0.03148em">k</span></span></span></span></span> 的步长是 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">2</span></span></span></span></span>，因为每次消除 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">2</span></span></span></span></span> 个字符，被消除的子串长度一定是偶数。</li>
</ul>
<p>边界：<span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">i</span><span class="mclose">)</span></span></span></span></span>，即空串。</p>
<p>答案：<span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">(</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span>。</p>
<ul>
<li><a href="https://leetcode.cn/problems/longest-palindromic-substring/" target="_blank">5. 最长回文子串</a></li>
<li><a href="https://leetcode.cn/problems/palindromic-substrings/" target="_blank">647. 回文子串</a></li>
<li><a href="https://leetcode.cn/problems/maximum-number-of-operations-with-the-same-score-ii/" target="_blank">3040. 相同分数的最大操作数目 II</a> 1709</li>
<li><a href="https://leetcode.cn/problems/guess-number-higher-or-lower-ii/" target="_blank">375. 猜数字大小 II</a></li>
<li><a href="https://leetcode.cn/problems/minimum-cost-tree-from-leaf-values/" target="_blank">1130. 叶值的最小代价生成树</a> 1919</li>
<li><a href="https://leetcode.cn/problems/unique-binary-search-trees/" target="_blank">96. 不同的二叉搜索树</a></li>
<li><a href="https://leetcode.cn/problems/maximum-score-from-performing-multiplication-operations/" target="_blank">1770. 执行乘法运算的最大分数</a> 2068</li>
<li><a href="https://leetcode.cn/problems/minimum-cost-to-cut-a-stick/" target="_blank">1547. 切棍子的最小成本</a> 2116</li>
<li><a href="https://leetcode.cn/problems/minimum-score-triangulation-of-polygon/" target="_blank">1039. 多边形三角剖分的最低得分</a> 2130</li>
<li><a href="https://leetcode.cn/problems/minimum-cost-to-merge-stones/" target="_blank">1000. 合并石头的最低成本</a> 2423</li>
<li><a href="https://leetcode.cn/problems/the-score-of-students-solving-math-expression/" target="_blank">2019. 解出数学表达式的学生分数</a> 2584</li>
<li><a href="https://leetcode.cn/problems/boolean-evaluation-lcci/" target="_blank">面试题 08.14. 布尔运算</a></li>
<li><a href="https://leetcode.cn/problems/lexicographically-smallest-string-after-adjacent-removals/" target="_blank">3563. 移除相邻字符后字典序最小的字符串</a> 2585</li>
<li><a href="https://leetcode.cn/problems/maximum-xor-score-subarray-queries/" target="_blank">3277. 查询子数组最大异或值</a> 2693</li>
<li><a href="https://leetcode.cn/problems/scramble-string/" target="_blank">87. 扰乱字符串</a></li>
<li><a href="https://leetcode.cn/problems/burst-balloons/" target="_blank">312. 戳气球</a></li>
<li><a href="https://leetcode.cn/problems/strange-printer/" target="_blank">664. 奇怪的打印机</a></li>
<li><a href="https://leetcode.cn/problems/remove-boxes/" target="_blank">546. 移除盒子</a> 同 CF1107E</li>
<li><a href="https://leetcode.cn/problems/encode-string-with-shortest-length/" target="_blank">471. 编码最短长度的字符串</a>（会员题）</li>
<li><a href="https://leetcode.cn/problems/maximum-number-of-removal-queries-that-can-be-processed-i/" target="_blank">3018. 可处理的最大删除操作数 I</a>（会员题）</li>
</ul>
<h2 id="九状态压缩-dp状压-dp">九、状态压缩 DP（状压 DP）</h2>
<h3 id="91-排列型状压-dp--相邻无关">§9.1 排列型状压 DP ① 相邻无关</h3>
<p>学习指南：</p>
<ul>
<li><a href="https://leetcode.cn/circle/discuss/CaOJ45/" target="_blank">从集合论到位运算，常见位运算技巧分类总结</a></li>
<li><a href="https://leetcode.cn/problems/beautiful-arrangement/solution/jiao-ni-yi-bu-bu-si-kao-zhuang-ya-dpcong-c6kd/" target="_blank">教你一步步思考状压 DP：从记忆化搜索到递推</a></li>
</ul>
<p>暴力做法是枚举所有排列，对每个排列计算和题目有关的值，时间复杂度（通常来说）是 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathcal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">!)</span></span></span></span></span>。可以解决 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">10</span></span></span></span></span> 的问题。</p>
<p>状压 DP 可以把时间复杂度（通常来说）优化至 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathcal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>。可以解决 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">20</span></span></span></span></span> 的问题。</p>
<p>一般有两种定义方式：</p>
<ol>
<li data-length="1">定义 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="mclose">]</span></span></span></span></span> 表示已经排列好的元素（下标）集合为 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.05764em">S</span></span></span></span></span> 时，和题目有关的最优值。通过枚举当前位置要填的元素（下标）来转移。</li>
<li data-length="1">定义 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="mclose">]</span></span></span></span></span> 表示可以选的元素（下标）集合为 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.05764em">S</span></span></span></span></span> 时，和题目有关的最优值。通过枚举当前位置要填的元素（下标）来转移。</li>
</ol>
<blockquote>
<p>注：部分题目由于暴搜+剪枝也能过，难度分仅供参考。</p>
</blockquote>
<ul>
<li><a href="https://leetcode.cn/problems/beautiful-arrangement/" target="_blank">526. 优美的排列</a></li>
<li><a href="https://leetcode.cn/problems/minimum-time-to-break-locks-i/" target="_blank">3376. 破解锁的最少时间 I</a></li>
<li><a href="https://leetcode.cn/problems/minimum-xor-sum-of-two-arrays/" target="_blank">1879. 两个数组最小的异或值之和</a> 2145</li>
<li><a href="https://leetcode.cn/problems/minimum-moves-to-spread-stones-over-grid/" target="_blank">2850. 将石头分散到网格图的最少移动次数</a></li>
<li><a href="https://leetcode.cn/problems/maximum-compatibility-score-sum/" target="_blank">1947. 最大兼容性评分和</a></li>
<li><a href="https://leetcode.cn/problems/maximize-score-after-n-operations/" target="_blank">1799. N 次操作后的最大分数和</a></li>
<li><a href="https://leetcode.cn/problems/concatenated-divisibility/" target="_blank">3533. 判断连接可整除性</a> 2257 字典序 暴搜</li>
<li><a href="https://leetcode.cn/problems/maximum-profit-from-valid-topological-order-in-dag/" target="_blank">3530. 有向无环图中合法拓扑排序的最大利润</a> 2353 拓扑序</li>
<li><a href="https://leetcode.cn/problems/maximum-and-sum-of-array/" target="_blank">2172. 数组的最大与和</a> 2392</li>
<li><a href="https://leetcode.cn/problems/number-of-self-divisible-permutations/" target="_blank">2992. 自整除排列的数量</a>（会员题）</li>
<li><a href="https://leetcode.cn/problems/minimum-time-to-kill-all-monsters/" target="_blank">2403. 杀死所有怪物的最短时间</a>（会员题）同 3376 题</li>
<li><a href="https://leetcode.cn/problems/campus-bikes-ii/" target="_blank">1066. 校园自行车分配 II</a>（会员题）</li>
</ul>
<h3 id="92-排列型状压-dp--相邻相关">§9.2 排列型状压 DP ② 相邻相关</h3>
<p>一般定义 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span> 表示未选（或者已选）的集合为 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.05764em">S</span></span></span></span></span>，且上一个填的元素（下标）为 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em"></span><span class="mord mathnormal">i</span></span></span></span></span> 时，和题目有关的最优值。通过枚举当前位置要填的元素（下标）来转移。</p>
<p>时间复杂度（通常来说）是 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em"></span><span class="mord mathcal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>。</p>
<ul>
<li><a href="https://leetcode.cn/problems/special-permutations/" target="_blank">2741. 特别的排列</a> 2021</li>
<li><a href="https://leetcode.cn/problems/number-of-squareful-arrays/" target="_blank">996. 平方数组的数目</a></li>
<li><a href="https://leetcode.cn/problems/minimum-incompatibility/" target="_blank">1681. 最小不兼容性</a> 2390 见我在官解下的评论</li>
<li><a href="https://leetcode.cn/problems/longest-palindromic-path-in-graph/" target="_blank">3615. 图中的最长回文路径</a> 2463</li>
<li><a href="https://leetcode.cn/problems/maximum-number-of-moves-to-kill-all-pawns/" target="_blank">3283. 吃掉所有兵需要的最多移动次数</a> 2473</li>
<li><a href="https://leetcode.cn/problems/find-the-minimum-cost-array-permutation/" target="_blank">3149. 找出分数最低的排列</a> 2642</li>
</ul>
<h3 id="93-旅行商问题tsp">§9.3 旅行商问题（TSP）</h3>
<p>本质上就是排列型 ②。</p>
<ul>
<li><a href="https://leetcode.cn/problems/find-the-shortest-superstring/" target="_blank">943. 最短超级串</a> 2186</li>
<li><a href="https://leetcode.cn/problems/shortest-path-visiting-all-nodes/" target="_blank">847. 访问所有节点的最短路径</a> 2201</li>
<li><a href="https://leetcode.cn/problems/xun-bao/" target="_blank">LCP 13. 寻宝</a></li>
<li><a href="https://leetcode.cn/problems/maximum-cost-of-trip-with-k-highways/" target="_blank">2247. K 条高速公路的最大旅行费用</a>（会员题）</li>
</ul>
<p><strong>相似问题</strong>：</p>
<ul>
<li><a href="https://leetcode.cn/problems/minimum-moves-to-clean-the-classroom/" target="_blank">3568. 清理教室的最少移动</a> 2143</li>
<li><a href="https://leetcode.cn/problems/shortest-path-to-get-all-keys/" target="_blank">864. 获取所有钥匙的最短路径</a> 2259</li>
</ul>
<h3 id="94-子集状压-dp">§9.4 子集状压 DP</h3>
<p>一般定义 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="mclose">]</span></span></span></span></span> 表示未选（或者已选）的集合为 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.05764em">S</span></span></span></span></span> 时，和题目有关的最优值。通过枚举 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.05764em">S</span></span></span></span></span>（或者 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.05764em">S</span></span></span></span></span> 的补集 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.975em;vertical-align:-0.15em"></span><span class="mord"><span class="mord amsrm">∁</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em">U</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.05764em">S</span></span></span></span></span>）的子集来转移。</p>
<p>时间复杂度（通常来说）是 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathcal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord"><span class="mord">3</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>，证明：</p>
<p>对于大小为 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">n</span></span></span></span></span> 的集合，它的大小为 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">m</span></span></span></span></span> 的子集有 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2em;vertical-align:-0.35em"></span><span class="mord"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size1">(</span></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7454em"><span style="top:-2.355em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span style="top:-3.144em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em"><span class="delimsizing size1">)</span></span></span></span></span></span></span> 个，每个子集又有 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6644em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span></span></span></span></span></span></span></span> 个子集。根据二项式定理，<span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.3185em;vertical-align:-0.9671em"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3514em"><span style="top:-2.1329em;margin-left:0em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span><span class="mop op-symbol small-op">∑</span></span></span><span style="top:-3.95em;margin-left:0em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9671em"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size1">(</span></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7454em"><span style="top:-2.355em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span style="top:-3.144em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em"><span class="delimsizing size1">)</span></span></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord">1</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6644em"></span><span class="mord"><span class="mord">3</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span>，所以「枚举子集的子集」的总体时间复杂度为 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathcal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord"><span class="mord">3</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>。</p>
<blockquote>
<p>注：某些网格图的题也可以用「选或不选」来做，从而减少状态个数，详见「§9.5 轮廓线 DP」。</p>
</blockquote>
<ul>
<li><a href="https://leetcode.cn/problems/fair-distribution-of-cookies/" target="_blank">2305. 公平分发饼干</a> 1887</li>
<li><a href="https://leetcode.cn/problems/minimum-number-of-work-sessions-to-finish-the-tasks/" target="_blank">1986. 完成任务的最少工作时间段</a> 1995</li>
<li><a href="https://leetcode.cn/problems/maximum-product-of-two-integers-with-no-common-bits/" target="_blank">3670. 没有公共位的整数最大乘积</a> 2234</li>
<li><a href="https://leetcode.cn/problems/find-minimum-time-to-finish-all-jobs/" target="_blank">1723. 完成所有工作的最短时间</a> 2284</li>
<li><a href="https://leetcode.cn/problems/distribute-repeating-integers/" target="_blank">1655. 分配重复整数</a> 2307</li>
<li><a href="https://leetcode.cn/problems/minimum-increments-for-target-multiples-in-an-array/" target="_blank">3444. 使数组包含目标值倍数的最少增量</a> 2337</li>
<li><a href="https://leetcode.cn/problems/maximum-good-subtree-score/" target="_blank">3575. 最大好子树分数</a> 2360</li>
<li><a href="https://leetcode.cn/problems/maximum-students-taking-exam/" target="_blank">1349. 参加考试的最大学生数</a> 2386</li>
<li><a href="https://leetcode.cn/problems/minimum-incompatibility/" target="_blank">1681. 最小不兼容性</a> 2390 有 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em"></span><span class="mord mathcal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> 做法</li>
<li><a href="https://leetcode.cn/problems/count-the-number-of-square-free-subsets/" target="_blank">2572. 无平方子集计数</a> 2420</li>
<li><a href="https://leetcode.cn/problems/the-number-of-good-subsets/" target="_blank">1994. 好子集的数目</a> 2465</li>
<li><a href="https://leetcode.cn/problems/parallel-courses-ii/" target="_blank">1494. 并行课程 II</a></li>
<li><a href="https://leetcode.cn/problems/broken-board-dominoes/" target="_blank">LCP 04. 覆盖</a></li>
<li><a href="https://leetcode.cn/problems/EJvmW4/" target="_blank">LCP 53. 守护太空城</a></li>
<li><a href="https://leetcode.cn/problems/optimal-account-balancing/" target="_blank">465. 最优账单平衡</a>（会员题）</li>
<li><a href="https://leetcode.cn/problems/minimum-number-of-lines-to-cover-points/" target="_blank">2152. 穿过所有点的所需最少直线数量</a>（会员题）</li>
</ul>
<p><strong>相关问题</strong>：</p>
<ul>
<li><a href="https://leetcode.cn/problems/minimum-time-to-transport-all-individuals/" target="_blank">3594. 所有人渡河所需的最短时间</a> 2604</li>
</ul>
<h3 id="95-轮廓线-dp">§9.5 轮廓线 DP</h3>
<ul>
<li><a href="https://leetcode.cn/problems/number-of-ways-to-paint-n-3-grid/" target="_blank">1411. 给 N x 3 网格图涂色的方案数</a> 1845</li>
<li><a href="https://leetcode.cn/problems/painting-a-grid-with-three-different-colors/" target="_blank">1931. 用三种不同颜色为网格涂色</a> 2170</li>
<li><a href="https://leetcode.cn/problems/maximum-students-taking-exam/" target="_blank">1349. 参加考试的最大学生数</a> 2386</li>
<li><a href="https://leetcode.cn/problems/maximize-grid-happiness/" target="_blank">1659. 最大化网格幸福感</a> 2655</li>
<li><a href="https://leetcode.cn/problems/unique-paths-iii/" target="_blank">980. 不同路径 III</a></li>
<li><a href="https://leetcode.cn/problems/broken-board-dominoes/" target="_blank">LCP 04. 覆盖</a></li>
<li><a href="https://leetcode.cn/problems/1ybDKD/" target="_blank">LCP 76. 魔法棋盘</a></li>
<li><a href="https://leetcode.cn/problems/number-of-ways-to-build-sturdy-brick-wall/" target="_blank">2184. 建造坚实的砖墙的方法数</a>（会员题）</li>
</ul>
<h3 id="96-sos-dp">§9.6 SOS DP</h3>
<p>子集和 DP（Sum Over Subsets DP，SOS DP），国内算法竞赛圈一般叫高维前缀和。</p>
<p><a href="https://leetcode.cn/problems/maximum-product-of-two-integers-with-no-common-bits/solutions/3768219/mo-ban-gao-wei-qian-zhui-he-sos-dppython-78fz/" target="_blank">原理讲解（方法二）</a></p>
<p>模板（从子集转移过来）：</p>
<div class="border-gray-3 dark:border-dark-gray-3 mb-6 overflow-hidden rounded-lg border text-sm"><div class="flex select-none overflow-x-auto bg-layer-2 dark:bg-dark-layer-2"><div class="font-menlo relative flex h-10 cursor-pointer items-center justify-center px-3 font-medium transition-all text-label-1 dark:text-dark-label-1 d8276">Python3</div><div class="font-menlo relative flex h-10 cursor-pointer items-center justify-center px-3 font-medium transition-all text-label-4 dark:text-dark-label-4 hover:text-label-1 dark:hover:text-dark-label-1 d8276">Java</div><div class="font-menlo relative flex h-10 cursor-pointer items-center justify-center px-3 font-medium transition-all text-label-4 dark:text-dark-label-4 hover:text-label-1 dark:hover:text-dark-label-1 d8276">C++</div><div class="font-menlo relative flex h-10 cursor-pointer items-center justify-center px-3 font-medium transition-all text-label-4 dark:text-dark-label-4 hover:text-label-1 dark:hover:text-dark-label-1 d8276">Go</div></div><div class="px-3 py-2.5 bg-fill-3 dark:bg-dark-fill-3"><div class="group relative" translate="no"><pre style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0;margin:0;overflow:auto;background:transparent"><code class="language-py" style="white-space:pre;color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token" style="color:#6a9955"># 设 w 为 a[i] 的二进制最大长度</span><span>
</span></span><span><span></span><span class="token" style="color:#6a9955"># 返回一个长为 2^w 的数组 f，其中 f[S] 表示 a 中是 S 的子集的元素个数（把二进制数视作集合）</span><span>
</span></span><span><span></span><span class="token" style="color:#6a9955"># 时间复杂度 O(n + U log U)，其中 U = max(a)</span><span>
</span></span><span><span></span><span class="token" style="color:#569CD6">def</span><span> </span><span class="token" style="color:#dcdcaa">sos_dp</span><span class="token" style="color:#d4d4d4">(</span><span>a</span><span class="token" style="color:#d4d4d4">:</span><span> List</span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#ce9178">int</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">-</span><span class="token" style="color:#d4d4d4">&gt;</span><span> List</span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#ce9178">int</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">:</span><span>
</span></span><span><span>    mx </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#ce9178">max</span><span class="token" style="color:#d4d4d4">(</span><span>a</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></span><span><span>    w </span><span class="token" style="color:#d4d4d4">=</span><span> mx</span><span class="token" style="color:#d4d4d4">.</span><span>bit_length</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span>  </span><span class="token" style="color:#6a9955"># 二进制长度上限</span><span>
</span></span><span><span>    u </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#b5cea8">1</span><span> </span><span class="token" style="color:#d4d4d4">&lt;&lt;</span><span> w
</span></span><span>
</span><span><span>    f </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">]</span><span> </span><span class="token" style="color:#d4d4d4">*</span><span> u
</span></span><span><span>    </span><span class="token" style="color:#569CD6">for</span><span> x </span><span class="token" style="color:#569CD6">in</span><span> a</span><span class="token" style="color:#d4d4d4">:</span><span>
</span></span><span><span>        f</span><span class="token" style="color:#d4d4d4">[</span><span>x</span><span class="token" style="color:#d4d4d4">]</span><span> </span><span class="token" style="color:#d4d4d4">+=</span><span> </span><span class="token" style="color:#b5cea8">1</span><span>  </span><span class="token" style="color:#6a9955"># 初始值</span><span>
</span></span><span>
</span><span><span>    </span><span class="token" style="color:#569CD6">for</span><span> i </span><span class="token" style="color:#569CD6">in</span><span> </span><span class="token" style="color:#ce9178">range</span><span class="token" style="color:#d4d4d4">(</span><span>w</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">:</span><span>
</span></span><span><span>        bit </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#b5cea8">1</span><span> </span><span class="token" style="color:#d4d4d4">&lt;&lt;</span><span> i
</span></span><span><span>        s </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#b5cea8">0</span><span>
</span></span><span><span>        </span><span class="token" style="color:#569CD6">while</span><span> s </span><span class="token" style="color:#d4d4d4">&lt;</span><span> u</span><span class="token" style="color:#d4d4d4">:</span><span>
</span></span><span><span>            s </span><span class="token" style="color:#d4d4d4">|</span><span class="token" style="color:#d4d4d4">=</span><span> bit  </span><span class="token" style="color:#6a9955"># 优化：快速跳到 i 位是 1 的 s</span><span>
</span></span><span><span>            f</span><span class="token" style="color:#d4d4d4">[</span><span>s</span><span class="token" style="color:#d4d4d4">]</span><span> </span><span class="token" style="color:#d4d4d4">+=</span><span> f</span><span class="token" style="color:#d4d4d4">[</span><span>s </span><span class="token" style="color:#d4d4d4">^</span><span> bit</span><span class="token" style="color:#d4d4d4">]</span><span>
</span></span><span><span>            s </span><span class="token" style="color:#d4d4d4">+=</span><span> </span><span class="token" style="color:#b5cea8">1</span><span>
</span></span><span><span>    </span><span class="token" style="color:#569CD6">return</span><span> f</span></span></code></pre><div class="absolute -right-1.5 -top-0.5 flex gap-2"><div class="z-base-1 hidden rounded border group-hover:block border-border-quaternary dark:border-border-quaternary bg-layer-02 dark:bg-layer-02"><div class="relative cursor-pointer flex h-[22px] w-[22px] items-center justify-center bg-layer-02 dark:bg-layer-02 hover:bg-fill-tertiary dark:hover:bg-fill-tertiary rounded-[4px]" data-state="closed"><div><div data-state="closed"><div class="relative text-[12px] leading-[normal] p-[1px] before:block before:h-3 before:w-3 h-3.5 w-3.5 text-text-primary dark:text-text-primary"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="clone" class="svg-inline--fa fa-clone absolute left-1/2 top-1/2 h-[1em] -translate-x-1/2 -translate-y-1/2 align-[-0.125em]" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M64 464H288c8.8 0 16-7.2 16-16V384h48v64c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V224c0-35.3 28.7-64 64-64h64v48H64c-8.8 0-16 7.2-16 16V448c0 8.8 7.2 16 16 16zM224 304H448c8.8 0 16-7.2 16-16V64c0-8.8-7.2-16-16-16H224c-8.8 0-16 7.2-16 16V288c0 8.8 7.2 16 16 16zm-64-16V64c0-35.3 28.7-64 64-64H448c35.3 0 64 28.7 64 64V288c0 35.3-28.7 64-64 64H224c-35.3 0-64-28.7-64-64z"></path></svg></div></div></div></div></div></div></div></div></div>
<p>模板（从超集转移过来）：</p>
<div class="border-gray-3 dark:border-dark-gray-3 mb-6 overflow-hidden rounded-lg border text-sm"><div class="flex select-none overflow-x-auto bg-layer-2 dark:bg-dark-layer-2"><div class="font-menlo relative flex h-10 cursor-pointer items-center justify-center px-3 font-medium transition-all text-label-1 dark:text-dark-label-1 d8276">Python3</div><div class="font-menlo relative flex h-10 cursor-pointer items-center justify-center px-3 font-medium transition-all text-label-4 dark:text-dark-label-4 hover:text-label-1 dark:hover:text-dark-label-1 d8276">Java</div><div class="font-menlo relative flex h-10 cursor-pointer items-center justify-center px-3 font-medium transition-all text-label-4 dark:text-dark-label-4 hover:text-label-1 dark:hover:text-dark-label-1 d8276">C++</div><div class="font-menlo relative flex h-10 cursor-pointer items-center justify-center px-3 font-medium transition-all text-label-4 dark:text-dark-label-4 hover:text-label-1 dark:hover:text-dark-label-1 d8276">Go</div></div><div class="px-3 py-2.5 bg-fill-3 dark:bg-dark-fill-3"><div class="group relative" translate="no"><pre style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0;margin:0;overflow:auto;background:transparent"><code class="language-py" style="white-space:pre;color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token" style="color:#6a9955"># 设 w 为 a[i] 的二进制最大长度</span><span>
</span></span><span><span></span><span class="token" style="color:#6a9955"># 返回一个长为 2^w 的数组 f，其中 f[S] 表示 a 中是 S 的超集的元素个数（把二进制数视作集合）</span><span>
</span></span><span><span></span><span class="token" style="color:#6a9955"># 时间复杂度 O(n + U log U)，其中 U = max(a)</span><span>
</span></span><span><span></span><span class="token" style="color:#569CD6">def</span><span> </span><span class="token" style="color:#dcdcaa">sos_dp</span><span class="token" style="color:#d4d4d4">(</span><span>a</span><span class="token" style="color:#d4d4d4">:</span><span> List</span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#ce9178">int</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">-</span><span class="token" style="color:#d4d4d4">&gt;</span><span> List</span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#ce9178">int</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">:</span><span>
</span></span><span><span>    mx </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#ce9178">max</span><span class="token" style="color:#d4d4d4">(</span><span>a</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></span><span><span>    w </span><span class="token" style="color:#d4d4d4">=</span><span> mx</span><span class="token" style="color:#d4d4d4">.</span><span>bit_length</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span>  </span><span class="token" style="color:#6a9955"># 二进制长度上限</span><span>
</span></span><span><span>    u </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#b5cea8">1</span><span> </span><span class="token" style="color:#d4d4d4">&lt;&lt;</span><span> w
</span></span><span>
</span><span><span>    f </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">]</span><span> </span><span class="token" style="color:#d4d4d4">*</span><span> u
</span></span><span><span>    </span><span class="token" style="color:#569CD6">for</span><span> x </span><span class="token" style="color:#569CD6">in</span><span> a</span><span class="token" style="color:#d4d4d4">:</span><span>
</span></span><span><span>        f</span><span class="token" style="color:#d4d4d4">[</span><span>x</span><span class="token" style="color:#d4d4d4">]</span><span> </span><span class="token" style="color:#d4d4d4">+=</span><span> </span><span class="token" style="color:#b5cea8">1</span><span>  </span><span class="token" style="color:#6a9955"># 初始值</span><span>
</span></span><span>
</span><span><span>    </span><span class="token" style="color:#569CD6">for</span><span> i </span><span class="token" style="color:#569CD6">in</span><span> </span><span class="token" style="color:#ce9178">range</span><span class="token" style="color:#d4d4d4">(</span><span>w</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">:</span><span>
</span></span><span><span>        bit </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#b5cea8">1</span><span> </span><span class="token" style="color:#d4d4d4">&lt;&lt;</span><span> i
</span></span><span><span>        s </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#b5cea8">0</span><span>
</span></span><span><span>        </span><span class="token" style="color:#569CD6">while</span><span> s </span><span class="token" style="color:#d4d4d4">&lt;</span><span> u</span><span class="token" style="color:#d4d4d4">:</span><span>
</span></span><span><span>            s </span><span class="token" style="color:#d4d4d4">|</span><span class="token" style="color:#d4d4d4">=</span><span> bit  </span><span class="token" style="color:#6a9955"># 优化：快速跳到 i 位是 1 的 s</span><span>
</span></span><span><span>            f</span><span class="token" style="color:#d4d4d4">[</span><span>s </span><span class="token" style="color:#d4d4d4">^</span><span> bit</span><span class="token" style="color:#d4d4d4">]</span><span> </span><span class="token" style="color:#d4d4d4">+=</span><span> f</span><span class="token" style="color:#d4d4d4">[</span><span>s</span><span class="token" style="color:#d4d4d4">]</span><span>
</span></span><span><span>            s </span><span class="token" style="color:#d4d4d4">+=</span><span> </span><span class="token" style="color:#b5cea8">1</span><span>
</span></span><span><span>    </span><span class="token" style="color:#569CD6">return</span><span> f</span></span></code></pre><div class="absolute -right-1.5 -top-0.5 flex gap-2"><div class="z-base-1 hidden rounded border group-hover:block border-border-quaternary dark:border-border-quaternary bg-layer-02 dark:bg-layer-02"><div class="relative cursor-pointer flex h-[22px] w-[22px] items-center justify-center bg-layer-02 dark:bg-layer-02 hover:bg-fill-tertiary dark:hover:bg-fill-tertiary rounded-[4px]" data-state="closed"><div><div data-state="closed"><div class="relative text-[12px] leading-[normal] p-[1px] before:block before:h-3 before:w-3 h-3.5 w-3.5 text-text-primary dark:text-text-primary"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="clone" class="svg-inline--fa fa-clone absolute left-1/2 top-1/2 h-[1em] -translate-x-1/2 -translate-y-1/2 align-[-0.125em]" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M64 464H288c8.8 0 16-7.2 16-16V384h48v64c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V224c0-35.3 28.7-64 64-64h64v48H64c-8.8 0-16 7.2-16 16V448c0 8.8 7.2 16 16 16zM224 304H448c8.8 0 16-7.2 16-16V64c0-8.8-7.2-16-16-16H224c-8.8 0-16 7.2-16 16V288c0 8.8 7.2 16 16 16zm-64-16V64c0-35.3 28.7-64 64-64H448c35.3 0 64 28.7 64 64V288c0 35.3-28.7 64-64 64H224c-35.3 0-64-28.7-64-64z"></path></svg></div></div></div></div></div></div></div></div></div>
<ul>
<li><a href="https://leetcode.cn/problems/maximum-product-of-two-integers-with-no-common-bits/" target="_blank">3670. 没有公共位的整数最大乘积</a> 2234</li>
<li><a href="https://leetcode.cn/problems/count-number-of-maximum-bitwise-or-subsets/" target="_blank">2044. 统计按位或能得到最大值的子集数目</a></li>
<li><a href="https://leetcode.cn/problems/find-a-good-subset-of-the-matrix/" target="_blank">2732. 找到矩阵中的好子集</a></li>
<li><a href="https://leetcode.cn/problems/number-of-effective-subsequences/" target="_blank">3757. 有效子序列的数量</a> 2519</li>
</ul>
<h3 id="97-其他状压-dp">§9.7 其他状压 DP</h3>
<ul>
<li><a href="https://leetcode.cn/problems/matchsticks-to-square/" target="_blank">473. 火柴拼正方形</a></li>
<li><a href="https://leetcode.cn/problems/partition-to-k-equal-sum-subsets/" target="_blank">698. 划分为k个相等的子集</a></li>
<li><a href="https://leetcode.cn/problems/maximum-product-of-the-length-of-two-palindromic-subsequences/" target="_blank">2002. 两个回文子序列长度的最大乘积</a> 1869</li>
<li><a href="https://leetcode.cn/problems/smallest-sufficient-team/" target="_blank">1125. 最小的必要团队</a> 2251</li>
<li><a href="https://leetcode.cn/problems/number-of-ways-to-wear-different-hats-to-each-other/" target="_blank">1434. 每个人戴不同帽子的方案数</a> 2273</li>
<li><a href="https://leetcode.cn/problems/can-i-win/" target="_blank">464. 我能赢吗</a></li>
<li><a href="https://leetcode.cn/problems/stickers-to-spell-word/" target="_blank">691. 贴纸拼词</a></li>
<li><a href="https://leetcode.cn/problems/select-cells-in-grid-with-maximum-score/" target="_blank">3276. 选择矩阵中单元格的最大得分</a> 2403 横看成岭侧成峰</li>
<li><a href="https://leetcode.cn/problems/minimum-cost-to-connect-two-groups-of-points/" target="_blank">1595. 连通两组点的最小成本</a> 2538</li>
<li><a href="https://leetcode.cn/problems/maximum-number-of-groups-getting-fresh-donuts/" target="_blank">1815. 得到新鲜甜甜圈的最多组数</a> 2559</li>
<li><a href="https://leetcode.cn/problems/rMeRt2/" target="_blank">LCP 69. Hello LeetCode!</a></li>
<li><a href="https://leetcode.cn/problems/cnHoX6/" target="_blank">LCP 82. 万灵之树</a></li>
<li><a href="https://leetcode.cn/problems/android-unlock-patterns/" target="_blank">351. 安卓系统手势解锁</a>（会员题）</li>
</ul>
<h2 id="十数位-dp">十、数位 DP</h2>
<h3 id="101-统计合法元素的数目">§10.1 统计合法元素的数目</h3>
<p><a href="/link/?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1rS4y1s721%2F%3Ft%3D19m36s" target="_blank">数位 DP v1.0 模板讲解</a></p>
<p><a href="/link/?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1Fg4y1Q7wv%2F%3Ft%3D31m28s" target="_blank">数位 DP v2.0 模板讲解</a>（上下界数位 DP）</p>
<p>下面是数位 DP v2.1 模板。相比 v2.0，不需要写 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord text"><span class="mord textit">isNum</span></span></span></span></span></span> 参数。</p>
<blockquote>
<p>注：只有上界约束的题目，相当于 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord text"><span class="mord textit">low</span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">0</span></span></span></span></span> 或者 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord text"><span class="mord textit">low</span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">1</span></span></span></span></span>。</p>
</blockquote>
<div class="border-gray-3 dark:border-dark-gray-3 mb-6 overflow-hidden rounded-lg border text-sm"><div class="flex select-none overflow-x-auto bg-layer-2 dark:bg-dark-layer-2"><div class="font-menlo relative flex h-10 cursor-pointer items-center justify-center px-3 font-medium transition-all text-label-1 dark:text-dark-label-1 d8276">Python3</div><div class="font-menlo relative flex h-10 cursor-pointer items-center justify-center px-3 font-medium transition-all text-label-4 dark:text-dark-label-4 hover:text-label-1 dark:hover:text-dark-label-1 d8276">Java</div><div class="font-menlo relative flex h-10 cursor-pointer items-center justify-center px-3 font-medium transition-all text-label-4 dark:text-dark-label-4 hover:text-label-1 dark:hover:text-dark-label-1 d8276">C++</div><div class="font-menlo relative flex h-10 cursor-pointer items-center justify-center px-3 font-medium transition-all text-label-4 dark:text-dark-label-4 hover:text-label-1 dark:hover:text-dark-label-1 d8276">Go</div></div><div class="px-3 py-2.5 bg-fill-3 dark:bg-dark-fill-3"><div class="group relative" translate="no"><pre style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0;margin:0;overflow:auto;background:transparent"><code class="language-py" style="white-space:pre;color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token" style="color:#6a9955"># 代码示例：返回 [low, high] 中的恰好包含 target 个 0 的数字个数</span><span>
</span></span><span><span></span><span class="token" style="color:#6a9955"># 比如 digitDP(0, 10, 1) == 2</span><span>
</span></span><span><span></span><span class="token" style="color:#6a9955"># 要点：我们统计的是 0 的个数，需要区分【前导零】和【数字中的零】，前导零不能计入，而数字中的零需要计入</span><span>
</span></span><span><span></span><span class="token" style="color:#569CD6">def</span><span> </span><span class="token" style="color:#dcdcaa">digitDP</span><span class="token" style="color:#d4d4d4">(</span><span>low</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">int</span><span class="token" style="color:#d4d4d4">,</span><span> high</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">int</span><span class="token" style="color:#d4d4d4">,</span><span> target</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">int</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">-</span><span class="token" style="color:#d4d4d4">&gt;</span><span> </span><span class="token" style="color:#ce9178">int</span><span class="token" style="color:#d4d4d4">:</span><span>
</span></span><span><span>    low_s </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#ce9178">list</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">map</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">int</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#ce9178">str</span><span class="token" style="color:#d4d4d4">(</span><span>low</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span>  </span><span class="token" style="color:#6a9955"># 避免在 dfs 中频繁调用 int()</span><span>
</span></span><span><span>    high_s </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#ce9178">list</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">map</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">int</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#ce9178">str</span><span class="token" style="color:#d4d4d4">(</span><span>high</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></span><span><span>    n </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#ce9178">len</span><span class="token" style="color:#d4d4d4">(</span><span>high_s</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></span><span><span>    diff_lh </span><span class="token" style="color:#d4d4d4">=</span><span> n </span><span class="token" style="color:#d4d4d4">-</span><span> </span><span class="token" style="color:#ce9178">len</span><span class="token" style="color:#d4d4d4">(</span><span>low_s</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></span><span>
</span><span><span>    </span><span class="token decorator annotation" style="color:#d4d4d4">@cache</span><span>
</span></span><span><span>    </span><span class="token" style="color:#569CD6">def</span><span> </span><span class="token" style="color:#dcdcaa">dfs</span><span class="token" style="color:#d4d4d4">(</span><span>i</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">int</span><span class="token" style="color:#d4d4d4">,</span><span> cnt0</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">int</span><span class="token" style="color:#d4d4d4">,</span><span> limit_low</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">bool</span><span class="token" style="color:#d4d4d4">,</span><span> limit_high</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">bool</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">-</span><span class="token" style="color:#d4d4d4">&gt;</span><span> </span><span class="token" style="color:#ce9178">int</span><span class="token" style="color:#d4d4d4">:</span><span>
</span></span><span><span>        </span><span class="token" style="color:#569CD6">if</span><span> cnt0 </span><span class="token" style="color:#d4d4d4">&gt;</span><span> target</span><span class="token" style="color:#d4d4d4">:</span><span>
</span></span><span><span>            </span><span class="token" style="color:#569CD6">return</span><span> </span><span class="token" style="color:#b5cea8">0</span><span>  </span><span class="token" style="color:#6a9955"># 不合法</span><span>
</span></span><span><span>        </span><span class="token" style="color:#569CD6">if</span><span> i </span><span class="token" style="color:#d4d4d4">==</span><span> n</span><span class="token" style="color:#d4d4d4">:</span><span>
</span></span><span><span>            </span><span class="token" style="color:#569CD6">return</span><span> </span><span class="token" style="color:#b5cea8">1</span><span> </span><span class="token" style="color:#569CD6">if</span><span> cnt0 </span><span class="token" style="color:#d4d4d4">==</span><span> target </span><span class="token" style="color:#569CD6">else</span><span> </span><span class="token" style="color:#b5cea8">0</span><span>
</span></span><span>
</span><span><span>        lo </span><span class="token" style="color:#d4d4d4">=</span><span> low_s</span><span class="token" style="color:#d4d4d4">[</span><span>i </span><span class="token" style="color:#d4d4d4">-</span><span> diff_lh</span><span class="token" style="color:#d4d4d4">]</span><span> </span><span class="token" style="color:#569CD6">if</span><span> limit_low </span><span class="token" style="color:#569CD6">and</span><span> i </span><span class="token" style="color:#d4d4d4">&gt;=</span><span> diff_lh </span><span class="token" style="color:#569CD6">else</span><span> </span><span class="token" style="color:#b5cea8">0</span><span>
</span></span><span><span>        hi </span><span class="token" style="color:#d4d4d4">=</span><span> high_s</span><span class="token" style="color:#d4d4d4">[</span><span>i</span><span class="token" style="color:#d4d4d4">]</span><span> </span><span class="token" style="color:#569CD6">if</span><span> limit_high </span><span class="token" style="color:#569CD6">else</span><span> </span><span class="token" style="color:#b5cea8">9</span><span>
</span></span><span>
</span><span><span>        res </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#b5cea8">0</span><span>
</span></span><span><span>        start </span><span class="token" style="color:#d4d4d4">=</span><span> lo
</span></span><span>
</span><span><span>        </span><span class="token" style="color:#6a9955"># 通过 limit_low 和 i 可以判断能否不填数字，无需 is_num 参数</span><span>
</span></span><span><span>        </span><span class="token" style="color:#6a9955"># 如果前导零不影响答案，去掉这个 if block</span><span>
</span></span><span><span>        </span><span class="token" style="color:#569CD6">if</span><span> limit_low </span><span class="token" style="color:#569CD6">and</span><span> i </span><span class="token" style="color:#d4d4d4">&lt;</span><span> diff_lh</span><span class="token" style="color:#d4d4d4">:</span><span>
</span></span><span><span>            </span><span class="token" style="color:#6a9955"># 不填数字，上界不受约束</span><span>
</span></span><span><span>            res </span><span class="token" style="color:#d4d4d4">=</span><span> dfs</span><span class="token" style="color:#d4d4d4">(</span><span>i </span><span class="token" style="color:#d4d4d4">+</span><span> </span><span class="token" style="color:#b5cea8">1</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#569cd6">True</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#569cd6">False</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></span><span><span>            start </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#b5cea8">1</span><span>
</span></span><span>
</span><span><span>        </span><span class="token" style="color:#569CD6">for</span><span> d </span><span class="token" style="color:#569CD6">in</span><span> </span><span class="token" style="color:#ce9178">range</span><span class="token" style="color:#d4d4d4">(</span><span>start</span><span class="token" style="color:#d4d4d4">,</span><span> hi </span><span class="token" style="color:#d4d4d4">+</span><span> </span><span class="token" style="color:#b5cea8">1</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">:</span><span>
</span></span><span><span>            res </span><span class="token" style="color:#d4d4d4">+=</span><span> dfs</span><span class="token" style="color:#d4d4d4">(</span><span>i </span><span class="token" style="color:#d4d4d4">+</span><span> </span><span class="token" style="color:#b5cea8">1</span><span class="token" style="color:#d4d4d4">,</span><span>
</span></span><span><span>                       cnt0 </span><span class="token" style="color:#d4d4d4">+</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#b5cea8">1</span><span> </span><span class="token" style="color:#569CD6">if</span><span> d </span><span class="token" style="color:#d4d4d4">==</span><span> </span><span class="token" style="color:#b5cea8">0</span><span> </span><span class="token" style="color:#569CD6">else</span><span> </span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">,</span><span>  </span><span class="token" style="color:#6a9955"># 统计 0 的个数</span><span>
</span></span><span><span>                       limit_low </span><span class="token" style="color:#569CD6">and</span><span> d </span><span class="token" style="color:#d4d4d4">==</span><span> lo</span><span class="token" style="color:#d4d4d4">,</span><span>
</span></span><span><span>                       limit_high </span><span class="token" style="color:#569CD6">and</span><span> d </span><span class="token" style="color:#d4d4d4">==</span><span> hi</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></span><span>
</span><span><span>        </span><span class="token" style="color:#6a9955"># res %= MOD</span><span>
</span></span><span><span>        </span><span class="token" style="color:#569CD6">return</span><span> res
</span></span><span>
</span><span><span>    </span><span class="token" style="color:#569CD6">return</span><span> dfs</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#569cd6">True</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#569cd6">True</span><span class="token" style="color:#d4d4d4">)</span></span></code></pre><div class="absolute -right-1.5 -top-0.5 flex gap-2"><div class="z-base-1 hidden rounded border group-hover:block border-border-quaternary dark:border-border-quaternary bg-layer-02 dark:bg-layer-02"><div class="relative cursor-pointer flex h-[22px] w-[22px] items-center justify-center bg-layer-02 dark:bg-layer-02 hover:bg-fill-tertiary dark:hover:bg-fill-tertiary rounded-[4px]" data-state="closed"><div><div data-state="closed"><div class="relative text-[12px] leading-[normal] p-[1px] before:block before:h-3 before:w-3 h-3.5 w-3.5 text-text-primary dark:text-text-primary"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="clone" class="svg-inline--fa fa-clone absolute left-1/2 top-1/2 h-[1em] -translate-x-1/2 -translate-y-1/2 align-[-0.125em]" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M64 464H288c8.8 0 16-7.2 16-16V384h48v64c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V224c0-35.3 28.7-64 64-64h64v48H64c-8.8 0-16 7.2-16 16V448c0 8.8 7.2 16 16 16zM224 304H448c8.8 0 16-7.2 16-16V64c0-8.8-7.2-16-16-16H224c-8.8 0-16 7.2-16 16V288c0 8.8 7.2 16 16 16zm-64-16V64c0-35.3 28.7-64 64-64H448c35.3 0 64 28.7 64 64V288c0 35.3-28.7 64-64 64H224c-35.3 0-64-28.7-64-64z"></path></svg></div></div></div></div></div></div></div></div></div>
<ul>
<li><a href="https://leetcode.cn/problems/count-distinct-integers-after-removing-zeros/" target="_blank">3747. 统计移除零后不同整数的数目</a> 1848</li>
<li><a href="https://leetcode.cn/problems/count-of-integers/" target="_blank">2719. 统计整数数目</a></li>
<li><a href="https://leetcode.cn/problems/count-largest-group/" target="_blank">1399. 统计最大组的数目</a> 非暴力做法</li>
<li><a href="https://leetcode.cn/problems/maximum-number-of-balls-in-a-box/" target="_blank">1742. 盒子中小球的最大数量</a> 非暴力做法</li>
<li><a href="https://leetcode.cn/problems/rotated-digits/" target="_blank">788. 旋转数字</a> 非暴力做法</li>
<li><a href="https://leetcode.cn/problems/numbers-at-most-n-given-digit-set/" target="_blank">902. 最大为 N 的数字组合</a> 1990</li>
<li><a href="https://leetcode.cn/problems/non-negative-integers-without-consecutive-ones/" target="_blank">600. 不含连续 1 的非负整数</a></li>
<li><a href="https://leetcode.cn/problems/count-special-integers/" target="_blank">2376. 统计特殊整数</a> 2120</li>
<li><a href="https://leetcode.cn/problems/count-numbers-with-unique-digits/" target="_blank">357. 统计各位数字都不同的数字个数</a> 同 2376 题</li>
<li><a href="https://leetcode.cn/problems/numbers-with-repeated-digits/" target="_blank">1012. 至少有 1 位重复的数字</a> 2230</li>
<li><a href="https://leetcode.cn/problems/count-numbers-with-non-decreasing-digits/" target="_blank">3519. 统计逐位非递减的整数</a> 2246 进制转换</li>
<li><a href="https://leetcode.cn/problems/number-of-beautiful-integers-in-the-range/" target="_blank">2827. 范围中美丽整数的数目</a> 2324</li>
<li><a href="https://leetcode.cn/problems/count-the-number-of-powerful-integers/" target="_blank">2999. 统计强大整数的数目</a> 2351</li>
<li><a href="https://leetcode.cn/problems/count-stepping-numbers-in-range/" target="_blank">2801. 统计范围内的步进数字数目</a> 2367</li>
<li><a href="https://leetcode.cn/problems/count-symmetric-integers/" target="_blank">2843. 统计对称整数的数目</a> 非暴力做法</li>
<li><a href="https://leetcode.cn/problems/count-k-reducible-numbers-less-than-n/" target="_blank">3352. 统计小于 N 的 K 可约简整数</a> 2451</li>
<li><a href="https://leetcode.cn/problems/number-of-integers-with-popcount-depth-equal-to-k-i/" target="_blank">3621. 位计数深度为 K 的整数数目 I</a> 同 3352 题</li>
<li><a href="https://leetcode.cn/problems/count-beautiful-numbers/" target="_blank">3490. 统计美丽整数的数目</a> 2502</li>
<li><a href="https://leetcode.cn/problems/find-all-good-strings/" target="_blank">1397. 找到所有好字符串</a> 2667</li>
<li><a href="https://leetcode.cn/problems/stepping-numbers/" target="_blank">1215. 步进数</a>（会员题）</li>
<li><a href="https://leetcode.cn/problems/digit-count-in-range/" target="_blank">1067. 范围内的数字计数</a>（会员题）</li>
<li><a href="https://leetcode.cn/problems/count-numbers-with-unique-digits-ii/" target="_blank">3032. 统计各位数字都不同的数字个数 II</a>（会员题）</li>
</ul>
<p><strong>从低到高</strong>：</p>
<ul>
<li><a href="https://leetcode.cn/problems/count-no-zero-pairs-that-sum-to-n/" target="_blank">3704. 统计和为 N 的无零数对</a> 2419 数对</li>
</ul>
<h3 id="102-统计合法元素的价值总和">§10.2 统计合法元素的价值总和</h3>
<p>每个元素 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">x</span></span></span></span></span> 都有一个相应的价值 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></span>，计算 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">[</span><span class="mord text"><span class="mord textit">low</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord text"><span class="mord textit">high</span></span><span class="mclose">]</span></span></span></span></span> 中的满足题目约束的元素的价值总和。</p>
<p>例如 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">x</span></span></span></span></span> 是计算满足题目约束的元素和，<span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord text"><span class="mord">digsum</span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></span> 是计算满足题目约束的元素的数位和。</p>
<p>模板（数位和）：</p>
<div class="border-gray-3 dark:border-dark-gray-3 mb-6 overflow-hidden rounded-lg border text-sm"><div class="flex select-none overflow-x-auto bg-layer-2 dark:bg-dark-layer-2"><div class="font-menlo relative flex h-10 cursor-pointer items-center justify-center px-3 font-medium transition-all text-label-1 dark:text-dark-label-1 d8276">Python3</div><div class="font-menlo relative flex h-10 cursor-pointer items-center justify-center px-3 font-medium transition-all text-label-4 dark:text-dark-label-4 hover:text-label-1 dark:hover:text-dark-label-1 d8276">Java</div><div class="font-menlo relative flex h-10 cursor-pointer items-center justify-center px-3 font-medium transition-all text-label-4 dark:text-dark-label-4 hover:text-label-1 dark:hover:text-dark-label-1 d8276">C++</div><div class="font-menlo relative flex h-10 cursor-pointer items-center justify-center px-3 font-medium transition-all text-label-4 dark:text-dark-label-4 hover:text-label-1 dark:hover:text-dark-label-1 d8276">Go</div></div><div class="px-3 py-2.5 bg-fill-3 dark:bg-dark-fill-3"><div class="group relative" translate="no"><pre style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0;margin:0;overflow:auto;background:transparent"><code class="language-py" style="white-space:pre;color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token" style="color:#6a9955"># 计算在 [low, high] 中的整数 x 的数位和，满足 x 中的不同数字个数不超过 k</span><span>
</span></span><span><span></span><span class="token" style="color:#569CD6">def</span><span> </span><span class="token" style="color:#dcdcaa">digitDPContribution</span><span class="token" style="color:#d4d4d4">(</span><span>low</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">int</span><span class="token" style="color:#d4d4d4">,</span><span> high</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">int</span><span class="token" style="color:#d4d4d4">,</span><span> k</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">int</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">-</span><span class="token" style="color:#d4d4d4">&gt;</span><span> </span><span class="token" style="color:#ce9178">int</span><span class="token" style="color:#d4d4d4">:</span><span>
</span></span><span><span>    low_s </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#ce9178">list</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">map</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">int</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#ce9178">str</span><span class="token" style="color:#d4d4d4">(</span><span>low</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span>  </span><span class="token" style="color:#6a9955"># 避免在 dfs 中频繁调用 int()</span><span>
</span></span><span><span>    high_s </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#ce9178">list</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">map</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">int</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#ce9178">str</span><span class="token" style="color:#d4d4d4">(</span><span>high</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></span><span><span>    n </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#ce9178">len</span><span class="token" style="color:#d4d4d4">(</span><span>high_s</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></span><span><span>    diff_lh </span><span class="token" style="color:#d4d4d4">=</span><span> n </span><span class="token" style="color:#d4d4d4">-</span><span> </span><span class="token" style="color:#ce9178">len</span><span class="token" style="color:#d4d4d4">(</span><span>low_s</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></span><span>
</span><span><span>    </span><span class="token" style="color:#6a9955"># dfs 返回两个数：子树合法数字个数，子树数位总和</span><span>
</span></span><span><span>    </span><span class="token decorator annotation" style="color:#d4d4d4">@cache</span><span>
</span></span><span><span>    </span><span class="token" style="color:#569CD6">def</span><span> </span><span class="token" style="color:#dcdcaa">dfs</span><span class="token" style="color:#d4d4d4">(</span><span>i</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">int</span><span class="token" style="color:#d4d4d4">,</span><span> mask</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">int</span><span class="token" style="color:#d4d4d4">,</span><span> limit_low</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">bool</span><span class="token" style="color:#d4d4d4">,</span><span> limit_high</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">bool</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">-</span><span class="token" style="color:#d4d4d4">&gt;</span><span> Tuple</span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#ce9178">int</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#ce9178">int</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">:</span><span>
</span></span><span><span>        </span><span class="token" style="color:#569CD6">if</span><span> i </span><span class="token" style="color:#d4d4d4">==</span><span> n</span><span class="token" style="color:#d4d4d4">:</span><span>
</span></span><span><span>            </span><span class="token" style="color:#6a9955"># 如果没有特殊约束，那么能递归到终点的都是合法数字</span><span>
</span></span><span><span>            </span><span class="token" style="color:#569CD6">return</span><span> </span><span class="token" style="color:#b5cea8">1</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#b5cea8">0</span><span>
</span></span><span>
</span><span><span>        lo </span><span class="token" style="color:#d4d4d4">=</span><span> low_s</span><span class="token" style="color:#d4d4d4">[</span><span>i </span><span class="token" style="color:#d4d4d4">-</span><span> diff_lh</span><span class="token" style="color:#d4d4d4">]</span><span> </span><span class="token" style="color:#569CD6">if</span><span> limit_low </span><span class="token" style="color:#569CD6">and</span><span> i </span><span class="token" style="color:#d4d4d4">&gt;=</span><span> diff_lh </span><span class="token" style="color:#569CD6">else</span><span> </span><span class="token" style="color:#b5cea8">0</span><span>
</span></span><span><span>        hi </span><span class="token" style="color:#d4d4d4">=</span><span> high_s</span><span class="token" style="color:#d4d4d4">[</span><span>i</span><span class="token" style="color:#d4d4d4">]</span><span> </span><span class="token" style="color:#569CD6">if</span><span> limit_high </span><span class="token" style="color:#569CD6">else</span><span> </span><span class="token" style="color:#b5cea8">9</span><span>
</span></span><span>
</span><span><span>        cnt </span><span class="token" style="color:#d4d4d4">=</span><span> res </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#b5cea8">0</span><span>
</span></span><span><span>        start </span><span class="token" style="color:#d4d4d4">=</span><span> lo
</span></span><span>
</span><span><span>        </span><span class="token" style="color:#6a9955"># 如果前导零不影响答案，去掉这个 if block</span><span>
</span></span><span><span>        </span><span class="token" style="color:#569CD6">if</span><span> limit_low </span><span class="token" style="color:#569CD6">and</span><span> i </span><span class="token" style="color:#d4d4d4">&lt;</span><span> diff_lh</span><span class="token" style="color:#d4d4d4">:</span><span>
</span></span><span><span>            </span><span class="token" style="color:#6a9955"># 不填数字，上界不受约束</span><span>
</span></span><span><span>            cnt</span><span class="token" style="color:#d4d4d4">,</span><span> res </span><span class="token" style="color:#d4d4d4">=</span><span> dfs</span><span class="token" style="color:#d4d4d4">(</span><span>i </span><span class="token" style="color:#d4d4d4">+</span><span> </span><span class="token" style="color:#b5cea8">1</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#569cd6">True</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#569cd6">False</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></span><span><span>            start </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#b5cea8">1</span><span>
</span></span><span>
</span><span><span>        </span><span class="token" style="color:#569CD6">for</span><span> d </span><span class="token" style="color:#569CD6">in</span><span> </span><span class="token" style="color:#ce9178">range</span><span class="token" style="color:#d4d4d4">(</span><span>start</span><span class="token" style="color:#d4d4d4">,</span><span> hi </span><span class="token" style="color:#d4d4d4">+</span><span> </span><span class="token" style="color:#b5cea8">1</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">:</span><span>
</span></span><span><span>            new_mask </span><span class="token" style="color:#d4d4d4">=</span><span> mask </span><span class="token" style="color:#d4d4d4">|</span><span> </span><span class="token" style="color:#b5cea8">1</span><span> </span><span class="token" style="color:#d4d4d4">&lt;&lt;</span><span> d
</span></span><span><span>            </span><span class="token" style="color:#569CD6">if</span><span> new_mask</span><span class="token" style="color:#d4d4d4">.</span><span>bit_count</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">&gt;</span><span> k</span><span class="token" style="color:#d4d4d4">:</span><span>  </span><span class="token" style="color:#6a9955"># 不满足要求</span><span>
</span></span><span><span>                </span><span class="token" style="color:#569CD6">continue</span><span>
</span></span><span><span>            sub_cnt</span><span class="token" style="color:#d4d4d4">,</span><span> sub_sum </span><span class="token" style="color:#d4d4d4">=</span><span> dfs</span><span class="token" style="color:#d4d4d4">(</span><span>i </span><span class="token" style="color:#d4d4d4">+</span><span> </span><span class="token" style="color:#b5cea8">1</span><span class="token" style="color:#d4d4d4">,</span><span>
</span></span><span><span>                                   new_mask</span><span class="token" style="color:#d4d4d4">,</span><span>
</span></span><span><span>                                   limit_low </span><span class="token" style="color:#569CD6">and</span><span> d </span><span class="token" style="color:#d4d4d4">==</span><span> lo</span><span class="token" style="color:#d4d4d4">,</span><span>
</span></span><span><span>                                   limit_high </span><span class="token" style="color:#569CD6">and</span><span> d </span><span class="token" style="color:#d4d4d4">==</span><span> hi</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></span><span><span>            cnt </span><span class="token" style="color:#d4d4d4">+=</span><span> sub_cnt  </span><span class="token" style="color:#6a9955"># 累加子树的合法数字个数</span><span>
</span></span><span><span>            res </span><span class="token" style="color:#d4d4d4">+=</span><span> sub_sum  </span><span class="token" style="color:#6a9955"># 累加子树的数位总和</span><span>
</span></span><span><span>            res </span><span class="token" style="color:#d4d4d4">+=</span><span> d </span><span class="token" style="color:#d4d4d4">*</span><span> sub_cnt  </span><span class="token" style="color:#6a9955"># d 会出现在 sub_cnt 个数中（贡献法）</span><span>
</span></span><span>
</span><span><span>        </span><span class="token" style="color:#6a9955"># cnt %= MOD; res %= MOD</span><span>
</span></span><span><span>        </span><span class="token" style="color:#569CD6">return</span><span> cnt</span><span class="token" style="color:#d4d4d4">,</span><span> res
</span></span><span>
</span><span><span>    </span><span class="token" style="color:#569CD6">return</span><span> dfs</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#569cd6">True</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#569cd6">True</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#b5cea8">1</span><span class="token" style="color:#d4d4d4">]</span></span></code></pre><div class="absolute -right-1.5 -top-0.5 flex gap-2"><div class="z-base-1 hidden rounded border group-hover:block border-border-quaternary dark:border-border-quaternary bg-layer-02 dark:bg-layer-02"><div class="relative cursor-pointer flex h-[22px] w-[22px] items-center justify-center bg-layer-02 dark:bg-layer-02 hover:bg-fill-tertiary dark:hover:bg-fill-tertiary rounded-[4px]" data-state="closed"><div><div data-state="closed"><div class="relative text-[12px] leading-[normal] p-[1px] before:block before:h-3 before:w-3 h-3.5 w-3.5 text-text-primary dark:text-text-primary"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="clone" class="svg-inline--fa fa-clone absolute left-1/2 top-1/2 h-[1em] -translate-x-1/2 -translate-y-1/2 align-[-0.125em]" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M64 464H288c8.8 0 16-7.2 16-16V384h48v64c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V224c0-35.3 28.7-64 64-64h64v48H64c-8.8 0-16 7.2-16 16V448c0 8.8 7.2 16 16 16zM224 304H448c8.8 0 16-7.2 16-16V64c0-8.8-7.2-16-16-16H224c-8.8 0-16 7.2-16 16V288c0 8.8 7.2 16 16 16zm-64-16V64c0-35.3 28.7-64 64-64H448c35.3 0 64 28.7 64 64V288c0 35.3-28.7 64-64 64H224c-35.3 0-64-28.7-64-64z"></path></svg></div></div></div></div></div></div></div></div></div>
<ul>
<li><a href="https://leetcode.cn/problems/number-of-digit-one/" target="_blank">233. 数字 1 的个数</a></li>
<li><a href="https://leetcode.cn/problems/number-of-2s-in-range-lcci/" target="_blank">面试题 17.06. 2 出现的次数</a></li>
<li><a href="https://leetcode.cn/problems/maximum-number-that-sum-of-the-prices-is-less-than-or-equal-to-k/" target="_blank">3007. 价值和小于等于 K 的最大数字</a> 2258 做法不止一种</li>
<li><a href="https://leetcode.cn/problems/total-waviness-of-numbers-in-range-ii/" target="_blank">3753. 范围内总波动值 II</a> 2297</li>
</ul>
<h3 id="103-其他数位-dp">§10.3 其他数位 DP</h3>
<ul>
<li><a href="https://leetcode.cn/problems/count-binary-palindromic-numbers/" target="_blank">3677. 统计二进制回文数字的数目</a> 2223</li>
<li><a href="https://leetcode.cn/problems/smallest-divisible-digit-product-ii/" target="_blank">3348. 最小可整除数位乘积 II</a> 3101 只有下界</li>
</ul>
<h2 id="十一优化-dp">十一、优化 DP</h2>
<h3 id="111-前缀和优化-dp">§11.1 前缀和优化 DP</h3>
<ul>
<li><a href="https://leetcode.cn/problems/jump-game-vii/" target="_blank">1871. 跳跃游戏 VII</a> 1896 也可以用滑动窗口优化</li>
<li><a href="https://leetcode.cn/problems/number-of-people-aware-of-a-secret/" target="_blank">2327. 知道秘密的人数</a> 做到 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathcal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></li>
<li><a href="https://leetcode.cn/problems/number-of-zigzag-arrays-i/" target="_blank">3699. 锯齿形数组的总数 I</a> 2123</li>
<li><a href="https://leetcode.cn/problems/first-day-where-you-have-been-in-all-the-rooms/" target="_blank">1997. 访问完所有房间的第一天</a> 2260</li>
<li><a href="https://leetcode.cn/problems/k-inverse-pairs-array/" target="_blank">629. K 个逆序对数组</a></li>
<li><a href="https://leetcode.cn/problems/count-the-number-of-inversions/" target="_blank">3193. 统计逆序对的数目</a> 2266</li>
<li><a href="https://leetcode.cn/problems/sum-of-k-subarrays-with-length-at-least-m/" target="_blank">3473. 长度至少为 M 的 K 个子数组之和</a> 2274 划分型</li>
<li><a href="https://leetcode.cn/problems/find-the-count-of-monotonic-pairs-ii/" target="_blank">3251. 单调数组对的数目 II</a> 2323 也有组合数学做法</li>
<li><a href="https://leetcode.cn/problems/number-of-beautiful-partitions/" target="_blank">2478. 完美分割的方案数</a> 2344</li>
<li><a href="https://leetcode.cn/problems/new-21-game/" target="_blank">837. 新 21 点</a> 2350 也可以用滑动窗口优化</li>
<li><a href="https://leetcode.cn/problems/maximum-strength-of-k-disjoint-subarrays/" target="_blank">3077. K 个不相交子数组的最大能量值</a> 2557 划分型</li>
<li><a href="https://leetcode.cn/problems/find-the-original-typed-string-ii/" target="_blank">3333. 找到初始输入字符串 II</a> 2629 也有生成函数做法</li>
<li><a href="https://leetcode.cn/problems/count-of-sub-multisets-with-bounded-sum/" target="_blank">2902. 和带限制的子多重集合的数目</a> 2759</li>
<li><a href="https://leetcode.cn/problems/number-of-ways-to-separate-numbers/" target="_blank">1977. 划分数字的方案数</a> 2817</li>
<li><a href="https://leetcode.cn/problems/find-all-possible-stable-binary-arrays-ii/" target="_blank">3130. 找出所有稳定的二进制数组 II</a> 2825 也有组合数学做法</li>
</ul>
<h3 id="112-单调栈优化-dp">§11.2 单调栈优化 DP</h3>
<p>前置题单：<a href="https://leetcode.cn/circle/discuss/9oZFK9/" target="_blank">单调栈（矩形系列/字典序最小/贡献法）</a></p>
<ul>
<li><a href="https://leetcode.cn/problems/minimum-difficulty-of-a-job-schedule/" target="_blank">1335. 工作计划的最低难度</a> 2035</li>
<li><a href="https://leetcode.cn/problems/beautiful-towers-ii/" target="_blank">2866. 美丽塔 II</a> 2072</li>
<li><a href="https://leetcode.cn/problems/minimum-number-of-visited-cells-in-a-grid/" target="_blank">2617. 网格图中最少访问的格子数</a> 2582</li>
<li><a href="https://leetcode.cn/problems/maximum-number-of-books-you-can-take/" target="_blank">2355. 你能拿走的最大图书数量</a>（会员题）</li>
</ul>
<h3 id="113-单调队列优化-dp">§11.3 单调队列优化 DP</h3>
<p>一般用来维护一段转移来源的最值。</p>
<ol>
<li data-length="1">前提：区间右端点变大时，左端点也在变大（同滑动窗口）。</li>
<li data-length="1">转移前，去掉队首无用数据。</li>
<li data-length="1">计算转移（直接从队首转移）。</li>
<li data-length="1">把数据（一般是 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span>）插入队尾前，去掉队尾无用数据。</li>
</ol>
<ul>
<li><a href="https://leetcode.cn/problems/minimum-number-of-coins-for-fruits/" target="_blank">2944. 购买水果需要的最少金币数</a> 1709 做到 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathcal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></li>
<li><a href="https://leetcode.cn/problems/jump-game-vi/" target="_blank">1696. 跳跃游戏 VI</a> 1954</li>
<li><a href="https://leetcode.cn/problems/constrained-subsequence-sum/" target="_blank">1425. 带限制的子序列和</a> 2032</li>
<li><a href="https://leetcode.cn/problems/count-partitions-with-max-min-difference-at-most-k/" target="_blank">3578. 统计极差最大为 K 的分割方式数</a> 2033</li>
<li><a href="https://leetcode.cn/problems/guess-number-higher-or-lower-ii/" target="_blank">375. 猜数字大小 II</a> 做到 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em"></span><span class="mord mathcal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></li>
<li><a href="https://leetcode.cn/problems/delivering-boxes-from-storage-to-ports/" target="_blank">1687. 从仓库到码头运输箱子</a> 2610</li>
<li><a href="https://leetcode.cn/problems/minimum-total-distance-traveled/" target="_blank">2463. 最小移动总距离</a> 做到 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathcal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal">nm</span><span class="mclose">)</span></span></span></span></span>（注：还有 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathcal" style="margin-right:0.02778em">O</span><span class="mopen">((</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">m</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mop">lo<span style="margin-right:0.01389em">g</span></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">m</span><span class="mclose">))</span></span></span></span></span> 的反悔贪心做法）</li>
<li><a href="https://leetcode.cn/problems/minimum-sum-of-values-by-dividing-array/" target="_blank">3117. 划分数组得到最小的值之和</a> 2735</li>
<li><a href="https://leetcode.cn/problems/find-maximum-non-decreasing-array-length/" target="_blank">2945. 找到最大非递减数组的长度</a> 2943</li>
<li><a href="https://leetcode.cn/problems/minimum-number-of-coins-for-fruits-ii/" target="_blank">2969. 购买水果需要的最少金币数 II</a>（会员题）</li>
</ul>
<h3 id="114-树状数组线段树优化-dp">§11.4 树状数组/线段树优化 DP</h3>
<ul>
<li><a href="https://leetcode.cn/problems/best-team-with-no-conflicts/" target="_blank">1626. 无矛盾的最佳球队</a> 2027</li>
<li><a href="https://leetcode.cn/problems/longest-increasing-subsequence-ii/" target="_blank">2407. 最长递增子序列 II</a> 2280</li>
<li><a href="https://leetcode.cn/problems/maximum-number-of-jumps-to-reach-the-last-index/" target="_blank">2770. 达到末尾下标所需的最大跳跃次数</a> 见我题解下的 <a href="https://leetcode.cn/problems/maximum-number-of-jumps-to-reach-the-last-index/solutions/2336752/dong-tai-gui-hua-cong-ji-yi-hua-sou-suo-2ptkg/comments/2060234" target="_blank">评论</a></li>
<li><a href="https://leetcode.cn/problems/maximum-balanced-subsequence-sum/" target="_blank">2926. 平衡子序列的最大和</a> 2448</li>
<li><a href="https://leetcode.cn/problems/minimum-cost-to-split-an-array/" target="_blank">2547. 拆分数组的最小代价</a> 做到 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathcal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mop">lo<span style="margin-right:0.01389em">g</span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></li>
<li><a href="https://leetcode.cn/problems/sum-of-beautiful-subsequences/" target="_blank">3671. 子序列美丽值求和</a> 2647</li>
<li><a href="https://leetcode.cn/problems/subarrays-distinct-element-sum-of-squares-ii/" target="_blank">2916. 子数组不同元素数目的平方和 II</a> 2816 思路类似 2547 题</li>
</ul>
<h3 id="115-字典树优化-dp">§11.5 字典树优化 DP</h3>
<ul>
<li><a href="https://leetcode.cn/problems/word-break/" target="_blank">139. 单词拆分</a></li>
<li><a href="https://leetcode.cn/problems/extra-characters-in-a-string/" target="_blank">2707. 字符串中的额外字符</a></li>
<li><a href="https://leetcode.cn/problems/re-space-lcci/" target="_blank">面试题 17.13. 恢复空格</a></li>
<li><a href="https://leetcode.cn/problems/concatenated-words/" target="_blank">472. 连接词</a> 约 2300</li>
<li><a href="https://leetcode.cn/problems/minimum-cost-to-convert-string-ii/" target="_blank">2977. 转换字符串的最小成本 II</a> 2696</li>
</ul>
<h3 id="116-矩阵快速幂优化-dp">§11.6 矩阵快速幂优化 DP</h3>
<p>有两种类型的矩阵快速幂优化 DP：</p>
<ol>
<li data-length="1">线性 DP（常系数齐次线性递推），转移系数写在第一行，其余行 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">1</span></span></span></span></span>，例如 <a href="https://leetcode.cn/problems/climbing-stairs/" target="_blank">70</a>，<a href="https://leetcode.cn/problems/n-th-tribonacci-number/" target="_blank">1137</a>。<a href="https://leetcode.cn/problems/climbing-stairs/solutions/2560716/jiao-ni-yi-bu-bu-si-kao-dong-tai-gui-hua-7zm1/" target="_blank">讲解</a>。</li>
<li data-length="1">多维 DP 或者状态机 DP，转移系数可表示为一个 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em"></span><span class="mord mathnormal" style="margin-right:0.03148em">k</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal" style="margin-right:0.03148em">k</span></span></span></span></span> 大小的矩阵，例如 <a href="https://leetcode.cn/problems/knight-dialer/" target="_blank">935</a>。<a href="https://leetcode.cn/problems/knight-dialer/solutions/3004116/jiao-ni-yi-bu-bu-si-kao-dpcong-ji-yi-hua-x06l/" target="_blank">讲解</a>。</li>
</ol>
<p>时间复杂度一般为 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em"></span><span class="mord mathcal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em">k</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mop">lo<span style="margin-right:0.01389em">g</span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>。</p>
<p><strong>进阶做法</strong>：先用 <strong>Berlekamp-Massey 算法</strong>找规律，得到线性递推式，然后用 <strong>Kitamasa 算法</strong>（或者 Bostan-Mori 算法）优化。</p>
<p>请看我的知乎科普文章：</p>
<p><a href="/link/?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1966417899825665440" target="_blank">Berlekamp-Massey 算法：如何预测数列的下一项？</a></p>
<p><a href="/link/?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1964051212304364939" target="_blank">Kitamasa 算法：更快地计算线性递推的第 n 项</a></p>
<p>具体例子见 3700 题 <a href="https://leetcode.cn/problems/number-of-zigzag-arrays-ii/solutions/3794101/ju-zhen-kuai-su-mi-you-hua-dppythonnumpy-77e7/" target="_blank">我的题解的方法二</a>。</p>
<p>时间复杂度一般为 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em"></span><span class="mord mathcal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em">k</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mop">lo<span style="margin-right:0.01389em">g</span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>。</p>
<ul>
<li><a href="https://leetcode.cn/problems/climbing-stairs/" target="_blank">70. 爬楼梯</a></li>
<li><a href="https://leetcode.cn/problems/fibonacci-number/" target="_blank">509. 斐波那契数</a></li>
<li><a href="https://leetcode.cn/problems/n-th-tribonacci-number/" target="_blank">1137. 第 N 个泰波那契数</a></li>
<li><a href="https://leetcode.cn/problems/count-vowels-permutation/" target="_blank">1220. 统计元音字母序列的数目</a></li>
<li><a href="https://leetcode.cn/problems/student-attendance-record-ii/" target="_blank">552. 学生出勤记录 II</a></li>
<li><a href="https://leetcode.cn/problems/knight-dialer/" target="_blank">935. 骑士拨号器</a></li>
<li><a href="https://leetcode.cn/problems/domino-and-tromino-tiling/" target="_blank">790. 多米诺和托米诺平铺</a></li>
<li><a href="https://leetcode.cn/problems/number-of-ways-to-paint-n-3-grid/" target="_blank">1411. 给 N x 3 网格图涂色的方案数</a></li>
<li><a href="https://leetcode.cn/problems/painting-a-grid-with-three-different-colors/" target="_blank">1931. 用三种不同颜色为网格涂色</a></li>
<li><a href="https://leetcode.cn/problems/total-characters-in-string-after-transformations-ii/" target="_blank">3337. 字符串转换后的长度 II</a> 2412</li>
<li><a href="https://leetcode.cn/problems/number-of-zigzag-arrays-ii/" target="_blank">3700. 锯齿形数组的总数 II</a> 2435</li>
<li><a href="https://leetcode.cn/problems/string-transformation/" target="_blank">2851. 字符串转换</a> 2858</li>
<li><a href="https://leetcode.cn/problems/number-of-ways-to-reach-destination-in-the-grid/" target="_blank">2912. 在网格上移动到目的地的方法数</a>（会员题）</li>
</ul>
<h3 id="117-斜率优化-dp">§11.7 斜率优化 DP</h3>
<p>也叫凸包优化/凸壳优化（CHT，Convex Hull Trick）。</p>
<ul>
<li><a href="https://leetcode.cn/problems/find-the-minimum-amount-of-time-to-brew-potions/" target="_blank">3494. 酿造药水需要的最少总时间</a></li>
<li><a href="https://leetcode.cn/problems/minimum-cost-to-divide-array-into-subarrays/" target="_blank">3500. 将数组分割为子数组的最小代价</a></li>
<li><a href="https://leetcode.cn/problems/climbing-stairs-ii/" target="_blank">3693. 爬楼梯 II</a> 与 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.07153em">K</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">3</span></span></span></span></span> 无关的做法</li>
</ul>
<h3 id="118-wqs-二分优化-dp">§11.8 WQS 二分优化 DP</h3>
<p>把最多选 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal" style="margin-right:0.03148em">k</span></span></span></span></span> 个物品的问题（时间复杂度高）转换成选任意个物品的问题（时间复杂度低）。</p>
<p>一般时间复杂度为 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathcal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mop">lo<span style="margin-right:0.01389em">g</span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.10903em">U</span><span class="mclose">)</span></span></span></span></span> 或者 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathcal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mop">lo<span style="margin-right:0.01389em">g</span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>。</p>
<ul>
<li><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iv/" target="_blank">188. 买卖股票的最佳时机 IV</a></li>
<li><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-v/" target="_blank">3573. 买卖股票的最佳时机 V</a></li>
<li><a href="https://leetcode.cn/problems/minimum-white-tiles-after-covering-with-carpets/" target="_blank">2209. 用地毯覆盖后的最少白色砖块</a></li>
<li><a href="https://leetcode.cn/problems/maximize-cyclic-partition-score/" target="_blank">3743. 循环划分的最大得分</a></li>
</ul>
<p>此外「§5.3 约束划分个数」的部分题目也可以用 WQS 二分优化。</p>
<h3 id="119-其他优化-dp">§11.9 其他优化 DP</h3>
<ul>
<li><a href="https://leetcode.cn/problems/minimum-sum-after-divisible-sum-deletions/" target="_blank">3654. 删除可整除和后的最小数组和</a> 2039</li>
<li><a href="https://leetcode.cn/problems/maximum-number-of-points-with-cost/" target="_blank">1937. 扣分后的最大得分</a> 2106</li>
<li><a href="https://leetcode.cn/problems/maximum-strictly-increasing-cells-in-a-matrix/" target="_blank">2713. 矩阵中严格递增的单元格数</a> 2387</li>
<li><a href="https://leetcode.cn/problems/minimum-cost-path-with-teleportations/" target="_blank">3651. 带传送的最小路径成本</a> 2411</li>
<li><a href="https://leetcode.cn/problems/number-of-distinct-roll-sequences/" target="_blank">2318. 不同骰子序列的数目</a> 容斥优化（类似 CF1943D2）</li>
<li><a href="https://leetcode.cn/problems/maximum-total-reward-using-operations-ii/" target="_blank">3181. 执行操作可获得的最大总奖励 II</a> 2688 bitset 优化</li>
<li><a href="https://leetcode.cn/problems/check-if-there-is-a-valid-parentheses-string-path/" target="_blank">2267. 检查是否有合法括号字符串路径</a> 可以进一步地用 bitset 优化</li>
<li><a href="https://leetcode.cn/problems/construct-string-with-minimum-cost/" target="_blank">3213. 最小代价构造字符串</a> 字符串哈希 / 后缀数组 / AC 自动机优化</li>
<li><a href="https://leetcode.cn/problems/minimum-number-of-valid-strings-to-form-target-ii/" target="_blank">3292. 形成目标字符串需要的最少字符串数 II</a> 字符串哈希 / AC 自动机优化</li>
<li><a href="https://leetcode.cn/problems/maximize-cyclic-partition-score/" target="_blank">3743. 循环划分的最大得分</a> 闵可夫斯基和</li>
<li><a href="https://leetcode.cn/problems/qie-fen-shu-zu/" target="_blank">LCP 14. 切分数组</a></li>
<li><a href="https://leetcode.cn/problems/NfY1m5/" target="_blank">LCP 59. 搭桥过河</a> Slope Trick</li>
<li><a href="https://leetcode.cn/problems/make-array-non-decreasing-or-non-increasing/" target="_blank">2263. 数组变为有序的最小操作次数</a>（会员题）Slope Trick</li>
</ul>
<p>关于<strong>倍增算法</strong>，见 <a href="https://leetcode.cn/circle/discuss/K0n2gO/" target="_blank">题单</a> 的「§3.8 最近公共祖先（LCA）、倍增算法」。</p>
<h2 id="十二树形-dp">十二、树形 DP</h2>
<p><strong>注</strong>：可能有同学觉得树形 DP 没有重复访问同一个状态（重叠子问题），并不能算作 DP，而是算作普通的递归。这么说也有一定道理，不过考虑到思维方式和 DP 是一样的自底向上，所以仍然叫做树形 DP。此外，如果是自顶向下的递归做法，是存在重叠子问题的，一般要结合记忆化搜索实现。</p>
<h3 id="121-树的直径">§12.1 树的直径</h3>
<p>讲解：<a href="/link/?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV17o4y187h1%2F" target="_blank">树形 DP：树的直径【基础算法精讲 23】</a></p>
<ul>
<li><a href="https://leetcode.cn/problems/diameter-of-binary-tree/" target="_blank">543. 二叉树的直径</a></li>
<li><a href="https://leetcode.cn/problems/longest-univalue-path/" target="_blank">687. 最长同值路径</a></li>
<li><a href="https://leetcode.cn/problems/binary-tree-maximum-path-sum/" target="_blank">124. 二叉树中的最大路径和</a></li>
<li><a href="https://leetcode.cn/problems/amount-of-time-for-binary-tree-to-be-infected/" target="_blank">2385. 感染二叉树需要的总时间</a> 1711</li>
<li><a href="https://leetcode.cn/problems/longest-path-with-different-adjacent-characters/" target="_blank">2246. 相邻字符不同的最长路径</a> 2126</li>
<li><a href="https://leetcode.cn/problems/find-minimum-diameter-after-merging-two-trees/" target="_blank">3203. 合并两棵树后的最小直径</a> 2266</li>
<li><a href="https://leetcode.cn/problems/count-subtrees-with-max-distance-between-cities/" target="_blank">1617. 统计子树中城市之间最大距离</a> 2309</li>
<li><a href="https://leetcode.cn/problems/difference-between-maximum-and-minimum-price-sum/" target="_blank">2538. 最大价值和与最小价值和的差值</a> 2398</li>
<li><a href="https://leetcode.cn/problems/diameter-of-n-ary-tree/" target="_blank">1522. N 叉树的直径</a>（会员题）</li>
<li><a href="https://leetcode.cn/problems/tree-diameter/" target="_blank">1245. 树的直径</a>（会员题）</li>
<li><a href="https://leetcode.cn/problems/binary-tree-longest-consecutive-sequence-ii/" target="_blank">549. 二叉树最长连续序列 II</a>（会员题）</li>
<li><a href="https://leetcode.cn/problems/maximize-the-number-of-target-nodes-after-connecting-trees-i/" target="_blank">3372. 连接两棵树后最大目标节点数目 I</a> 算法优化</li>
</ul>
<blockquote>
<p>注：求直径也有两次 DFS 的做法。</p>
</blockquote>
<h3 id="122-树上最大独立集">§12.2 树上最大独立集</h3>
<p>讲解：<a href="/link/?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1vu4y1f7dn%2F" target="_blank">树形 DP：打家劫舍 III【基础算法精讲 24】</a></p>
<ul>
<li><a href="https://leetcode.cn/problems/house-robber-iii/" target="_blank">337. 打家劫舍 III</a>（没有上司的舞会）</li>
<li><a href="https://leetcode.cn/problems/minimize-the-total-price-of-the-trips/" target="_blank">2646. 最小化旅行的价格总和</a> 2238</li>
<li><a href="https://leetcode.cn/problems/subtree-inversion-sum/" target="_blank">3544. 子树反转和</a> 2545 记忆化搜索 / 树上刷表法</li>
<li><a href="https://leetcode.cn/problems/choose-edges-to-maximize-score-in-a-tree/" target="_blank">2378. 选择边来最大化树的得分</a>（会员题）</li>
</ul>
<h3 id="123-树上最小支配集">§12.3 树上最小支配集</h3>
<p>讲解：<a href="/link/?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1oF411U7qL%2F" target="_blank">树形 DP：监控二叉树【基础算法精讲 25】</a>，包含 968 的变形题。</p>
<ul>
<li><a href="https://leetcode.cn/problems/binary-tree-cameras/" target="_blank">968. 监控二叉树</a> 2124</li>
</ul>
<h3 id="124-换根-dp">§12.4 换根 DP</h3>
<blockquote>
<p>也叫二次扫描法。</p>
</blockquote>
<p>设 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span></span></span></span></span> 是 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">x</span></span></span></span></span> 的子节点。从「以 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">x</span></span></span></span></span> 为整棵树的根」变成「以 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span></span></span></span></span> 为整棵树的根」，发生了什么？</p>
<ol>
<li data-length="1">站在 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">x</span></span></span></span></span> 的视角，去掉子树 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span></span></span></span></span>。设剩余部分为 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.13889em">F</span></span></span></span></span>。</li>
<li data-length="1">以 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span></span></span></span></span> 为根时，<span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">x</span></span></span></span></span> 挂在 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span></span></span></span></span> 的下面，<span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.13889em">F</span></span></span></span></span> 变成 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span></span></span></span></span> 的一棵子树。</li>
</ol>
<p><a href="https://leetcode.cn/problems/sum-of-distances-in-tree/solution/tu-jie-yi-zhang-tu-miao-dong-huan-gen-dp-6bgb/" target="_blank">【图解】一张图秒懂换根 DP！</a></p>
<p>模板一：简单场景（3772 题）</p>
<div class="border-gray-3 dark:border-dark-gray-3 mb-6 overflow-hidden rounded-lg border text-sm"><div class="flex select-none overflow-x-auto bg-layer-2 dark:bg-dark-layer-2"><div class="font-menlo relative flex h-10 cursor-pointer items-center justify-center px-3 font-medium transition-all text-label-1 dark:text-dark-label-1 d8276">Python3</div><div class="font-menlo relative flex h-10 cursor-pointer items-center justify-center px-3 font-medium transition-all text-label-4 dark:text-dark-label-4 hover:text-label-1 dark:hover:text-dark-label-1 d8276">Java</div><div class="font-menlo relative flex h-10 cursor-pointer items-center justify-center px-3 font-medium transition-all text-label-4 dark:text-dark-label-4 hover:text-label-1 dark:hover:text-dark-label-1 d8276">C++</div><div class="font-menlo relative flex h-10 cursor-pointer items-center justify-center px-3 font-medium transition-all text-label-4 dark:text-dark-label-4 hover:text-label-1 dark:hover:text-dark-label-1 d8276">Go</div></div><div class="px-3 py-2.5 bg-fill-3 dark:bg-dark-fill-3"><div class="group relative" translate="no"><pre style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0;margin:0;overflow:auto;background:transparent"><code class="language-py" style="white-space:pre;color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token" style="color:#569CD6">class</span><span> </span><span class="token" style="color:#4ec9b0">Solution</span><span class="token" style="color:#d4d4d4">:</span><span>
</span></span><span><span>    </span><span class="token" style="color:#569CD6">def</span><span> </span><span class="token" style="color:#dcdcaa">maxSubgraphScore</span><span class="token" style="color:#d4d4d4">(</span><span>self</span><span class="token" style="color:#d4d4d4">,</span><span> n</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">int</span><span class="token" style="color:#d4d4d4">,</span><span> edges</span><span class="token" style="color:#d4d4d4">:</span><span> List</span><span class="token" style="color:#d4d4d4">[</span><span>List</span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#ce9178">int</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">,</span><span> good</span><span class="token" style="color:#d4d4d4">:</span><span> List</span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#ce9178">int</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">-</span><span class="token" style="color:#d4d4d4">&gt;</span><span> List</span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#ce9178">int</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">:</span><span>
</span></span><span><span>        g </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#d4d4d4">]</span><span> </span><span class="token" style="color:#569CD6">for</span><span> _ </span><span class="token" style="color:#569CD6">in</span><span> </span><span class="token" style="color:#ce9178">range</span><span class="token" style="color:#d4d4d4">(</span><span>n</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">]</span><span>
</span></span><span><span>        </span><span class="token" style="color:#569CD6">for</span><span> x</span><span class="token" style="color:#d4d4d4">,</span><span> y </span><span class="token" style="color:#569CD6">in</span><span> edges</span><span class="token" style="color:#d4d4d4">:</span><span>
</span></span><span><span>            g</span><span class="token" style="color:#d4d4d4">[</span><span>x</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">.</span><span>append</span><span class="token" style="color:#d4d4d4">(</span><span>y</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></span><span><span>            g</span><span class="token" style="color:#d4d4d4">[</span><span>y</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">.</span><span>append</span><span class="token" style="color:#d4d4d4">(</span><span>x</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></span><span>
</span><span><span>        </span><span class="token" style="color:#6a9955"># sub_score[x] 表示（以 0 为根时）包含 x 的子树 x 的最大得分</span><span>
</span></span><span><span>        sub_score </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">]</span><span> </span><span class="token" style="color:#d4d4d4">*</span><span> n
</span></span><span><span>        </span><span class="token" style="color:#6a9955"># 计算 sub_score[x]</span><span>
</span></span><span><span>        </span><span class="token" style="color:#569CD6">def</span><span> </span><span class="token" style="color:#dcdcaa">dfs</span><span class="token" style="color:#d4d4d4">(</span><span>x</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">int</span><span class="token" style="color:#d4d4d4">,</span><span> fa</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">int</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">-</span><span class="token" style="color:#d4d4d4">&gt;</span><span> </span><span class="token" style="color:#569cd6">None</span><span class="token" style="color:#d4d4d4">:</span><span>
</span></span><span><span>            sub_score</span><span class="token" style="color:#d4d4d4">[</span><span>x</span><span class="token" style="color:#d4d4d4">]</span><span> </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#b5cea8">1</span><span> </span><span class="token" style="color:#569CD6">if</span><span> good</span><span class="token" style="color:#d4d4d4">[</span><span>x</span><span class="token" style="color:#d4d4d4">]</span><span> </span><span class="token" style="color:#569CD6">else</span><span> </span><span class="token" style="color:#d4d4d4">-</span><span class="token" style="color:#b5cea8">1</span><span>  </span><span class="token" style="color:#6a9955"># sub_score[x] 一定包含 x</span><span>
</span></span><span><span>            </span><span class="token" style="color:#569CD6">for</span><span> y </span><span class="token" style="color:#569CD6">in</span><span> g</span><span class="token" style="color:#d4d4d4">[</span><span>x</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">:</span><span>
</span></span><span><span>                </span><span class="token" style="color:#569CD6">if</span><span> y </span><span class="token" style="color:#d4d4d4">!=</span><span> fa</span><span class="token" style="color:#d4d4d4">:</span><span>
</span></span><span><span>                    dfs</span><span class="token" style="color:#d4d4d4">(</span><span>y</span><span class="token" style="color:#d4d4d4">,</span><span> x</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></span><span><span>                    </span><span class="token" style="color:#6a9955"># 如果子树 y 的最大得分 &gt; 0，选子树 y，否则不选</span><span>
</span></span><span><span>                    sub_score</span><span class="token" style="color:#d4d4d4">[</span><span>x</span><span class="token" style="color:#d4d4d4">]</span><span> </span><span class="token" style="color:#d4d4d4">+=</span><span> </span><span class="token" style="color:#ce9178">max</span><span class="token" style="color:#d4d4d4">(</span><span>sub_score</span><span class="token" style="color:#d4d4d4">[</span><span>y</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></span><span><span>        dfs</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#d4d4d4">-</span><span class="token" style="color:#b5cea8">1</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></span><span>
</span><span><span>        ans </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">]</span><span> </span><span class="token" style="color:#d4d4d4">*</span><span> n
</span></span><span><span>        ans</span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">]</span><span> </span><span class="token" style="color:#d4d4d4">=</span><span> sub_score</span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">]</span><span>
</span></span><span><span>        </span><span class="token" style="color:#6a9955"># 对于 x 的儿子 y，计算包含 y 的子图最大得分</span><span>
</span></span><span><span>        </span><span class="token" style="color:#569CD6">def</span><span> </span><span class="token" style="color:#dcdcaa">reroot</span><span class="token" style="color:#d4d4d4">(</span><span>x</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">int</span><span class="token" style="color:#d4d4d4">,</span><span> fa</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">int</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">-</span><span class="token" style="color:#d4d4d4">&gt;</span><span> </span><span class="token" style="color:#569cd6">None</span><span class="token" style="color:#d4d4d4">:</span><span>
</span></span><span><span>            </span><span class="token" style="color:#569CD6">for</span><span> y </span><span class="token" style="color:#569CD6">in</span><span> g</span><span class="token" style="color:#d4d4d4">[</span><span>x</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">:</span><span>
</span></span><span><span>                </span><span class="token" style="color:#569CD6">if</span><span> y </span><span class="token" style="color:#d4d4d4">!=</span><span> fa</span><span class="token" style="color:#d4d4d4">:</span><span>
</span></span><span><span>                    </span><span class="token" style="color:#6a9955"># 从 ans[x] 中去掉子树 y，剩余部分记作 F</span><span>
</span></span><span><span>                    score_f </span><span class="token" style="color:#d4d4d4">=</span><span> ans</span><span class="token" style="color:#d4d4d4">[</span><span>x</span><span class="token" style="color:#d4d4d4">]</span><span> </span><span class="token" style="color:#d4d4d4">-</span><span> </span><span class="token" style="color:#ce9178">max</span><span class="token" style="color:#d4d4d4">(</span><span>sub_score</span><span class="token" style="color:#d4d4d4">[</span><span>y</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></span><span><span>                    </span><span class="token" style="color:#6a9955"># 换根后，x 挂在 y 的下面，F 变成 y 的一棵子树</span><span>
</span></span><span><span>                    </span><span class="token" style="color:#6a9955"># 计算 F 对 y 的贡献：如果 F 的最大得分 &gt; 0，选 F，否则不选</span><span>
</span></span><span><span>                    ans</span><span class="token" style="color:#d4d4d4">[</span><span>y</span><span class="token" style="color:#d4d4d4">]</span><span> </span><span class="token" style="color:#d4d4d4">=</span><span> sub_score</span><span class="token" style="color:#d4d4d4">[</span><span>y</span><span class="token" style="color:#d4d4d4">]</span><span> </span><span class="token" style="color:#d4d4d4">+</span><span> </span><span class="token" style="color:#ce9178">max</span><span class="token" style="color:#d4d4d4">(</span><span>score_f</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></span><span><span>                    reroot</span><span class="token" style="color:#d4d4d4">(</span><span>y</span><span class="token" style="color:#d4d4d4">,</span><span> x</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></span><span><span>        reroot</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#d4d4d4">-</span><span class="token" style="color:#b5cea8">1</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></span><span><span>        </span><span class="token" style="color:#569CD6">return</span><span> ans</span></span></code></pre><div class="absolute -right-1.5 -top-0.5 flex gap-2"><div class="z-base-1 hidden rounded border group-hover:block border-border-quaternary dark:border-border-quaternary bg-layer-02 dark:bg-layer-02"><div class="relative cursor-pointer flex h-[22px] w-[22px] items-center justify-center bg-layer-02 dark:bg-layer-02 hover:bg-fill-tertiary dark:hover:bg-fill-tertiary rounded-[4px]" data-state="closed"><div><div data-state="closed"><div class="relative text-[12px] leading-[normal] p-[1px] before:block before:h-3 before:w-3 h-3.5 w-3.5 text-text-primary dark:text-text-primary"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="clone" class="svg-inline--fa fa-clone absolute left-1/2 top-1/2 h-[1em] -translate-x-1/2 -translate-y-1/2 align-[-0.125em]" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M64 464H288c8.8 0 16-7.2 16-16V384h48v64c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V224c0-35.3 28.7-64 64-64h64v48H64c-8.8 0-16 7.2-16 16V448c0 8.8 7.2 16 16 16zM224 304H448c8.8 0 16-7.2 16-16V64c0-8.8-7.2-16-16-16H224c-8.8 0-16 7.2-16 16V288c0 8.8 7.2 16 16 16zm-64-16V64c0-35.3 28.7-64 64-64H448c35.3 0 64 28.7 64 64V288c0 35.3-28.7 64-64 64H224c-35.3 0-64-28.7-64-64z"></path></svg></div></div></div></div></div></div></div></div></div>
<p>模板二：维护最大次大（3241 题）</p>
<div class="border-gray-3 dark:border-dark-gray-3 mb-6 overflow-hidden rounded-lg border text-sm"><div class="flex select-none overflow-x-auto bg-layer-2 dark:bg-dark-layer-2"><div class="font-menlo relative flex h-10 cursor-pointer items-center justify-center px-3 font-medium transition-all text-label-1 dark:text-dark-label-1 d8276">Python3</div><div class="font-menlo relative flex h-10 cursor-pointer items-center justify-center px-3 font-medium transition-all text-label-4 dark:text-dark-label-4 hover:text-label-1 dark:hover:text-dark-label-1 d8276">Java</div><div class="font-menlo relative flex h-10 cursor-pointer items-center justify-center px-3 font-medium transition-all text-label-4 dark:text-dark-label-4 hover:text-label-1 dark:hover:text-dark-label-1 d8276">C++</div><div class="font-menlo relative flex h-10 cursor-pointer items-center justify-center px-3 font-medium transition-all text-label-4 dark:text-dark-label-4 hover:text-label-1 dark:hover:text-dark-label-1 d8276">Go</div></div><div class="px-3 py-2.5 bg-fill-3 dark:bg-dark-fill-3"><div class="group relative" translate="no"><pre style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0;margin:0;overflow:auto;background:transparent"><code class="language-py" style="white-space:pre;color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token" style="color:#569CD6">class</span><span> </span><span class="token" style="color:#4ec9b0">Solution</span><span class="token" style="color:#d4d4d4">:</span><span>
</span></span><span><span>    </span><span class="token" style="color:#569CD6">def</span><span> </span><span class="token" style="color:#dcdcaa">timeTaken</span><span class="token" style="color:#d4d4d4">(</span><span>self</span><span class="token" style="color:#d4d4d4">,</span><span> edges</span><span class="token" style="color:#d4d4d4">:</span><span> List</span><span class="token" style="color:#d4d4d4">[</span><span>List</span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#ce9178">int</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">-</span><span class="token" style="color:#d4d4d4">&gt;</span><span> List</span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#ce9178">int</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">:</span><span>
</span></span><span><span>        n </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#ce9178">len</span><span class="token" style="color:#d4d4d4">(</span><span>edges</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">+</span><span> </span><span class="token" style="color:#b5cea8">1</span><span>
</span></span><span><span>        g </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#d4d4d4">]</span><span> </span><span class="token" style="color:#569CD6">for</span><span> _ </span><span class="token" style="color:#569CD6">in</span><span> </span><span class="token" style="color:#ce9178">range</span><span class="token" style="color:#d4d4d4">(</span><span>n</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">]</span><span>
</span></span><span><span>        </span><span class="token" style="color:#569CD6">for</span><span> x</span><span class="token" style="color:#d4d4d4">,</span><span> y </span><span class="token" style="color:#569CD6">in</span><span> edges</span><span class="token" style="color:#d4d4d4">:</span><span>
</span></span><span><span>            g</span><span class="token" style="color:#d4d4d4">[</span><span>x</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">.</span><span>append</span><span class="token" style="color:#d4d4d4">(</span><span>y</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></span><span><span>            g</span><span class="token" style="color:#d4d4d4">[</span><span>y</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">.</span><span>append</span><span class="token" style="color:#d4d4d4">(</span><span>x</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></span><span>
</span><span><span>        </span><span class="token" style="color:#6a9955"># sub_res[x] 保存子树 x 的最大深度，次大深度，以及最大深度要往哪个儿子走</span><span>
</span></span><span><span>        sub_res </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#569cd6">None</span><span class="token" style="color:#d4d4d4">]</span><span> </span><span class="token" style="color:#d4d4d4">*</span><span> n
</span></span><span><span>        </span><span class="token" style="color:#6a9955"># 计算 sub_res[x]</span><span>
</span></span><span><span>        </span><span class="token" style="color:#569CD6">def</span><span> </span><span class="token" style="color:#dcdcaa">dfs</span><span class="token" style="color:#d4d4d4">(</span><span>x</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">int</span><span class="token" style="color:#d4d4d4">,</span><span> fa</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">int</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">-</span><span class="token" style="color:#d4d4d4">&gt;</span><span> </span><span class="token" style="color:#569cd6">None</span><span class="token" style="color:#d4d4d4">:</span><span>
</span></span><span><span>            max_d </span><span class="token" style="color:#d4d4d4">=</span><span> max_d2 </span><span class="token" style="color:#d4d4d4">=</span><span> my </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#b5cea8">0</span><span>
</span></span><span><span>            </span><span class="token" style="color:#569CD6">for</span><span> y </span><span class="token" style="color:#569CD6">in</span><span> g</span><span class="token" style="color:#d4d4d4">[</span><span>x</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">:</span><span>
</span></span><span><span>                </span><span class="token" style="color:#569CD6">if</span><span> y </span><span class="token" style="color:#d4d4d4">==</span><span> fa</span><span class="token" style="color:#d4d4d4">:</span><span>
</span></span><span><span>                    </span><span class="token" style="color:#569CD6">continue</span><span>
</span></span><span><span>                dfs</span><span class="token" style="color:#d4d4d4">(</span><span>y</span><span class="token" style="color:#d4d4d4">,</span><span> x</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></span><span><span>                w </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#b5cea8">2</span><span> </span><span class="token" style="color:#d4d4d4">-</span><span> y </span><span class="token" style="color:#d4d4d4">%</span><span> </span><span class="token" style="color:#b5cea8">2</span><span>  </span><span class="token" style="color:#6a9955"># 从 x 到 y 的边权</span><span>
</span></span><span><span>                max_y </span><span class="token" style="color:#d4d4d4">=</span><span> sub_res</span><span class="token" style="color:#d4d4d4">[</span><span>y</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">]</span><span> </span><span class="token" style="color:#d4d4d4">+</span><span> w  </span><span class="token" style="color:#6a9955"># 从 x 出发，往 y 方向的最大深度</span><span>
</span></span><span><span>                </span><span class="token" style="color:#569CD6">if</span><span> max_y </span><span class="token" style="color:#d4d4d4">&gt;</span><span> max_d</span><span class="token" style="color:#d4d4d4">:</span><span>
</span></span><span><span>                    max_d2 </span><span class="token" style="color:#d4d4d4">=</span><span> max_d
</span></span><span><span>                    max_d </span><span class="token" style="color:#d4d4d4">=</span><span> max_y
</span></span><span><span>                    my </span><span class="token" style="color:#d4d4d4">=</span><span> y
</span></span><span><span>                </span><span class="token" style="color:#569CD6">elif</span><span> max_y </span><span class="token" style="color:#d4d4d4">&gt;</span><span> max_d2</span><span class="token" style="color:#d4d4d4">:</span><span>
</span></span><span><span>                    max_d2 </span><span class="token" style="color:#d4d4d4">=</span><span> max_y
</span></span><span><span>            sub_res</span><span class="token" style="color:#d4d4d4">[</span><span>x</span><span class="token" style="color:#d4d4d4">]</span><span> </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span>max_d</span><span class="token" style="color:#d4d4d4">,</span><span> max_d2</span><span class="token" style="color:#d4d4d4">,</span><span> my</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></span><span><span>        dfs</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#d4d4d4">-</span><span class="token" style="color:#b5cea8">1</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></span><span>
</span><span><span>        </span><span class="token" style="color:#6a9955"># ans[x] 表示当 x 是树根时，整棵树的最大深度</span><span>
</span></span><span><span>        ans </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">]</span><span> </span><span class="token" style="color:#d4d4d4">*</span><span> n
</span></span><span><span>        </span><span class="token" style="color:#6a9955"># 计算 ans[x]</span><span>
</span></span><span><span>        </span><span class="token" style="color:#569CD6">def</span><span> </span><span class="token" style="color:#dcdcaa">reroot</span><span class="token" style="color:#d4d4d4">(</span><span>x</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">int</span><span class="token" style="color:#d4d4d4">,</span><span> fa</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">int</span><span class="token" style="color:#d4d4d4">,</span><span> from_up</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">int</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">-</span><span class="token" style="color:#d4d4d4">&gt;</span><span> </span><span class="token" style="color:#569cd6">None</span><span class="token" style="color:#d4d4d4">:</span><span>
</span></span><span><span>            max_d</span><span class="token" style="color:#d4d4d4">,</span><span> max_d2</span><span class="token" style="color:#d4d4d4">,</span><span> my </span><span class="token" style="color:#d4d4d4">=</span><span> sub_res</span><span class="token" style="color:#d4d4d4">[</span><span>x</span><span class="token" style="color:#d4d4d4">]</span><span>
</span></span><span><span>            ans</span><span class="token" style="color:#d4d4d4">[</span><span>x</span><span class="token" style="color:#d4d4d4">]</span><span> </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#ce9178">max</span><span class="token" style="color:#d4d4d4">(</span><span>max_d</span><span class="token" style="color:#d4d4d4">,</span><span> from_up</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></span><span><span>            </span><span class="token" style="color:#569CD6">for</span><span> y </span><span class="token" style="color:#569CD6">in</span><span> g</span><span class="token" style="color:#d4d4d4">[</span><span>x</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">:</span><span>
</span></span><span><span>                </span><span class="token" style="color:#569CD6">if</span><span> y </span><span class="token" style="color:#d4d4d4">==</span><span> fa</span><span class="token" style="color:#d4d4d4">:</span><span>
</span></span><span><span>                    </span><span class="token" style="color:#569CD6">continue</span><span>
</span></span><span><span>                w </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#b5cea8">2</span><span> </span><span class="token" style="color:#d4d4d4">-</span><span> x </span><span class="token" style="color:#d4d4d4">%</span><span> </span><span class="token" style="color:#b5cea8">2</span><span>  </span><span class="token" style="color:#6a9955"># 从 y 到 x 的边权</span><span>
</span></span><span><span>                mx </span><span class="token" style="color:#d4d4d4">=</span><span> max_d </span><span class="token" style="color:#569CD6">if</span><span> y </span><span class="token" style="color:#d4d4d4">!=</span><span> my </span><span class="token" style="color:#569CD6">else</span><span> max_d2
</span></span><span><span>                </span><span class="token" style="color:#6a9955"># 站在 x 的角度，不往 y 走，能走多远？</span><span>
</span></span><span><span>                </span><span class="token" style="color:#6a9955"># 要么往上走（from_up），要么往除了 y 的其余子树走（mx），二者取最大值</span><span>
</span></span><span><span>                reroot</span><span class="token" style="color:#d4d4d4">(</span><span>y</span><span class="token" style="color:#d4d4d4">,</span><span> x</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#ce9178">max</span><span class="token" style="color:#d4d4d4">(</span><span>from_up</span><span class="token" style="color:#d4d4d4">,</span><span> mx</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">+</span><span> w</span><span class="token" style="color:#d4d4d4">)</span><span>  </span><span class="token" style="color:#6a9955"># 对于 y 来说，加上从 y 到 x 的边权 w</span><span>
</span></span><span><span>        reroot</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#d4d4d4">-</span><span class="token" style="color:#b5cea8">1</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">)</span><span>
</span></span><span><span>        </span><span class="token" style="color:#569CD6">return</span><span> ans</span></span></code></pre><div class="absolute -right-1.5 -top-0.5 flex gap-2"><div class="z-base-1 hidden rounded border group-hover:block border-border-quaternary dark:border-border-quaternary bg-layer-02 dark:bg-layer-02"><div class="relative cursor-pointer flex h-[22px] w-[22px] items-center justify-center bg-layer-02 dark:bg-layer-02 hover:bg-fill-tertiary dark:hover:bg-fill-tertiary rounded-[4px]" data-state="closed"><div><div data-state="closed"><div class="relative text-[12px] leading-[normal] p-[1px] before:block before:h-3 before:w-3 h-3.5 w-3.5 text-text-primary dark:text-text-primary"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="clone" class="svg-inline--fa fa-clone absolute left-1/2 top-1/2 h-[1em] -translate-x-1/2 -translate-y-1/2 align-[-0.125em]" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M64 464H288c8.8 0 16-7.2 16-16V384h48v64c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V224c0-35.3 28.7-64 64-64h64v48H64c-8.8 0-16 7.2-16 16V448c0 8.8 7.2 16 16 16zM224 304H448c8.8 0 16-7.2 16-16V64c0-8.8-7.2-16-16-16H224c-8.8 0-16 7.2-16 16V288c0 8.8 7.2 16 16 16zm-64-16V64c0-35.3 28.7-64 64-64H448c35.3 0 64 28.7 64 64V288c0 35.3-28.7 64-64 64H224c-35.3 0-64-28.7-64-64z"></path></svg></div></div></div></div></div></div></div></div></div>
<ul>
<li><a href="https://leetcode.cn/problems/sum-of-distances-in-tree/" target="_blank">834. 树中距离之和</a> 2197</li>
<li><a href="https://leetcode.cn/problems/count-number-of-possible-root-nodes/" target="_blank">2581. 统计可能的树根数目</a> 2228</li>
<li><a href="https://leetcode.cn/problems/maximum-subgraph-score-in-a-tree/" target="_blank">3772. 子图的最大得分</a> 2235</li>
<li><a href="https://leetcode.cn/problems/minimum-edge-reversals-so-every-node-is-reachable/" target="_blank">2858. 可以到达每一个节点的最少边反转次数</a> 2295</li>
<li><a href="https://leetcode.cn/problems/minimum-height-trees/" target="_blank">310. 最小高度树</a> 也可以用拓扑排序做</li>
<li><a href="https://leetcode.cn/problems/time-taken-to-mark-all-nodes/" target="_blank">3241. 标记所有节点需要的时间</a> 2522</li>
<li><a href="https://leetcode.cn/problems/maximize-the-number-of-target-nodes-after-connecting-trees-i/" target="_blank">3372. 连接两棵树后最大目标节点数目 I</a> 做到 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathcal" style="margin-right:0.02778em">O</span><span class="mopen">((</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">m</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.03148em">k</span><span class="mclose">)</span></span></span></span></span>，解决 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">n</span></span></span></span></span> 和 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">m</span></span></span></span></span> 很大但 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal" style="margin-right:0.03148em">k</span></span></span></span></span> 很小的场景</li>
</ul>
<blockquote>
<p><strong>注</strong>：前后缀分解，可以视作一条链上的换根 DP。</p>
</blockquote>
<h3 id="125-其他树形-dp">§12.5 其他树形 DP</h3>
<ul>
<li><a href="https://leetcode.cn/problems/maximum-score-after-applying-operations-on-a-tree/" target="_blank">2925. 在树上执行操作以后得到的最大分数</a> 1940</li>
<li><a href="https://leetcode.cn/problems/find-the-maximum-sum-of-node-values/" target="_blank">3068. 最大节点价值之和</a> 2268</li>
<li><a href="https://leetcode.cn/problems/maximum-points-after-collecting-coins-from-all-nodes/" target="_blank">2920. 收集所有金币可获得的最大积分</a> 2351 记忆化搜索</li>
<li><a href="https://leetcode.cn/problems/maximum-good-subtree-score/" target="_blank">3575. 最大好子树分数</a> 2360</li>
<li><a href="https://leetcode.cn/problems/maximum-profit-from-trading-stocks-with-discounts/" target="_blank">3562. 折扣价交易股票的最大利润</a> 2458 背包</li>
<li><a href="https://leetcode.cn/problems/count-ways-to-build-rooms-in-an-ant-colony/" target="_blank">1916. 统计为蚁群构筑房间的不同顺序</a> 2486</li>
<li><a href="https://leetcode.cn/problems/maximize-sum-of-weights-after-edge-removals/" target="_blank">3367. 移除边之后的权重最大和</a> 2602</li>
<li><a href="https://leetcode.cn/problems/er-cha-shu-ren-wu-diao-du/" target="_blank">LCP 10. 二叉树任务调度</a></li>
<li><a href="https://leetcode.cn/problems/er-cha-shu-ran-se-UGC/" target="_blank">LCP 34. 二叉树染色</a></li>
<li><a href="https://leetcode.cn/problems/U7WvvU/" target="_blank">LCP 64. 二叉树灯饰</a></li>
<li><a href="https://leetcode.cn/problems/minimum-flips-in-binary-tree-to-get-result/" target="_blank">2313. 二叉树中得到结果所需的最少翻转次数</a>（会员题）</li>
</ul>
<h2 id="十三图-dp">十三、图 DP</h2>
<ul>
<li><a href="https://leetcode.cn/problems/shortest-distance-after-road-addition-queries-i/" target="_blank">3243. 新增道路查询后的最短距离 I</a> 1568</li>
<li><a href="https://leetcode.cn/problems/cheapest-flights-within-k-stops/" target="_blank">787. K 站中转内最便宜的航班</a> 1786</li>
<li><a href="https://leetcode.cn/problems/number-of-restricted-paths-from-first-to-last-node/" target="_blank">1786. 从第一个节点出发到最后一个节点的受限路径数</a> 2079</li>
<li><a href="https://leetcode.cn/problems/parallel-courses-iii/" target="_blank">2050. 并行课程 III</a> 2084 <strong>DAG</strong></li>
<li><a href="https://leetcode.cn/problems/network-recovery-pathways/" target="_blank">3620. 恢复网络路径</a> <strong>DAG</strong></li>
<li><a href="https://leetcode.cn/problems/number-of-ways-to-arrive-at-destination/" target="_blank">1976. 到达目的地的方案数</a> 2095</li>
<li><a href="https://leetcode.cn/problems/maximum-weighted-k-edge-path/" target="_blank">3543. K 条边路径的最大边权和</a> 2110 <strong>DAG</strong> bitset</li>
<li><a href="https://leetcode.cn/problems/largest-color-value-in-a-directed-graph/" target="_blank">1857. 有向图中最大颜色值</a> 2313 <strong>DAG</strong></li>
<li><a href="https://leetcode.cn/problems/minimum-cost-to-reach-destination-in-time/" target="_blank">1928. 规定时间内到达终点的最小花费</a> 2413</li>
<li><a href="https://leetcode.cn/problems/cat-and-mouse/" target="_blank">913. 猫和老鼠</a> 2800 拓扑序</li>
<li><a href="https://leetcode.cn/problems/cat-and-mouse-ii/" target="_blank">1728. 猫和老鼠 II</a> 2849 拓扑序</li>
<li><a href="https://leetcode.cn/problems/chuan-di-xin-xi/" target="_blank">LCP 07. 传递信息</a></li>
<li><a href="https://leetcode.cn/problems/the-most-similar-path-in-a-graph/" target="_blank">1548. 图中最相似的路径</a>（会员题）</li>
</ul>
<p>另见<a href="https://leetcode.cn/circle/discuss/01LUak/" target="_blank">【题单】图论算法</a> 中的「全源最短路：Floyd」，本质是多维 DP。</p>
<h2 id="十四博弈-dp">十四、博弈 DP</h2>
<ul>
<li><a href="https://leetcode.cn/problems/divisor-game/" target="_blank">1025. 除数博弈</a> 1435 有数学做法</li>
<li><a href="https://leetcode.cn/problems/stone-game/" target="_blank">877. 石子游戏</a> 1590 有数学做法</li>
<li><a href="https://leetcode.cn/problems/predict-the-winner/" target="_blank">486. 预测赢家</a></li>
<li><a href="https://leetcode.cn/problems/stone-game-iv/" target="_blank">1510. 石子游戏 IV</a> 1787</li>
<li><a href="https://leetcode.cn/problems/stone-game-vii/" target="_blank">1690. 石子游戏 VII</a> 1951</li>
<li><a href="https://leetcode.cn/problems/stone-game-iii/" target="_blank">1406. 石子游戏 III</a> 2027</li>
<li><a href="https://leetcode.cn/problems/stone-game-ii/" target="_blank">1140. 石子游戏 II</a> 2035</li>
<li><a href="https://leetcode.cn/problems/stone-game-v/" target="_blank">1563. 石子游戏 V</a> 2087</li>
<li><a href="https://leetcode.cn/problems/can-i-win/" target="_blank">464. 我能赢吗</a></li>
<li><a href="https://leetcode.cn/problems/stone-game-viii/" target="_blank">1872. 石子游戏 VIII</a> 2440</li>
<li><a href="https://leetcode.cn/problems/cat-and-mouse/" target="_blank">913. 猫和老鼠</a> 2800</li>
<li><a href="https://leetcode.cn/problems/cat-and-mouse-ii/" target="_blank">1728. 猫和老鼠 II</a> 2849</li>
<li><a href="https://leetcode.cn/problems/flip-game-ii/" target="_blank">294. 翻转游戏 II</a>（会员题）</li>
</ul>
<h2 id="十五概率期望-dp">十五、概率/期望 DP</h2>
<ul>
<li><a href="https://leetcode.cn/problems/knight-probability-in-chessboard/" target="_blank">688. 骑士在棋盘上的概率</a></li>
<li><a href="https://leetcode.cn/problems/new-21-game/" target="_blank">837. 新 21 点</a> 2350</li>
<li><a href="https://leetcode.cn/problems/probability-of-a-two-boxes-having-the-same-number-of-distinct-balls/" target="_blank">1467. 两个盒子中球的颜色数相同的概率</a> 2357</li>
<li><a href="https://leetcode.cn/problems/soup-servings/" target="_blank">808. 分汤</a> 2397</li>
<li><a href="https://leetcode.cn/problems/nge-tou-zi-de-dian-shu-lcof/" target="_blank">LCR 185. 统计结果概率</a></li>
<li><a href="https://leetcode.cn/contest/ubiquant2022/problems/I3Gm2h/" target="_blank">九坤-04. 筹码游戏</a></li>
<li><a href="https://leetcode.cn/problems/toss-strange-coins/" target="_blank">1230. 抛掷硬币</a>（会员题）</li>
</ul>
<h2 id="专题输出具体方案打印方案">专题：输出具体方案（打印方案）</h2>
<p>注意这些题目和回溯的区别，某些回溯题目要求输出<strong>所有</strong>方案，这里只要求输出<strong>一个</strong>。</p>
<p><a href="https://leetcode.cn/problems/shortest-common-supersequence/solution/cong-di-gui-dao-di-tui-jiao-ni-yi-bu-bu-auy8z/" target="_blank">讲解</a></p>
<ul>
<li><a href="https://leetcode.cn/problems/largest-divisible-subset/" target="_blank">368. 最大整除子集</a></li>
<li><a href="https://leetcode.cn/problems/largest-multiple-of-three/" target="_blank">1363. 形成三的最大倍数</a> 1823 字典序</li>
<li><a href="https://leetcode.cn/problems/form-largest-integer-with-digits-that-add-up-to-target/" target="_blank">1449. 数位成本和为目标值的最大数字</a> 1927 字典序</li>
<li><a href="https://leetcode.cn/problems/shortest-common-supersequence/" target="_blank">1092. 最短公共超序列</a> 1977</li>
<li><a href="https://leetcode.cn/problems/find-the-shortest-superstring/" target="_blank">943. 最短超级串</a> 2186</li>
<li><a href="https://leetcode.cn/problems/smallest-sufficient-team/" target="_blank">1125. 最小的必要团队</a> 2251</li>
<li><a href="https://leetcode.cn/problems/concatenated-divisibility/" target="_blank">3533. 判断连接可整除性</a> 2257 字典序 暴搜</li>
<li><a href="https://leetcode.cn/problems/find-the-largest-palindrome-divisible-by-k/" target="_blank">3260. 找出最大的 N 位 K 回文数</a> 2370 字典序 暴搜</li>
<li><a href="https://leetcode.cn/problems/find-the-minimum-cost-array-permutation/" target="_blank">3149. 找出分数最低的排列</a> 2642 字典序</li>
<li><a href="https://leetcode.cn/problems/minimum-cost-good-caption/" target="_blank">3441. 变成好标题的最少代价</a> 2765 字典序</li>
<li><a href="https://leetcode.cn/problems/smallest-divisible-digit-product-ii/" target="_blank">3348. 最小可整除数位乘积 II</a> 3101 字典序 暴搜</li>
<li><a href="https://leetcode.cn/problems/coin-path/" target="_blank">656. 金币路径</a>（会员题）字典序</li>
<li><a href="https://leetcode.cn/problems/encode-string-with-shortest-length/" target="_blank">471. 编码最短长度的字符串</a>（会员题）</li>
</ul>
<h2 id="专题前后缀分解">专题：前后缀分解</h2>
<p>部分题目也可以用状态机 DP 解决。</p>
<p>如果涉及到的只是若干元素，而不是前缀/后缀这样的一段元素，也可以用「枚举右，维护左」思考，详见数据结构题单。</p>
<ul>
<li><a href="https://leetcode.cn/problems/find-pivot-index/" target="_blank">724. 寻找数组的中心下标</a> 做到 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathcal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></li>
<li><a href="https://leetcode.cn/problems/find-the-middle-index-in-array/" target="_blank">1991. 找到数组的中间位置</a> 同 724 题</li>
<li><a href="https://leetcode.cn/problems/equal-score-substrings/" target="_blank">3707. 相等子字符串分数</a> 1262</li>
<li><a href="https://leetcode.cn/problems/number-of-ways-to-split-array/" target="_blank">2270. 分割数组的方案数</a> 1334</li>
<li><a href="https://leetcode.cn/problems/minimum-average-difference/" target="_blank">2256. 最小平均差</a> 1395</li>
<li><a href="https://leetcode.cn/problems/maximum-score-after-splitting-a-string/" target="_blank">1422. 分割字符串的最大得分</a> 做到 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathcal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></li>
<li><a href="https://leetcode.cn/problems/product-of-array-except-self/" target="_blank">238. 除自身以外数组的乘积</a></li>
<li><a href="https://leetcode.cn/problems/longest-subarray-of-1s-after-deleting-one-element/" target="_blank">1493. 删掉一个元素以后全为 1 的最长子数组</a> 1423</li>
<li><a href="https://leetcode.cn/problems/longest-mountain-in-array/" target="_blank">845. 数组中的最长山脉</a> 1437 也可以分组循环</li>
<li><a href="https://leetcode.cn/problems/sum-of-beauty-in-the-array/" target="_blank">2012. 数组美丽值求和</a> 1468</li>
<li><a href="https://leetcode.cn/problems/minimum-sum-of-mountain-triplets-ii/" target="_blank">2909. 元素和最小的山形三元组 II</a> 1479</li>
<li><a href="https://leetcode.cn/problems/minimum-penalty-for-a-shop/" target="_blank">2483. 商店的最少代价</a> 1495</li>
<li><a href="https://leetcode.cn/problems/number-of-good-ways-to-split-a-string/" target="_blank">1525. 字符串的好分割数目</a> 1500</li>
<li><a href="https://leetcode.cn/problems/count-special-triplets/" target="_blank">3583. 统计特殊三元组</a> 1510</li>
<li><a href="https://leetcode.cn/problems/make-array-elements-equal-to-zero/" target="_blank">3354. 使数组元素等于零</a> 做到 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathcal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></li>
<li><a href="https://leetcode.cn/problems/unique-length-3-palindromic-subsequences/" target="_blank">1930. 长度为 3 的不同回文子序列</a> 1533</li>
<li><a href="https://leetcode.cn/problems/maximum-value-of-an-ordered-triplet-ii/" target="_blank">2874. 有序三元组中的最大值 II</a> 1583</li>
<li><a href="https://leetcode.cn/problems/ways-to-make-a-fair-array/" target="_blank">1664. 生成平衡数组的方案数</a> 1590</li>
<li><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iii/" target="_blank">123. 买卖股票的最佳时机 III</a> 拆分成两个 121 题</li>
<li><a href="https://leetcode.cn/problems/split-array-with-minimum-difference/" target="_blank">3698. 分割数组得到最小绝对差</a> 1649</li>
<li><a href="https://leetcode.cn/problems/longest-common-prefix-between-adjacent-strings-after-removals/" target="_blank">3598. 相邻字符串之间的最长公共前缀</a> 1655</li>
<li><a href="https://leetcode.cn/problems/number-of-ways-to-select-buildings/" target="_blank">2222. 选择建筑的方案数</a> 1657</li>
<li><a href="https://leetcode.cn/problems/maximum-sum-of-two-non-overlapping-subarrays/" target="_blank">1031. 两个无重叠子数组的最大和</a> 1680</li>
<li><a href="https://leetcode.cn/problems/maximum-sum-of-3-non-overlapping-subarrays/" target="_blank">689. 三个无重叠子数组的最大和</a></li>
<li><a href="https://leetcode.cn/problems/find-all-good-indices/" target="_blank">2420. 找到所有好下标</a> 1695</li>
<li><a href="https://leetcode.cn/problems/find-good-days-to-rob-the-bank/" target="_blank">2100. 适合野炊的日子</a> 1702</li>
<li><a href="https://leetcode.cn/problems/flip-string-to-monotone-increasing/" target="_blank">926. 将字符串翻转到单调递增</a></li>
<li><a href="https://leetcode.cn/problems/increasing-triplet-subsequence/" target="_blank">334. 递增的三元子序列</a></li>
<li><a href="https://leetcode.cn/problems/minimum-deletions-to-make-string-balanced/" target="_blank">1653. 使字符串平衡的最少删除次数</a> 1794</li>
<li><a href="https://leetcode.cn/problems/maximum-subarray-sum-with-one-deletion/" target="_blank">1186. 删除一次得到子数组最大和</a> 1799</li>
<li><a href="https://leetcode.cn/problems/longest-non-decreasing-subarray-after-replacing-at-most-one-element/" target="_blank">3738. 替换至多一个元素后最长非递减子数组</a> 1811</li>
<li><a href="https://leetcode.cn/problems/trapping-rain-water/" target="_blank">42. 接雨水</a>（<a href="/link/?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1Qg411q7ia%2F%3Ft%3D3m05s" target="_blank">讲解</a>）</li>
<li><a href="https://leetcode.cn/problems/difference-of-number-of-distinct-values-on-diagonals/" target="_blank">2711. 对角线上不同值的数量差</a> 做到 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathcal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal">mn</span><span class="mclose">)</span></span></span></span></span></li>
<li><a href="https://leetcode.cn/problems/find-two-non-overlapping-sub-arrays-each-with-target-sum/" target="_blank">1477. 找两个和为目标值且不重叠的子数组</a> 1851</li>
<li><a href="https://leetcode.cn/problems/maximum-or/" target="_blank">2680. 最大或值</a> 1912</li>
<li><a href="https://leetcode.cn/problems/minimum-number-of-removals-to-make-mountain-array/" target="_blank">1671. 得到山形数组的最少删除次数</a> 1913</li>
<li><a href="https://leetcode.cn/problems/construct-product-matrix/" target="_blank">2906. 构造乘积矩阵</a> 2075</li>
<li><a href="https://leetcode.cn/problems/find-the-maximum-factor-score-of-array/" target="_blank">3334. 数组的最大因子得分</a> 非暴力做法</li>
<li><a href="https://leetcode.cn/problems/minimum-time-to-remove-all-cars-containing-illegal-goods/" target="_blank">2167. 移除所有载有违禁货物车厢所需的最少时间</a> 2219</li>
<li><a href="https://leetcode.cn/problems/count-palindromic-subsequences/" target="_blank">2484. 统计回文子序列数目</a> 2223</li>
<li><a href="https://leetcode.cn/problems/minimum-difference-in-sums-after-removal-of-elements/" target="_blank">2163. 删除元素后和的最小差值</a> 2225</li>
<li><a href="https://leetcode.cn/problems/subsequence-with-the-minimum-score/" target="_blank">2565. 最少得分子序列</a> 2432</li>
<li><a href="https://leetcode.cn/problems/count-special-quadruplets/" target="_blank">1995. 统计特殊四元组</a> 四个数</li>
<li><a href="https://leetcode.cn/problems/count-increasing-quadruplets/" target="_blank">2552. 统计上升四元组</a> 2433 四个数</li>
<li><a href="https://leetcode.cn/problems/find-the-lexicographically-smallest-valid-sequence/" target="_blank">3302. 字典序最小的合法序列</a> 2474 第 2565 题的进阶版本</li>
<li><a href="https://leetcode.cn/problems/count-special-subsequences/" target="_blank">3404. 统计特殊子序列的数目</a> 2445 四个数</li>
<li><a href="https://leetcode.cn/problems/find-the-occurrence-of-first-almost-equal-substring/" target="_blank">3303. 第一个几乎相等子字符串的下标</a> 2509</li>
<li><a href="https://leetcode.cn/problems/find-the-maximum-sequence-value-of-array/" target="_blank">3287. 求出数组中最大序列值</a> 2545</li>
<li><a href="https://leetcode.cn/problems/maximum-value-sum-by-placing-three-rooks-ii/" target="_blank">3257. 放三个车的价值之和最大 II</a> 2553</li>
<li><a href="https://leetcode.cn/problems/maximize-subarray-sum-after-removing-all-occurrences-of-one-element/" target="_blank">3410. 删除所有值为某个元素后的最大子数组和</a> 2844</li>
<li><a href="https://leetcode.cn/problems/maximize-the-number-of-partitions-after-operations/" target="_blank">3003. 执行操作后的最大分割数量</a> 3039</li>
<li><a href="https://leetcode.cn/problems/max-consecutive-ones-ii/" target="_blank">487. 最大连续 1 的个数 II</a>（会员题）</li>
<li><a href="https://leetcode.cn/problems/maximum-subarray-sum-after-one-operation/" target="_blank">1746. 经过一次操作后的最大子数组和</a>（会员题）</li>
</ul>
<p>补充题目：</p>
<ul>
<li>输入一个长为 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">n</span></span></span></span></span> 的 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8623em;vertical-align:-0.1944em"></span><span class="mord text"><span class="mord textit">prices</span></span></span></span></span></span> 数组，你需要返回一个长为 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">n</span></span></span></span></span> 的 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord text"><span class="mord textit">answer</span></span></span></span></span></span> 数组，其中 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord text"><span class="mord textit">answer</span></span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span> 表示删除 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord text"><span class="mord textit">prices</span></span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span>，也就是禁止在第 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em"></span><span class="mord mathnormal">i</span></span></span></span></span> 天买卖股票，在此约束下 <a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock/" target="_blank">121. 买卖股票的最佳时机</a> 的答案。</li>
</ul>
<h2 id="专题把-x-变成-y">专题：把 X 变成 Y</h2>
<p>部分题目也可以用 BFS 解决。</p>
<ul>
<li><a href="https://leetcode.cn/problems/integer-replacement/" target="_blank">397. 整数替换</a></li>
<li><a href="https://leetcode.cn/problems/minimum-number-of-operations-to-make-x-and-y-equal/" target="_blank">2998. 使 X 和 Y 相等的最少操作次数</a> 1795</li>
<li><a href="https://leetcode.cn/problems/minimum-operations-to-convert-number/" target="_blank">2059. 转化数字的最小运算数</a> 1850</li>
<li><a href="https://leetcode.cn/problems/broken-calculator/" target="_blank">991. 坏了的计算器</a> 1909</li>
<li><a href="https://leetcode.cn/problems/minimum-number-of-days-to-eat-n-oranges/" target="_blank">1553. 吃掉 N 个橘子的最少天数</a> 2048</li>
</ul>
<p>另见 <a href="https://leetcode.cn/circle/discuss/01LUak/" target="_blank">图论题单</a> 中的 Dijkstra 算法，例如：</p>
<ul>
<li><a href="https://leetcode.cn/problems/digit-operations-to-make-two-integers-equal/" target="_blank">3377. 使两个整数相等的数位操作</a> 2186</li>
</ul>
<h2 id="专题跳跃游戏">专题：跳跃游戏</h2>
<ul>
<li><a href="https://leetcode.cn/problems/jump-game-iii/" target="_blank">1306. 跳跃游戏 III</a> 1397</li>
<li><a href="https://leetcode.cn/problems/maximum-number-of-jumps-to-reach-the-last-index/" target="_blank">2770. 达到末尾下标所需的最大跳跃次数</a> 1533</li>
<li><a href="https://leetcode.cn/problems/frog-jump/" target="_blank">403. 青蛙过河</a></li>
<li><a href="https://leetcode.cn/problems/jump-game-v/" target="_blank">1340. 跳跃游戏 V</a> 1866</li>
<li><a href="https://leetcode.cn/problems/jump-game-vii/" target="_blank">1871. 跳跃游戏 VII</a> 1896</li>
<li><a href="https://leetcode.cn/problems/jump-game-vi/" target="_blank">1696. 跳跃游戏 VI</a> 1954</li>
<li><a href="https://leetcode.cn/problems/odd-even-jump/" target="_blank">975. 奇偶跳</a> 2079</li>
<li><a href="https://leetcode.cn/problems/minimum-jumps-to-reach-home/" target="_blank">1654. 到家的最少跳跃次数</a> 2124</li>
<li><a href="https://leetcode.cn/problems/zui-xiao-tiao-yue-ci-shu/" target="_blank">LCP 09. 最小跳跃次数</a></li>
<li><a href="https://leetcode.cn/problems/meChtZ/" target="_blank">LCP 20. 快速公交</a></li>
<li><a href="https://leetcode.cn/problems/coin-path/" target="_blank">656. 金币路径</a>（会员题）</li>
<li><a href="https://leetcode.cn/problems/jump-game-viii/" target="_blank">2297. 跳跃游戏 VIII</a>（会员题）</li>
</ul>
<h2 id="其他">其他</h2>
<ul>
<li><a href="https://leetcode.cn/problems/sort-integers-by-the-power-value/" target="_blank">1387. 将整数按权重排序</a> 1507</li>
<li><a href="https://leetcode.cn/problems/binary-trees-with-factors/" target="_blank">823. 带因子的二叉树</a> 1900</li>
<li><a href="https://leetcode.cn/problems/pyramid-transition-matrix/" target="_blank">756. 金字塔转换矩阵</a> 1990</li>
<li><a href="https://leetcode.cn/problems/number-of-strings-which-can-be-rearranged-to-contain-substring/" target="_blank">2930. 重新排列后包含指定子字符串的字符串数目</a> 2227</li>
<li><a href="https://leetcode.cn/problems/minimum-cost-to-change-the-final-value-of-expression/" target="_blank">1896. 反转表达式值的最少操作次数</a> 2532</li>
</ul>
<h2 id="算法题单">算法题单</h2>
<p><a href="https://leetcode.cn/circle/discuss/RvFUtj/" target="_blank">如何科学刷题？</a></p>
<ol>
<li data-length="1"><a href="https://leetcode.cn/circle/discuss/0viNMK/" target="_blank">滑动窗口与双指针（定长/不定长/单序列/双序列/三指针/分组循环）</a></li>
<li data-length="1"><a href="https://leetcode.cn/circle/discuss/SqopEo/" target="_blank">二分算法（二分答案/最小化最大值/最大化最小值/第K小）</a></li>
<li data-length="1"><a href="https://leetcode.cn/circle/discuss/9oZFK9/" target="_blank">单调栈（基础/矩形面积/贡献法/最小字典序）</a></li>
<li data-length="1"><a href="https://leetcode.cn/circle/discuss/YiXPXW/" target="_blank">网格图（DFS/BFS/综合应用）</a></li>
<li data-length="1"><a href="https://leetcode.cn/circle/discuss/dHn9Vk/" target="_blank">位运算（基础/性质/拆位/试填/恒等式/思维）</a></li>
<li data-length="1"><a href="https://leetcode.cn/circle/discuss/01LUak/" target="_blank">图论算法（DFS/BFS/拓扑排序/基环树/最短路/最小生成树/网络流）</a></li>
<li data-length="1"><a href="https://leetcode.cn/circle/discuss/tXLS3i/" target="_blank">动态规划（入门/背包/划分/状态机/区间/状压/数位/数据结构优化/树形/博弈/概率期望）</a></li>
<li data-length="1"><a href="https://leetcode.cn/circle/discuss/mOr1u6/" target="_blank">常用数据结构（前缀和/差分/栈/队列/堆/字典树/并查集/树状数组/线段树）</a></li>
<li data-length="1"><a href="https://leetcode.cn/circle/discuss/IYT3ss/" target="_blank">数学算法（数论/组合/概率期望/博弈/计算几何/随机算法）</a></li>
<li data-length="2"><a href="https://leetcode.cn/circle/discuss/g6KTKL/" target="_blank">贪心与思维（基本贪心策略/反悔/区间/字典序/数学/思维/脑筋急转弯/构造）</a></li>
<li data-length="2"><a href="https://leetcode.cn/circle/discuss/K0n2gO/" target="_blank">链表、树与回溯（前后指针/快慢指针/DFS/BFS/直径/LCA）</a></li>
<li data-length="2"><a href="https://leetcode.cn/circle/discuss/SJFwQI/" target="_blank">字符串（KMP/Z函数/Manacher/字符串哈希/AC自动机/后缀数组/子序列自动机）</a></li>
</ol>
<p><a href="/link/?target=https%3A%2F%2Fgithub.com%2FEndlessCheng%2Fcodeforces-go%2Fblob%2Fmaster%2Fleetcode%2FSOLUTIONS.md" target="_blank">我的题解精选（已分类）</a></p>
<p>欢迎关注 <a href="/link/?target=https%3A%2F%2Fspace.bilibili.com%2F206214" target="_blank">B站@灵茶山艾府</a></p>
<p>如果你发现有题目可以补充进来，欢迎评论反馈。</p></div></div></div></div><div class="sticky bottom-0 flex h-12 w-full justify-center bg-[#fafafa] px-4 py-2 dark:bg-[#1a1a1a] mb-4"><div class="relative flex max-w-[1000px] flex-1 items-center justify-between gap-1"><div class="flex items-center gap-1"><button class="relative inline-flex gap-2 items-center justify-center font-medium cursor-pointer focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50 transition-colors bg-fill-tertiary enabled:hover:bg-fill-secondary enabled:active:bg-fill-primary text-body rounded-lg px-2 py-1.5 text-text-secondary dark:text-text-secondary hover:text-text-secondary dark:hover:text-text-secondary"><div class="relative text-[14px] leading-[normal] p-[1px] before:block before:h-3.5 before:w-3.5"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="thumbs-up" class="svg-inline--fa fa-thumbs-up absolute left-1/2 top-1/2 h-[1em] -translate-x-1/2 -translate-y-1/2 align-[-0.125em]" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M323.8 34.8c-38.2-10.9-78.1 11.2-89 49.4l-5.7 20c-3.7 13-10.4 25-19.5 35l-51.3 56.4c-8.9 9.8-8.2 25 1.6 33.9s25 8.2 33.9-1.6l51.3-56.4c14.1-15.5 24.4-34 30.1-54.1l5.7-20c3.6-12.7 16.9-20.1 29.7-16.5s20.1 16.9 16.5 29.7l-5.7 20c-5.7 19.9-14.7 38.7-26.6 55.5c-5.2 7.3-5.8 16.9-1.7 24.9s12.3 13 21.3 13L448 224c8.8 0 16 7.2 16 16c0 6.8-4.3 12.7-10.4 15c-7.4 2.8-13 9-14.9 16.7s.1 15.8 5.3 21.7c2.5 2.8 4 6.5 4 10.6c0 7.8-5.6 14.3-13 15.7c-8.2 1.6-15.1 7.3-18 15.1s-1.6 16.7 3.6 23.3c2.1 2.7 3.4 6.1 3.4 9.9c0 6.7-4.2 12.6-10.2 14.9c-11.5 4.5-17.7 16.9-14.4 28.8c.4 1.3 .6 2.8 .6 4.3c0 8.8-7.2 16-16 16H286.5c-12.6 0-25-3.7-35.5-10.7l-61.7-41.1c-11-7.4-25.9-4.4-33.3 6.7s-4.4 25.9 6.7 33.3l61.7 41.1c18.4 12.3 40 18.8 62.1 18.8H384c34.7 0 62.9-27.6 64-62c14.6-11.7 24-29.7 24-50c0-4.5-.5-8.8-1.3-13c15.4-11.7 25.3-30.2 25.3-51c0-6.5-1-12.8-2.8-18.7C504.8 273.7 512 257.7 512 240c0-35.3-28.6-64-64-64l-92.3 0c4.7-10.4 8.7-21.2 11.8-32.2l5.7-20c10.9-38.2-11.2-78.1-49.4-89zM32 192c-17.7 0-32 14.3-32 32V448c0 17.7 14.3 32 32 32H96c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32H32z"></path></svg></div><div class="">3.8K</div></button><button class="relative inline-flex gap-2 items-center justify-center font-medium cursor-pointer focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50 transition-colors bg-transparent enabled:hover:bg-fill-secondary enabled:active:bg-fill-primary text-body rounded-lg px-2 py-1.5 text-text-secondary dark:text-text-secondary hover:text-text-secondary dark:hover:text-text-secondary" data-state="closed"><div class="relative text-[14px] leading-[normal] p-[1px] before:block before:h-3.5 before:w-3.5"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="comment" class="svg-inline--fa fa-comment absolute left-1/2 top-1/2 h-[1em] -translate-x-1/2 -translate-y-1/2 align-[-0.125em]" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M123.6 391.3c12.9-9.4 29.6-11.8 44.6-6.4c26.5 9.6 56.2 15.1 87.8 15.1c124.7 0 208-80.5 208-160s-83.3-160-208-160S48 160.5 48 240c0 32 12.4 62.8 35.7 89.2c8.6 9.7 12.8 22.5 11.8 35.5c-1.4 18.1-5.7 34.7-11.3 49.4c17-7.9 31.1-16.7 39.4-22.7zM21.2 431.9c1.8-2.7 3.5-5.4 5.1-8.1c10-16.6 19.5-38.4 21.4-62.9C17.7 326.8 0 285.1 0 240C0 125.1 114.6 32 256 32s256 93.1 256 208s-114.6 208-256 208c-37.1 0-72.3-6.4-104.1-17.9c-11.9 8.7-31.3 20.6-54.3 30.6c-15.1 6.6-32.3 12.6-50.1 16.1c-.8 .2-1.6 .3-2.4 .5c-4.4 .8-8.7 1.5-13.2 1.9c-.2 0-.5 .1-.7 .1c-5.1 .5-10.2 .8-15.3 .8c-6.5 0-12.3-3.9-14.8-9.9c-2.5-6-1.1-12.8 3.4-17.4c4.1-4.2 7.8-8.7 11.3-13.5c1.7-2.3 3.3-4.6 4.8-6.9c.1-.2 .2-.3 .3-.5z"></path></svg></div><div class="">436</div></button><div class="bg-border-tertiary h-3.5 w-px rounded-[1px]"></div><button class="relative inline-flex gap-2 items-center justify-center font-medium cursor-pointer focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50 transition-colors bg-transparent enabled:hover:bg-fill-secondary enabled:active:bg-fill-primary text-body rounded-lg px-2 py-1.5 text-text-secondary dark:text-text-secondary hover:text-text-secondary dark:hover:text-text-secondary" data-state="closed"><div class="relative text-[14px] leading-[normal] p-[1px] before:block before:h-3.5 before:w-3.5"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="star" class="svg-inline--fa fa-star absolute left-1/2 top-1/2 h-[1em] -translate-x-1/2 -translate-y-1/2 align-[-0.125em]" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M287.9 0c9.2 0 17.6 5.2 21.6 13.5l68.6 141.3 153.2 22.6c9 1.3 16.5 7.6 19.3 16.3s.5 18.1-5.9 24.5L433.6 328.4l26.2 155.6c1.5 9-2.2 18.1-9.6 23.5s-17.3 6-25.3 1.7l-137-73.2L151 509.1c-8.1 4.3-17.9 3.7-25.3-1.7s-11.2-14.5-9.7-23.5l26.2-155.6L31.1 218.2c-6.5-6.4-8.7-15.9-5.9-24.5s10.3-14.9 19.3-16.3l153.2-22.6L266.3 13.5C270.4 5.2 278.7 0 287.9 0zm0 79L235.4 187.2c-3.5 7.1-10.2 12.1-18.1 13.3L99 217.9 184.9 303c5.5 5.5 8.1 13.3 6.8 21L171.4 443.7l105.2-56.2c7.1-3.8 15.6-3.8 22.6 0l105.2 56.2L384.2 324.1c-1.3-7.7 1.2-15.5 6.8-21l85.9-85.1L358.6 200.5c-7.8-1.2-14.6-6.1-18.1-13.3L287.9 79z"></path></svg></div><div class="">9.8K</div></button><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R2pckf6:" data-state="closed" class=""><button class="relative inline-flex items-center justify-center font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-sd-ring disabled:pointer-events-none disabled:opacity-50 hover:bg-sd-accent hover:text-sd-accent-foreground text-sm p-0 rounded-sd-md h-8 w-8 text-sd-muted-foreground"><div class="relative text-[14px] leading-[normal] p-[1px] before:block before:h-3.5 before:w-3.5"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="arrow-up-right-from-square" class="svg-inline--fa fa-arrow-up-right-from-square absolute left-1/2 top-1/2 h-[1em] -translate-x-1/2 -translate-y-1/2 align-[-0.125em]" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M304 24c0 13.3 10.7 24 24 24H430.1L207 271c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l223-223V184c0 13.3 10.7 24 24 24s24-10.7 24-24V24c0-13.3-10.7-24-24-24H328c-13.3 0-24 10.7-24 24zM72 32C32.2 32 0 64.2 0 104V440c0 39.8 32.2 72 72 72H408c39.8 0 72-32.2 72-72V312c0-13.3-10.7-24-24-24s-24 10.7-24 24V440c0 13.3-10.7 24-24 24H72c-13.3 0-24-10.7-24-24V104c0-13.3 10.7-24 24-24H200c13.3 0 24-10.7 24-24s-10.7-24-24-24H72z"></path></svg></div></button></button></div></div></div><div class="flex h-full flex-col px-4 mb-4"><div class="flex items-center space-x-3"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="1em" height="1em" fill="currentColor" class="h-6 w-6 text-gray-6 dark:text-dark-gray-6"><path fill-rule="evenodd" d="M2 11.001a9.001 9.001 0 014.974-8.047A8.876 8.876 0 0110.998 2h.535c.018 0 .037 0 .055.002 3.934.218 7.204 3.02 8.15 6.753a1 1 0 01-1.94.49c-.734-2.9-3.27-5.065-6.294-5.245h-.51a6.876 6.876 0 00-3.12.74l-.004.002A7.001 7.001 0 004 11.003v.002a6.873 6.873 0 00.738 3.117c.206.407.271.871.185 1.32l-.387 2.022 2.022-.387c.448-.086.912-.021 1.32.185.44.222.9.395 1.373.518a1 1 0 11-.502 1.936 8.865 8.865 0 01-1.773-.669.067.067 0 00-.042-.006l-3.47.665a1 1 0 01-1.17-1.17l.665-3.47a.067.067 0 00-.006-.043A8.873 8.873 0 012 11.001zM17.004 20h-.005a3 3 0 01-2.68-1.658l-.004-.007A2.936 2.936 0 0114 17.004v-.206a2.995 2.995 0 012.773-2.797l.233-.001c.46-.001.917.107 1.33.315l.007.004A3 3 0 0120 17v.005c.001.425-.09.845-.268 1.232l-.133.29a1 1 0 00-.074.606l.093.485-.484-.093a1 1 0 00-.606.073l-.29.134a2.937 2.937 0 01-1.234.268zm-.296-8A4.995 4.995 0 0012 16.738v.262c-.002.777.18 1.543.53 2.237a5 5 0 006.542 2.313l2.303.441c.365.07.686-.25.616-.615l-.441-2.303a5 5 0 00-2.312-6.541A4.937 4.937 0 0017 12h-.292z" clip-rule="evenodd"></path></svg></div><div class="flex-1 text-base font-medium text-label-1 dark:text-dark-label-1">评论<!-- --> (<!-- -->436<!-- -->)</div><div><div class="flex items-center space-x-2"><div class="relative" data-headlessui-state=""><button class="flex items-center rounded text-left cursor-pointer focus:outline-none whitespace-nowrap leading-5 p-0 bg-transparent dark:bg-transparent hover:bg-transparent dark:hover:bg-transparent active:bg-transparent dark:active:bg-transparent text-label-2 dark:text-dark-label-2" id="headlessui-menu-button-:R3srckf6:" type="button" aria-haspopup="menu" aria-expanded="false" data-headlessui-state=""><div class="text-xs text-label-2 dark:text-dark-label-2"><span class="mr-2">排序<!-- -->:</span><span class="text-label-1 dark:text-dark-label-1 font-medium">最热</span></div><div class="w-4.5 h-4.5 flex items-center ml-3 pointer-events-none transition duration-300 text-label-3 dark:text-dark-label-3" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="1em" height="1em" fill="currentColor"><path fill-rule="evenodd" d="M16.293 9.293a1 1 0 111.414 1.414l-5 5a1 1 0 01-1.414 0l-5-5a1 1 0 011.414-1.414L12 13.586l4.293-4.293z" clip-rule="evenodd"></path></svg></div></button></div></div></div></div><div class="mt-3"><div><div class="relative"><div class="flex w-full flex-col rounded-[13px] bg-layer-2 dark:bg-dark-layer-2 shadow-level1 dark:shadow-dark-level1"><textarea data-gramm="false" data-gramm_editor="false" data-enable-grammarly="false" placeholder="请输入评论..." class="w-full resize-none bg-transparent p-4 text-md outline-0 outline-none dark:bg-transparent min-h-[80px] placeholder:text-label-4 dark:placeholder:text-dark-label-4 inherit" rows="1"></textarea><div class="relative box-content flex h-8 items-end p-4"><div class="flex flex-1 flex-col"><div class="inherit flex h-8 items-end gap-2"><div class="flex cursor-pointer items-center rounded-[5px] p-1 text-base text-gray-7 dark:text-dark-gray-7 hover:bg-fill-4 dark:hover:bg-dark-fill-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="1em" height="1em" fill="currentColor"><path fill-rule="evenodd" d="M13.27 5.02c.456.1.764.562.727 1.06l-.015.116-2.181 12c-.099.541-.578.893-1.07.784-.457-.1-.765-.562-.728-1.06l.015-.116 2.181-12c.099-.541.578-.893 1.07-.784zm4.65.37l.07.096 3.857 6c.178.277.2.614.067.906l-.067.123-3.857 6c-.304.473-.962.627-1.47.342-.47-.264-.646-.812-.425-1.268l.058-.104L19.678 12l-3.525-5.485c-.283-.44-.161-1.001.264-1.307l.103-.065a1.123 1.123 0 011.4.246zm-11.84 0c.3-.365.83-.49 1.28-.305l.12.058.103.065a.96.96 0 01.326 1.194l-.062.113L4.322 12l3.525 5.485.058.104c.221.456.046 1.005-.425 1.268a1.123 1.123 0 01-1.4-.246l-.07-.097-3.857-6-.067-.122a.939.939 0 010-.784l.067-.123 3.857-6 .07-.096z" clip-rule="evenodd"></path></svg></div><div class="flex cursor-pointer items-center rounded-[5px] p-1 text-base text-gray-7 dark:text-dark-gray-7 hover:bg-fill-4 dark:hover:bg-dark-fill-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="1em" height="1em" fill="currentColor"><path fill-rule="evenodd" d="M21 14.997V18a3 3 0 01-3 3H6a3 3 0 01-3-3V6a3 3 0 013-3h12a3 3 0 013 3v8.997zm-2-2.293V6a1 1 0 00-1-1H6a1 1 0 00-1 1v11.218l8.96-7.965a1 1 0 011.346.015L19 12.704zm0 2.731l-4.39-4.084L6.005 19H18a1 1 0 001-1v-2.565zM8.5 11a2.5 2.5 0 110-5 2.5 2.5 0 010 5zm0-2a.5.5 0 100-1 .5.5 0 000 1z" clip-rule="evenodd"></path></svg></div><div class="flex cursor-pointer items-center rounded-[5px] p-1 text-base text-gray-7 dark:text-dark-gray-7 hover:bg-fill-4 dark:hover:bg-dark-fill-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="1em" height="1em" fill="currentColor"><path fill-rule="evenodd" d="M13 7a1 1 0 011-1h2a6 6 0 010 12h-2a1 1 0 110-2h2a4 4 0 000-8h-2a1 1 0 01-1-1zm-3 10a1 1 0 01-1 1H8A6 6 0 018 6h1a1 1 0 010 2H8a4 4 0 100 8h1a1 1 0 011 1zm-1-6h6a1 1 0 110 2H9a1 1 0 110-2z" clip-rule="evenodd"></path></svg></div><div class="flex cursor-pointer items-center rounded-[5px] p-1 text-base text-gray-7 dark:text-dark-gray-7 hover:bg-fill-4 dark:hover:bg-dark-fill-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="1em" height="1em" fill="currentColor"><path d="M11.27 6.799l.146-.438c.075-.259.178-.437.308-.534.14-.108.345-.06.615.145.065.054.124.114.178.179a.45.45 0 01.114.226.976.976 0 01.032.373 2.21 2.21 0 01-.13.535l-1.182 3.434c-.054.151-.043.28.032.389a.399.399 0 00.308.146c.087 0 .232-.081.438-.243.205-.173.41-.405.615-.697.216-.292.405-.637.567-1.037a3.63 3.63 0 00.243-1.344c0-.519-.108-1-.324-1.442a3.458 3.458 0 00-.907-1.15 4.033 4.033 0 00-1.345-.778 4.76 4.76 0 00-1.684-.292 4.55 4.55 0 00-1.766.373 5.343 5.343 0 00-2.77 2.738c-.292.659-.438 1.393-.438 2.203 0 .691.13 1.296.389 1.814.26.519.616.95 1.07 1.296.453.335.982.589 1.587.762a7.555 7.555 0 001.96.243 9.97 9.97 0 001.328-.081c.4-.054.783-.151 1.15-.292a5.269 5.269 0 001.07-.6c.345-.258.707-.582 1.085-.971.076-.108.162-.162.26-.162.107-.011.21.01.307.065a.567.567 0 01.243.21.5.5 0 01.13.276.857.857 0 01-.081.55c-.076.162-.26.378-.551.648-.292.27-.61.524-.956.762a6.538 6.538 0 01-1.118.632c-.4.172-.837.307-1.312.405a7.016 7.016 0 01-1.555.162 8.817 8.817 0 01-2.527-.324 6.147 6.147 0 01-2.122-1.021 5.098 5.098 0 01-1.442-1.814c-.357-.735-.535-1.61-.535-2.625 0-1.09.19-2.057.567-2.9.389-.853.891-1.566 1.507-2.138a6.371 6.371 0 012.09-1.328A6.646 6.646 0 019.26 2.7c.875 0 1.674.13 2.398.389.734.259 1.36.62 1.879 1.085.518.465.918 1.02 1.199 1.669.291.648.437 1.36.437 2.138 0 .627-.119 1.237-.356 1.83a5.638 5.638 0 01-.94 1.556c-.389.454-.826.82-1.312 1.102-.486.27-.977.405-1.474.405-.378 0-.675-.087-.891-.26-.216-.172-.378-.437-.486-.793-.346.28-.637.496-.875.648-.238.15-.545.221-.923.21-.443-.01-.8-.102-1.07-.275a1.905 1.905 0 01-.631-.648 2.547 2.547 0 01-.308-.859 5.625 5.625 0 01-.081-.923c0-.465.092-.967.275-1.507.195-.55.46-1.053.794-1.506a4.519 4.519 0 011.247-1.15 2.928 2.928 0 011.62-.47c.227 0 .422.037.584.113.172.076.313.184.42.324.12.13.217.286.292.47.076.173.146.356.211.55zm-2.657 4.374c.324 0 .637-.12.94-.357.313-.248.578-.723.794-1.425.14-.432.243-.746.307-.94.065-.205.103-.373.114-.502.01-.205-.07-.389-.243-.551-.173-.173-.357-.26-.551-.26-.346 0-.659.087-.94.26-.27.173-.502.394-.696.664a3.53 3.53 0 00-.438.907 3.563 3.563 0 00-.178.972c0 .476.092.8.276.972.183.173.388.26.615.26z"></path></svg></div></div></div><div class="flex items-center gap-4"><button disabled="" class="font-medium items-center whitespace-nowrap focus:outline-none opacity-50 inline-flex transition-colors cursor-pointer py-[5px] px-3 rounded-lg bg-green-s dark:bg-dark-green-s hover:bg-green-3 dark:hover:bg-dark-green-3 text-white dark:text-dark-white opacty-100">评论</button></div></div></div><div class="z-base-1 absolute box-content rounded-lg hidden"></div></div></div></div><div class="mt-4 flex-1"><div class="flex flex-col gap-8 px-1 py-3"><div class="flex h-full w-full"><div class="animate-pulse flex w-full flex-col space-y-5"><div class="flex space-x-3"><div class="h-8"><div class="h-3 bg-fill-3 dark:bg-dark-fill-3 !h-full w-8 rounded-full"></div></div><div class="flex w-[80px] flex-col space-y-2"><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-3/4"></div><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-[14px] w-full"></div></div></div><div class="flex flex-col space-y-2.5"><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-full"></div><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-1/3"></div></div></div></div><div class="flex h-full w-full"><div class="animate-pulse flex w-full flex-col space-y-5"><div class="flex space-x-3"><div class="h-8"><div class="h-3 bg-fill-3 dark:bg-dark-fill-3 !h-full w-8 rounded-full"></div></div><div class="flex w-[80px] flex-col space-y-2"><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-3/4"></div><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-[14px] w-full"></div></div></div><div class="flex flex-col space-y-2.5"><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-full"></div><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-1/3"></div></div></div></div><div class="flex h-full w-full"><div class="animate-pulse flex w-full flex-col space-y-5"><div class="flex space-x-3"><div class="h-8"><div class="h-3 bg-fill-3 dark:bg-dark-fill-3 !h-full w-8 rounded-full"></div></div><div class="flex w-[80px] flex-col space-y-2"><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-3/4"></div><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-[14px] w-full"></div></div></div><div class="flex flex-col space-y-2.5"><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-full"></div><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-1/3"></div></div></div></div><div class="flex h-full w-full"><div class="animate-pulse flex w-full flex-col space-y-5"><div class="flex space-x-3"><div class="h-8"><div class="h-3 bg-fill-3 dark:bg-dark-fill-3 !h-full w-8 rounded-full"></div></div><div class="flex w-[80px] flex-col space-y-2"><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-3/4"></div><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-[14px] w-full"></div></div></div><div class="flex flex-col space-y-2.5"><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-full"></div><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-1/3"></div></div></div></div><div class="flex h-full w-full"><div class="animate-pulse flex w-full flex-col space-y-5"><div class="flex space-x-3"><div class="h-8"><div class="h-3 bg-fill-3 dark:bg-dark-fill-3 !h-full w-8 rounded-full"></div></div><div class="flex w-[80px] flex-col space-y-2"><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-3/4"></div><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-[14px] w-full"></div></div></div><div class="flex flex-col space-y-2.5"><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-full"></div><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-1/3"></div></div></div></div><div class="flex h-full w-full"><div class="animate-pulse flex w-full flex-col space-y-5"><div class="flex space-x-3"><div class="h-8"><div class="h-3 bg-fill-3 dark:bg-dark-fill-3 !h-full w-8 rounded-full"></div></div><div class="flex w-[80px] flex-col space-y-2"><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-3/4"></div><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-[14px] w-full"></div></div></div><div class="flex flex-col space-y-2.5"><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-full"></div><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-1/3"></div></div></div></div><div class="flex h-full w-full"><div class="animate-pulse flex w-full flex-col space-y-5"><div class="flex space-x-3"><div class="h-8"><div class="h-3 bg-fill-3 dark:bg-dark-fill-3 !h-full w-8 rounded-full"></div></div><div class="flex w-[80px] flex-col space-y-2"><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-3/4"></div><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-[14px] w-full"></div></div></div><div class="flex flex-col space-y-2.5"><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-full"></div><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-1/3"></div></div></div></div><div class="flex h-full w-full"><div class="animate-pulse flex w-full flex-col space-y-5"><div class="flex space-x-3"><div class="h-8"><div class="h-3 bg-fill-3 dark:bg-dark-fill-3 !h-full w-8 rounded-full"></div></div><div class="flex w-[80px] flex-col space-y-2"><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-3/4"></div><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-[14px] w-full"></div></div></div><div class="flex flex-col space-y-2.5"><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-full"></div><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-1/3"></div></div></div></div><div class="flex h-full w-full"><div class="animate-pulse flex w-full flex-col space-y-5"><div class="flex space-x-3"><div class="h-8"><div class="h-3 bg-fill-3 dark:bg-dark-fill-3 !h-full w-8 rounded-full"></div></div><div class="flex w-[80px] flex-col space-y-2"><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-3/4"></div><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-[14px] w-full"></div></div></div><div class="flex flex-col space-y-2.5"><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-full"></div><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-1/3"></div></div></div></div><div class="flex h-full w-full"><div class="animate-pulse flex w-full flex-col space-y-5"><div class="flex space-x-3"><div class="h-8"><div class="h-3 bg-fill-3 dark:bg-dark-fill-3 !h-full w-8 rounded-full"></div></div><div class="flex w-[80px] flex-col space-y-2"><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-3/4"></div><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-[14px] w-full"></div></div></div><div class="flex flex-col space-y-2.5"><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-full"></div><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-1/3"></div></div></div></div></div></div><div class="mb-4 mt-7 flex justify-center pb-4"><nav role="navigation" class="flex flex-nowrap items-center space-x-2"><button class="flex items-center justify-center h-8 rounded select-none focus:outline-none bg-fill-3 dark:bg-dark-fill-3 text-label-2 dark:text-dark-label-2 hover:bg-fill-2 dark:hover:bg-dark-fill-2 disabled:opacity-40 disabled:pointer-events-none text-sm px-2" aria-label="prev" disabled=""><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="1em" height="1em" fill="currentColor" class="text-label-2 dark:text-dark-label-2 w-4 h-4"><path fill-rule="evenodd" d="M16.091 4.929l-7.057 7.078 7.057 7.064a1 1 0 01-1.414 1.414l-7.764-7.77a1 1 0 010-1.415l7.764-7.785a1 1 0 111.415 1.414z" clip-rule="evenodd"></path></svg></button><button class="flex items-center justify-center px-3 h-8 rounded select-none focus:outline-none pointer-events-none bg-paper dark:bg-dark-gray-5 text-label-1 dark:text-dark-label-1 shadow-level1 dark:shadow-dark-level1 disabled:opacity-40 disabled:pointer-events-none text-sm" disabled="">1</button><button class="flex items-center justify-center px-3 h-8 rounded select-none focus:outline-none bg-fill-3 dark:bg-dark-fill-3 text-label-2 dark:text-dark-label-2 hover:bg-fill-2 dark:hover:bg-dark-fill-2 disabled:opacity-40 disabled:pointer-events-none text-sm" disabled="">2</button><button class="flex items-center justify-center px-3 h-8 rounded select-none focus:outline-none bg-fill-3 dark:bg-dark-fill-3 text-label-2 dark:text-dark-label-2 hover:bg-fill-2 dark:hover:bg-dark-fill-2 disabled:opacity-40 disabled:pointer-events-none text-sm" disabled="">3</button><button class="flex items-center justify-center px-3 h-8 rounded select-none focus:outline-none bg-fill-3 dark:bg-dark-fill-3 text-label-2 dark:text-dark-label-2 hover:bg-fill-2 dark:hover:bg-dark-fill-2 disabled:opacity-40 disabled:pointer-events-none text-sm" disabled="">4</button><button class="flex items-center justify-center px-3 h-8 rounded select-none focus:outline-none bg-fill-3 dark:bg-dark-fill-3 text-label-2 dark:text-dark-label-2 hover:bg-fill-2 dark:hover:bg-dark-fill-2 disabled:opacity-40 disabled:pointer-events-none text-sm" disabled="">5</button><button class="flex items-center justify-center px-3 h-8 rounded select-none focus:outline-none bg-fill-3 dark:bg-dark-fill-3 text-label-2 dark:text-dark-label-2 hover:bg-fill-2 dark:hover:bg-dark-fill-2 disabled:opacity-40 disabled:pointer-events-none text-sm" disabled="">6</button><button class="flex items-center justify-center px-3 h-8 rounded select-none focus:outline-none bg-fill-3 dark:bg-dark-fill-3 text-label-2 dark:text-dark-label-2 hover:bg-fill-2 dark:hover:bg-dark-fill-2 disabled:opacity-40 disabled:pointer-events-none text-sm" aria-label="gap" disabled=""><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="1em" height="1em" fill="currentColor" class="text-label-2 dark:text-dark-label-2"><path fill-rule="evenodd" d="M4.4 14a2 2 0 100-4 2 2 0 000 4zm9.6-2a2 2 0 11-4 0 2 2 0 014 0zm7.6 0a2 2 0 11-4 0 2 2 0 014 0z" clip-rule="evenodd"></path></svg></button><button class="flex items-center justify-center px-3 h-8 rounded select-none focus:outline-none bg-fill-3 dark:bg-dark-fill-3 text-label-2 dark:text-dark-label-2 hover:bg-fill-2 dark:hover:bg-dark-fill-2 disabled:opacity-40 disabled:pointer-events-none text-sm" disabled="">44</button><button class="flex items-center justify-center h-8 rounded select-none focus:outline-none bg-fill-3 dark:bg-dark-fill-3 text-label-2 dark:text-dark-label-2 hover:bg-fill-2 dark:hover:bg-dark-fill-2 disabled:opacity-40 disabled:pointer-events-none text-sm px-2" aria-label="next" disabled=""><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="1em" height="1em" fill="currentColor" class="text-label-2 dark:text-dark-label-2 w-4 h-4"><path fill-rule="evenodd" d="M7.913 19.071l7.057-7.078-7.057-7.064a1 1 0 011.414-1.414l7.764 7.77a1 1 0 010 1.415l-7.764 7.785a1 1 0 01-1.414-1.414z" clip-rule="evenodd"></path></svg></button></nav></div></div></div></div><div class="t6Fde lc-md:block sticky -top-2 hidden h-min max-h-screen min-h-[calc(100vh_-_50px)] w-[285px] flex-none overflow-y-auto pb-10 pr-4"><div class="mt-6"></div><div class="border-sd-border flex flex-col gap-4 rounded-lg border px-2 py-4"><div class="text-sd-foreground flex items-center gap-1.5 px-2"><div class="relative text-[14px] leading-[normal] p-[1px] before:block before:h-3.5 before:w-3.5"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="compass" class="svg-inline--fa fa-compass absolute left-1/2 top-1/2 h-[1em] -translate-x-1/2 -translate-y-1/2 align-[-0.125em]" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm306.7 69.1L162.4 380.6c-19.4 7.5-38.5-11.6-31-31l55.5-144.3c3.3-8.5 9.9-15.1 18.4-18.4l144.3-55.5c19.4-7.5 38.5 11.6 31 31L325.1 306.7c-3.2 8.5-9.9 15.1-18.4 18.4zM288 256a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"></path></svg></div><div class="text-lg font-semibold leading-6">探索</div></div><div class="flex flex-col gap-6"><div class="animate-pulse flex h-20 w-full flex-col gap-2"><div class="flex h-6 items-center justify-between"><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-[30%]"></div><div class="bg-fill-3 dark:bg-dark-fill-3 h-6 w-6 rounded-full"></div></div><div class="flex h-5 w-full items-center"><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-[80%]"></div></div><div class="flex h-5 w-full items-center"><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-[60%]"></div></div></div><div class="animate-pulse flex h-20 w-full flex-col gap-2"><div class="flex h-6 items-center justify-between"><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-[30%]"></div><div class="bg-fill-3 dark:bg-dark-fill-3 h-6 w-6 rounded-full"></div></div><div class="flex h-5 w-full items-center"><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-[80%]"></div></div><div class="flex h-5 w-full items-center"><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-[60%]"></div></div></div><div class="animate-pulse flex h-20 w-full flex-col gap-2"><div class="flex h-6 items-center justify-between"><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-[30%]"></div><div class="bg-fill-3 dark:bg-dark-fill-3 h-6 w-6 rounded-full"></div></div><div class="flex h-5 w-full items-center"><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-[80%]"></div></div><div class="flex h-5 w-full items-center"><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-[60%]"></div></div></div><div class="animate-pulse flex h-20 w-full flex-col gap-2"><div class="flex h-6 items-center justify-between"><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-[30%]"></div><div class="bg-fill-3 dark:bg-dark-fill-3 h-6 w-6 rounded-full"></div></div><div class="flex h-5 w-full items-center"><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-[80%]"></div></div><div class="flex h-5 w-full items-center"><div class="rounded-[5px] bg-fill-3 dark:bg-dark-fill-3 h-4 w-[60%]"></div></div></div></div></div><div class="mt-6"><div class="text-sd-muted-foreground flex w-full flex-col gap-2 text-xs font-normal"><div class="flex flex-wrap items-center gap-2"><a class="hover:text-sd-blue-500 hover:underline" target="_blank" rel="noreferrer" href="https://leetcode.cn/brand/?utm_medium=footer-link&amp;utm_source=main-footer">关于我们</a><div class="bg-sd-border h-[12.5px] w-[2px]"></div><a class="hover:text-sd-blue-500 hover:underline" target="_blank" rel="noreferrer" href="https://leetcode.cn/contact/?type=business-consulting&amp;utm_medium=footer-link&amp;utm_source=main-footer" data-key="business-consulting">商务咨询</a><div class="bg-sd-border h-[12.5px] w-[2px]"></div><a class="hover:text-sd-blue-500 hover:underline" target="_blank" rel="noreferrer" href="https://leetcode.cn/terms-c/?utm_medium=footer-link&amp;utm_source=main-footer">使用条款</a><div class="bg-sd-border h-[12.5px] w-[2px]"></div><a class="hover:text-sd-blue-500 hover:underline" target="_blank" rel="noreferrer" href="https://leetcode.cn/privacy/?utm_medium=footer-link&amp;utm_source=main-footer">隐私政策</a><div class="bg-sd-border h-[12.5px] w-[2px]"></div><a class="hover:text-sd-blue-500 hover:underline" target="_blank" rel="noreferrer" href="https://leetcode.cn/support/new/">问题反馈</a><div class="bg-sd-border h-[12.5px] w-[2px]"></div><div class="cursor-pointer" type="button" id="radix-:R1cqsf6:" aria-haspopup="menu" aria-expanded="false" data-state="closed"><a class="hover:text-sd-blue-500 hover:underline" target="_blank" rel="noreferrer">更多</a></div></div><div class="flex flex-wrap items-center gap-2"><a class="hover:text-sd-blue-500 hover:underline" target="_blank" rel="noreferrer" href="https://beian.miit.gov.cn/">沪ICP备18019787号-20</a><div class="bg-sd-border h-[12.5px] w-[2px]"></div><a class="hover:text-sd-blue-500 hover:underline" target="_blank" rel="noreferrer" href="https://beian.miit.gov.cn/">沪ICP证B2-20180578</a></div><div class="flex items-center gap-1"><img class="h-[14px] w-[14px]" alt="" src="https://static.leetcode.cn/cn-frontendx-assets/production/_next/static/images/beian-0c5770666939ca0a3bbdb0daa3e68cc2.png"/><a class="hover:text-sd-blue-500 hover:underline" target="_blank" rel="noreferrer" href="https://www.beian.gov.cn/portal/registerSystemInfo?recordcode=31010702007420">沪公网安备31010702007420号</a></div><div class="flex items-center gap-1"><div class="relative text-[14px] leading-[normal] p-[1px] before:block before:h-3.5 before:w-3.5"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="mobile" class="svg-inline--fa fa-mobile absolute left-1/2 top-1/2 h-[1em] -translate-x-1/2 -translate-y-1/2 align-[-0.125em]" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M80 48c-8.8 0-16 7.2-16 16V448c0 8.8 7.2 16 16 16H304c8.8 0 16-7.2 16-16V64c0-8.8-7.2-16-16-16H80zM16 64C16 28.7 44.7 0 80 0H304c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H80c-35.3 0-64-28.7-64-64V64zM160 400h64c8.8 0 16 7.2 16 16s-7.2 16-16 16H160c-8.8 0-16-7.2-16-16s7.2-16 16-16z"></path></svg></div><a class="hover:text-sd-blue-500 hover:underline" target="_blank" rel="noreferrer" href="https://leetcode.cn/app/">下载 App</a></div><a class="hover:text-sd-blue-500 hover:underline" target="_blank" rel="noreferrer" href="https://leetcode.cn?utm_medium=footer-link&amp;utm_source=main-footer">© <!-- -->2026<!-- --> 领扣网络（上海）有限公司</a></div></div></div><div class="lc-md:right-[300px] z-base-9 fixed bottom-10 right-4 flex flex-col gap-4"><button class="relative text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-sd-ring disabled:pointer-events-none disabled:opacity-50 bg-sd-secondary text-sd-secondary-foreground hover:bg-sd-secondary/80 p-0 rounded-full pointer-events-none flex h-12 w-12 translate-y-5 items-center justify-center opacity-0 transition-all"><div class="relative text-[20px] leading-[normal] p-0.5 before:block before:h-5 before:w-5"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="arrow-up-to-line" class="svg-inline--fa fa-arrow-up-to-line absolute left-1/2 top-1/2 h-[1em] -translate-x-1/2 -translate-y-1/2 align-[-0.125em]" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M24 32C10.7 32 0 42.7 0 56S10.7 80 24 80H360c13.3 0 24-10.7 24-24s-10.7-24-24-24H24zM209.5 167.6c-4.5-4.8-10.9-7.6-17.5-7.6s-12.9 2.7-17.5 7.6l-128 136c-9.1 9.7-8.6 24.8 1 33.9s24.8 8.6 33.9-1L168 244.5V328 456c0 13.3 10.7 24 24 24s24-10.7 24-24V328 244.5l86.5 91.9c9.1 9.7 24.3 10.1 33.9 1s10.1-24.3 1-33.9l-128-136z"></path></svg></div></button></div></div></div></div><div role="region" aria-label="Notifications (F8)" tabindex="-1" style="pointer-events:none"><ol tabindex="-1" class="z-message pointer-events-none fixed left-0 top-0 flex max-h-screen w-full flex-col-reverse items-center gap-4 p-4"></ol></div><div style="position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;overflow:hidden;z-index:9999" class="jsx-3741603521"></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"dehydratedState":{"mutations":[],"queries":[{"state":{"data":{"qaQuestion":{"topicId":"3581838","ipRegion":"未知归属地","uuid":"tXLS3i","slug":"fen-xiang-gun-ti-dan-dong-tai-gui-hua-ru-007o","title":"分享丨【算法题单】动态规划（入门/背包/划分/状态机/区间/状压/数位/树形/优化）","thumbnail":"https://pic.leetcode.cn/1710769845-JRnIfA-dp-2.jpg","summary":"前言掌握动态规划（DP）是没有捷径的，咱们唯一能做的，就是投入时间猛猛刷题。好比学数学，只看书看视频而不做习题，是不能说学会的。我能做的，是帮你节省找题的时间，并把这些题分类整理好。有着相同套路的题，一起做效率会更高，也更能领悟到 DP 的精髓。每个小节的题目已按照难度分排序（右侧数字为难度分）。记忆化搜索是新手村神器（甚至可以用到游戏后期），推荐先看 动态规划入门：从记忆化搜索到递推。但记忆化搜索并不是万能的，某些题目只有写成递推，才能结合数据结构等来优化时间复杂度，多数题目还可以优化空间复杂","content":"## 前言\r\n\r\n掌握动态规划（DP）是没有捷径的，咱们唯一能做的，就是投入时间猛猛刷题。好比学数学，只看书看视频而不做习题，是不能说学会的。\r\n\r\n我能做的，是帮你节省找题的时间，并把这些题分类整理好。有着相同套路的题，一起做效率会更高，也更能领悟到 DP 的精髓。每个小节的题目已按照难度分排序（右侧数字为难度分）。\r\n\r\n![动态规划算法题 DP题单 动态规划题单 入门动态规划题目 动态规划新手教程 力扣DP 力扣动态规划 leetcode动态规划 leetcode dp 灵茶山艾府 灵神 灵神题单](https://pic.leetcode.cn/1710769845-JRnIfA-dp-2.jpg)\r\n\r\n**记忆化搜索**是新手村神器（甚至可以用到游戏后期），推荐先看 [动态规划入门：从记忆化搜索到递推](https://www.bilibili.com/video/BV1Xj411K7oF/)。\r\n\r\n但记忆化搜索并不是万能的，某些题目只有写成递推，才能结合数据结构等来优化时间复杂度，多数题目还可以优化空间复杂度。所以尽量在写完记忆化搜索后，把递推的代码也写一下。熟练之后直接写递推也可以。\r\n\r\n## 一、入门 DP\r\n\r\n### §1.1 爬楼梯\r\n\r\n[讲解](https://leetcode.cn/problems/climbing-stairs/solution/jiao-ni-yi-bu-bu-si-kao-dong-tai-gui-hua-7zm1/)\r\n\r\n- [70. 爬楼梯](https://leetcode.cn/problems/climbing-stairs/)\r\n- [746. 使用最小花费爬楼梯](https://leetcode.cn/problems/min-cost-climbing-stairs/) 约 1500\r\n- [3693. 爬楼梯 II](https://leetcode.cn/problems/climbing-stairs-ii/) 1560\r\n- [377. 组合总和 Ⅳ](https://leetcode.cn/problems/combination-sum-iv/) 约 1600\r\n- [2466. 统计构造好字符串的方案数](https://leetcode.cn/problems/count-ways-to-build-good-strings/) 1694\r\n- [2266. 统计打字方案数](https://leetcode.cn/problems/count-number-of-texts/) 1857\r\n- [2533. 好二进制字符串的数量](https://leetcode.cn/problems/number-of-good-binary-strings/)（会员题）同 2466 题\r\n\r\n### §1.2 打家劫舍\r\n\r\n#### 答疑\r\n\r\n**问**：在 1:1 翻译的过程中，如何根据记忆化搜索，确定递推数组（DP 数组）的大小？为什么有时候要开 $n+1$ 大小的数组，有时候要开 $n+2$ 大小的数组？\r\n\r\n**答**：看记忆化搜索的参数的范围（最小值和最大值）。例如 $i$ 最小是 $-1$（递归边界也算），最大是 $n-1$（递归入口），那么一共有 $n+1$ 个不同的 $i$，就需要开 $n+1$ 大小的 DP 数组。如果 $i$ 最小是 $-2$，最大是 $n-1$，一共有 $n+2$ 个不同的 $i$，就需要开 $n+2$ 大小的 DP 数组。\r\n\r\n- [198. 打家劫舍](https://leetcode.cn/problems/house-robber/)\r\n- [213. 打家劫舍 II](https://leetcode.cn/problems/house-robber-ii/) 环形数组\r\n- [2320. 统计放置房子的方式数](https://leetcode.cn/problems/count-number-of-ways-to-place-houses/) 1608\r\n- [740. 删除并获得点数](https://leetcode.cn/problems/delete-and-earn/)\r\n- [3186. 施咒的最大总伤害](https://leetcode.cn/problems/maximum-total-damage-with-spell-casting/) 1841\r\n\r\n**思维扩展**：\r\n\r\n- [2140. 解决智力问题](https://leetcode.cn/problems/solving-questions-with-brainpower/) 1709\r\n\r\n### §1.3 最大子数组和（最大子段和）\r\n\r\n有两种做法：\r\n\r\n1. 定义状态 $f[i]$ 表示以 $a[i]$ 结尾的最大子数组和，不和 $i$ 左边拼起来就是 $f[i]=a[i]$，和 $i$ 左边拼起来就是 $f[i]=f[i-1]+a[i]$，取最大值就得到了状态转移方程 $f[i]=\\max(f[i−1],0)+a[i]$，答案为 $\\max(f)$。这个做法也叫做 Kadane 算法。\r\n2. 用 [前缀和](https://leetcode.cn/problems/range-sum-query-immutable/solution/qian-zhui-he-ji-qi-kuo-zhan-fu-ti-dan-py-vaar/)，转化成 [121. 买卖股票的最佳时机](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock/)。\r\n\r\n- [53. 最大子数组和](https://leetcode.cn/problems/maximum-subarray/) 可以看看我题解中的**思考题**\r\n- [2606. 找到最大开销的子字符串](https://leetcode.cn/problems/find-the-substring-with-maximum-cost/) 1422\r\n- [1749. 任意子数组和的绝对值的最大值](https://leetcode.cn/problems/maximum-absolute-sum-of-any-subarray/) 1542\r\n- [1191. K 次串联后最大子数组之和](https://leetcode.cn/problems/k-concatenation-maximum-sum/) 1748\r\n- [918. 环形子数组的最大和](https://leetcode.cn/problems/maximum-sum-circular-subarray/) 1777 环形数组\r\n- [2321. 拼接数组的最大分数](https://leetcode.cn/problems/maximum-score-of-spliced-array/) 1791\r\n\r\n**思维扩展**：\r\n\r\n- [152. 乘积最大子数组](https://leetcode.cn/problems/maximum-product-subarray/)\r\n- [1186. 删除一次得到子数组最大和](https://leetcode.cn/problems/maximum-subarray-sum-with-one-deletion/) 1799\r\n- [3381. 长度可被 K 整除的子数组的最大元素和](https://leetcode.cn/problems/maximum-subarray-sum-with-length-divisible-by-k/) 1943\r\n\r\n### 思考题\r\n\r\n完成本章后，请思考：什么时候要返回 $f[n]$，什么时候要返回 $\\max(f)$？\r\n\r\n## 二、网格图 DP\r\n\r\n对于一些二维 DP（例如背包、最长公共子序列），如果把 DP 矩阵画出来，其实状态转移可以视作**在网格图上的移动**。所以在学习相对更抽象的二维 DP 之前，做一些形象的网格图 DP 会让后续的学习更轻松（比如 0-1 背包的空间优化写法为什么要倒序遍历）。\r\n\r\n[讲解](https://leetcode.cn/problems/minimum-path-sum/solutions/3045828/jiao-ni-yi-bu-bu-si-kao-dpcong-ji-yi-hua-zfb2/)\r\n\r\n### §2.1 基础\r\n\r\n- [64. 最小路径和](https://leetcode.cn/problems/minimum-path-sum/)\r\n- [62. 不同路径](https://leetcode.cn/problems/unique-paths/)\r\n- [63. 不同路径 II](https://leetcode.cn/problems/unique-paths-ii/)\r\n- [120. 三角形最小路径和](https://leetcode.cn/problems/triangle/)\r\n- [3393. 统计异或值为给定值的路径数目](https://leetcode.cn/problems/count-paths-with-the-given-xor-value/) 1573\r\n- [931. 下降路径最小和](https://leetcode.cn/problems/minimum-falling-path-sum/) 1573\r\n- [2684. 矩阵中移动的最大次数](https://leetcode.cn/problems/maximum-number-of-moves-in-a-grid/) 1626\r\n- [3603. 交替方向的最小路径代价 II](https://leetcode.cn/problems/minimum-cost-path-with-alternating-directions-ii/) 1639\r\n- [2304. 网格中的最小路径代价](https://leetcode.cn/problems/minimum-path-cost-in-a-grid/) 1658\r\n- [1289. 下降路径最小和 II](https://leetcode.cn/problems/minimum-falling-path-sum-ii/) 1697\r\n- [3418. 机器人可以获得的最大金币数](https://leetcode.cn/problems/maximum-amount-of-money-robot-can-earn/) 1798\r\n- [3742. 网格中得分最大的路径](https://leetcode.cn/problems/maximum-path-score-in-a-grid/) 1804\r\n\r\n**思维扩展**：\r\n\r\n- [1824. 最少侧跳次数](https://leetcode.cn/problems/minimum-sideway-jumps/) 1778\r\n\r\n### §2.2 进阶\r\n\r\n- [1594. 矩阵的最大非负积](https://leetcode.cn/problems/maximum-non-negative-product-in-a-matrix/) 1807\r\n- [1301. 最大得分的路径数目](https://leetcode.cn/problems/number-of-paths-with-max-score/) 1853\r\n- [3665. 统计镜子反射路径数目](https://leetcode.cn/problems/twisted-mirror-path-count/) 1883\r\n- [2435. 矩阵中和能被 K 整除的路径](https://leetcode.cn/problems/paths-in-matrix-whose-sum-is-divisible-by-k/) 1952\r\n- [174. 地下城游戏](https://leetcode.cn/problems/dungeon-game/)\r\n- [329. 矩阵中的最长递增路径](https://leetcode.cn/problems/longest-increasing-path-in-a-matrix/)\r\n- [2328. 网格图中递增路径的数目](https://leetcode.cn/problems/number-of-increasing-paths-in-a-grid/) 2001\r\n- [2267. 检查是否有合法括号字符串路径](https://leetcode.cn/problems/check-if-there-is-a-valid-parentheses-string-path/) 2085\r\n- [1937. 扣分后的最大得分](https://leetcode.cn/problems/maximum-number-of-points-with-cost/) 2106\r\n- [3363. 最多可收集的水果数目](https://leetcode.cn/problems/find-the-maximum-number-of-fruits-collected/) 实际难度 2200\r\n- [1463. 摘樱桃 II](https://leetcode.cn/problems/cherry-pickup-ii/)\r\n- [741. 摘樱桃](https://leetcode.cn/problems/cherry-pickup/)\r\n- [3459. 最长 V 形对角线段的长度](https://leetcode.cn/problems/length-of-longest-v-shaped-diagonal-segment/) 2337 状态设计\r\n- [2510. 检查是否有路径经过相同数量的 0 和 1](https://leetcode.cn/problems/check-if-there-is-a-path-with-equal-number-of-0s-and-1s/)（会员题）\r\n\r\n## 三、背包\r\n\r\n讲解：[0-1 背包 完全背包【基础算法精讲 18】](https://www.bilibili.com/video/BV16Y411v7Y6/)\r\n\r\n### §3.1 0-1 背包\r\n\r\n每个物品只能选一次，即要么选，要么不选。\r\n\r\n所以 0-1 背包是「选或不选」的代表。关于「枚举选哪个」的代表，见本题单的「§4.2 最长递增子序列」。\r\n\r\n- [416. 分割等和子集](https://leetcode.cn/problems/partition-equal-subset-sum/)\r\n- [494. 目标和](https://leetcode.cn/problems/target-sum/)\r\n- [2915. 和为目标值的最长子序列的长度](https://leetcode.cn/problems/length-of-the-longest-subsequence-that-sums-to-target/) 1659\r\n- [2787. 将一个数字表示成幂的和的方案数](https://leetcode.cn/problems/ways-to-express-an-integer-as-sum-of-powers/) 1818\r\n- [3180. 执行操作可获得的最大总奖励 I](https://leetcode.cn/problems/maximum-total-reward-using-operations-i/) 1849\r\n\r\n**进阶**：\r\n\r\n- [474. 一和零](https://leetcode.cn/problems/ones-and-zeroes/) 二维背包\r\n- [3489. 零数组变换 IV](https://leetcode.cn/problems/zero-array-transformation-iv/) 2068\r\n- [3685. 含上限元素的子序列和](https://leetcode.cn/problems/subsequence-sum-after-capping-elements/) 2073\r\n- [1049. 最后一块石头的重量 II](https://leetcode.cn/problems/last-stone-weight-ii/) 2092\r\n- [1774. 最接近目标价格的甜点成本](https://leetcode.cn/problems/closest-dessert-cost/)\r\n- [879. 盈利计划](https://leetcode.cn/problems/profitable-schemes/) 2204\r\n- [3082. 求出所有子序列的能量和](https://leetcode.cn/problems/find-the-sum-of-the-power-of-all-subsequences/) 2242\r\n- [956. 最高的广告牌](https://leetcode.cn/problems/tallest-billboard/) 2381\r\n- [2518. 好分区的数目](https://leetcode.cn/problems/number-of-great-partitions/) 2415\r\n- [2742. 给墙壁刷油漆](https://leetcode.cn/problems/painting-the-walls/) 2425 至少装满\r\n- [3287. 求出数组中最大序列值](https://leetcode.cn/problems/find-the-maximum-sequence-value-of-array/) 2545\r\n- [3181. 执行操作可获得的最大总奖励 II](https://leetcode.cn/problems/maximum-total-reward-using-operations-ii/) 2688 bitset 优化\r\n- [LCP 47. 入场安检](https://leetcode.cn/problems/oPs9Bm/)\r\n- [2291. 最大股票收益](https://leetcode.cn/problems/maximum-profit-from-trading-stocks/)（会员题）\r\n- [2431. 最大限度地提高购买水果的口味](https://leetcode.cn/problems/maximize-total-tastiness-of-purchased-fruits/)（会员题）\r\n- [3647. 两个袋子中的最大重量](https://leetcode.cn/problems/maximum-weight-in-two-bags/)（会员题）多背包\r\n- [2189. 建造纸牌屋的方法数](https://leetcode.cn/problems/number-of-ways-to-build-house-of-cards/)（会员题）\r\n\r\n### §3.2 完全背包\r\n\r\n物品可以重复选，无个数限制。\r\n\r\n- [322. 零钱兑换](https://leetcode.cn/problems/coin-change/)\r\n- [518. 零钱兑换 II](https://leetcode.cn/problems/coin-change-ii/)\r\n- [279. 完全平方数](https://leetcode.cn/problems/perfect-squares/)\r\n- [3610. 目标和所需的最小质数个数](https://leetcode.cn/problems/minimum-number-of-primes-to-sum-to-target/)（会员题）\r\n- [3183. 达到总和的方法数量](https://leetcode.cn/problems/the-number-of-ways-to-make-the-sum/)（会员题）混合背包\r\n\r\n**思维扩展**：\r\n\r\n- [3592. 硬币面值还原](https://leetcode.cn/problems/inverse-coin-change/) 1701\r\n- [1449. 数位成本和为目标值的最大数字](https://leetcode.cn/problems/form-largest-integer-with-digits-that-add-up-to-target/) 1927\r\n\r\n### §3.3 多重背包（选做）\r\n\r\n物品可以重复选，有个数限制。\r\n\r\n**求方案数**\r\n\r\n注意求方案数的题目不能用二进制优化。比如从 $6$ 个相同物品中选 $3$ 个，只有一种选法。但按照二进制优化，会把 $6$ 分解为 $1+2+3$，有 $1+2$ 和 $3$ 两种选法。\r\n\r\n如果要优化，可以考虑用 [同余前缀和](https://leetcode.cn/problems/count-of-sub-multisets-with-bounded-sum/solutions/2482876/duo-zhong-bei-bao-fang-an-shu-cong-po-su-f5ay/) 优化。\r\n\r\n- [2585. 获得分数的方法数](https://leetcode.cn/problems/number-of-ways-to-earn-points/) 1910\r\n- [3333. 找到初始输入字符串 II](https://leetcode.cn/problems/find-the-original-typed-string-ii/) 2629\r\n- [2902. 和带限制的子多重集合的数目](https://leetcode.cn/problems/count-of-sub-multisets-with-bounded-sum/) 2759\r\n\r\n**二进制优化**\r\n\r\n- [3489. 零数组变换 IV](https://leetcode.cn/problems/zero-array-transformation-iv/)\r\n\r\n### §3.4 分组背包\r\n\r\n同一组内的物品至多/恰好选一个。\r\n\r\n- [1155. 掷骰子等于目标和的方法数](https://leetcode.cn/problems/number-of-dice-rolls-with-target-sum/) 1654\r\n- [1981. 最小化目标值与所选元素的差](https://leetcode.cn/problems/minimize-the-difference-between-target-and-chosen-elements/) 2010\r\n- [2218. 从栈中取出 K 个硬币的最大面值和](https://leetcode.cn/problems/maximum-value-of-k-coins-from-piles/) 2158\r\n\r\n### §3.5 树形背包（选做）\r\n\r\n也叫树上背包、依赖背包等。\r\n\r\n\u003e 注：目前力扣只有无依赖的背包，时间复杂度为 $\\mathcal{O}(nW^2)$。如果有依赖，可以优化到 $\\mathcal{O}(nW)$。\r\n\r\n- [3562. 折扣价交易股票的最大利润](https://leetcode.cn/problems/maximum-profit-from-trading-stocks-with-discounts/) 2458\r\n\r\n## 四、经典线性 DP\r\n\r\n### §4.1 最长公共子序列（LCS）\r\n\r\n讲解：[最长公共子序列 编辑距离【基础算法精讲 19】](https://www.bilibili.com/video/BV1TM4y1o7ug/)\r\n\r\n一般定义 $f[i][j]$ 表示对 $(s[:i],t[:j])$ 的求解结果。\r\n\r\n#### §4.1.1 基础\r\n\r\n- [1143. 最长公共子序列](https://leetcode.cn/problems/longest-common-subsequence/)\r\n- [583. 两个字符串的删除操作](https://leetcode.cn/problems/delete-operation-for-two-strings/)\r\n- [712. 两个字符串的最小 ASCII 删除和](https://leetcode.cn/problems/minimum-ascii-delete-sum-for-two-strings/)\r\n- [72. 编辑距离](https://leetcode.cn/problems/edit-distance/)\r\n- [1035. 不相交的线](https://leetcode.cn/problems/uncrossed-lines/) 1806\r\n- [1458. 两个子序列的最大点积](https://leetcode.cn/problems/max-dot-product-of-two-subsequences/) 1824\r\n\r\n**思维扩展**：\r\n\r\n- [718. 最长重复子数组](https://leetcode.cn/problems/maximum-length-of-repeated-subarray/)\r\n\r\n#### §4.1.2 进阶\r\n\r\n- [3290. 最高乘法得分](https://leetcode.cn/problems/maximum-multiplication-score/) 1692\r\n- [115. 不同的子序列](https://leetcode.cn/problems/distinct-subsequences/)\r\n- [3628. 插入一个字母的最大子序列数](https://leetcode.cn/problems/maximum-number-of-subsequences-after-one-inserting/) 1754\r\n- [3316. 从原字符串里进行删除操作的最多次数](https://leetcode.cn/problems/find-maximum-removals-from-source-string/) 2062\r\n- [1639. 通过给定词典构造目标字符串的方案数](https://leetcode.cn/problems/number-of-ways-to-form-a-target-string-given-a-dictionary/) 2082\r\n- [97. 交错字符串](https://leetcode.cn/problems/interleaving-string/)\r\n- [1092. 最短公共超序列](https://leetcode.cn/problems/shortest-common-supersequence/)\r\n- [44. 通配符匹配](https://leetcode.cn/problems/wildcard-matching/)\r\n- [10. 正则表达式匹配](https://leetcode.cn/problems/regular-expression-matching/)\r\n\r\n**思考题**：\r\n\r\n115 题的扩展。给定字符串 $s$ 和 $t$，你可以在 $s$ 的任意位置插入一个字母，插入后，$s$ 最多有多少个子序列等于 $t$？\r\n\r\n思路和代码见 [评论](https://leetcode.cn/problems/maximize-number-of-subsequences-in-a-string/solutions/1352039/by-endlesscheng-yfyf/comments/2389140)。\r\n\r\n### §4.2 最长递增子序列（LIS）\r\n\r\n讲解：[最长递增子序列【基础算法精讲 20】](https://www.bilibili.com/video/BV1ub411Q7sB/)\r\n\r\n做法有很多：\r\n\r\n1. 枚举选哪个。（见讲解）\r\n2. 二分。（见讲解）\r\n3. 计算 $a$ 和把 $a$ 排序后的数组 $\\textit{sortedA}$ 的最长公共子序列。（用 LCS 求 LIS）\r\n4. 数据结构优化。（见 [2407 题](https://leetcode.cn/problems/longest-increasing-subsequence-ii/)）\r\n\r\n#### §4.2.1 基础\r\n\r\n- [300. 最长递增子序列](https://leetcode.cn/problems/longest-increasing-subsequence/)\r\n- [334. 递增的三元子序列](https://leetcode.cn/problems/increasing-triplet-subsequence/)\r\n- [2826. 将三个组排序](https://leetcode.cn/problems/sorting-three-groups/) 1721\r\n- [1671. 得到山形数组的最少删除次数](https://leetcode.cn/problems/minimum-number-of-removals-to-make-mountain-array/) 1913\r\n- [1964. 找出到每个位置为止最长的有效障碍赛跑路线](https://leetcode.cn/problems/find-the-longest-valid-obstacle-course-at-each-position/) 1933\r\n- [2111. 使数组 K 递增的最少操作次数](https://leetcode.cn/problems/minimum-operations-to-make-the-array-k-increasing/) 1941 包含进阶问题\r\n\r\n#### §4.2.2 进阶\r\n\r\n- [354. 俄罗斯套娃信封问题](https://leetcode.cn/problems/russian-doll-envelopes/)\r\n- [1626. 无矛盾的最佳球队](https://leetcode.cn/problems/best-team-with-no-conflicts/) 2027\r\n- [1691. 堆叠长方体的最大高度](https://leetcode.cn/problems/maximum-height-by-stacking-cuboids/) 2172\r\n- [960. 删列造序 III](https://leetcode.cn/problems/delete-columns-to-make-sorted-iii/) 2247\r\n- [2407. 最长递增子序列 II](https://leetcode.cn/problems/longest-increasing-subsequence-ii/) 2280\r\n- [673. 最长递增子序列的个数](https://leetcode.cn/problems/number-of-longest-increasing-subsequence/)\r\n- [1187. 使数组严格递增](https://leetcode.cn/problems/make-array-strictly-increasing/) 2316\r\n- [1713. 得到子序列的最少操作次数](https://leetcode.cn/problems/minimum-operations-to-make-a-subsequence/) 2351 用 LIS 求 LCS\r\n- [3288. 最长上升路径的长度](https://leetcode.cn/problems/length-of-the-longest-increasing-path/) 2450\r\n\r\n**思维扩展**：\r\n\r\n- [368. 最大整除子集](https://leetcode.cn/problems/largest-divisible-subset/) 约 1800\r\n- [2901. 最长相邻不相等子序列 II](https://leetcode.cn/problems/longest-unequal-adjacent-groups-subsequence-ii/) 1899\r\n\r\n**思考题**：\r\n\r\n给定整数 $k$，构造一个数组 $a$，使得 $a$ 恰好有 $k$ 个最长递增子序列。\r\n\r\n[解答（评论）](https://leetcode.cn/problems/number-of-longest-increasing-subsequence/description/comments/2218054)\r\n\r\n## 五、划分型 DP\r\n\r\n### §5.1 判定能否划分\r\n\r\n一般定义 $f[i]$ 表示长为 $i$ 的前缀 $a[:i]$ 能否划分。\r\n\r\n枚举最后一个子数组的左端点 $L$，从 $f[L]$ 转移到 $f[i]$，并考虑 $a[L:i]$ 是否满足要求。\r\n\r\n- [2369. 检查数组是否存在有效划分](https://leetcode.cn/problems/check-if-there-is-a-valid-partition-for-the-array/) 1780\r\n- [139. 单词拆分](https://leetcode.cn/problems/word-break/)\r\n\r\n### §5.2 最优划分\r\n\r\n计算最少（最多）可以划分出多少段、最优划分得分等。\r\n\r\n一般定义 $f[i]$ 表示长为 $i$ 的前缀 $a[:i]$ 在题目约束下，分割出的最少（最多）子数组个数（或者定义成分割方案数）。\r\n\r\n枚举最后一个子数组的左端点 $L$，从 $f[L]$ 转移到 $f[i]$，并考虑 $a[L:i]$ 对最优解的影响。\r\n\r\n- [132. 分割回文串 II](https://leetcode.cn/problems/palindrome-partitioning-ii/)\r\n- [2707. 字符串中的额外字符](https://leetcode.cn/problems/extra-characters-in-a-string/) 1736\r\n- [3196. 最大化子数组的总成本](https://leetcode.cn/problems/maximize-total-cost-of-alternating-subarrays/) 1847 也有状态机 DP 做法\r\n- [2767. 将字符串分割为最少的美丽子字符串](https://leetcode.cn/problems/partition-string-into-minimum-beautiful-substrings/) 1865\r\n- [91. 解码方法](https://leetcode.cn/problems/decode-ways/)\r\n- [639. 解码方法 II](https://leetcode.cn/problems/decode-ways-ii/)\r\n- [LCR 165. 解密数字](https://leetcode.cn/problems/ba-shu-zi-fan-yi-cheng-zi-fu-chuan-lcof/)\r\n- [1043. 分隔数组以得到最大和](https://leetcode.cn/problems/partition-array-for-maximum-sum/) 1916\r\n- [3144. 分割字符频率相等的最少子字符串](https://leetcode.cn/problems/minimum-substring-partition-of-equal-character-frequency/) 1917\r\n- [1416. 恢复数组](https://leetcode.cn/problems/restore-the-array/) 1920\r\n- [2472. 不重叠回文子字符串的最大数目](https://leetcode.cn/problems/maximum-number-of-non-overlapping-palindrome-substrings/) 2013\r\n- [1105. 填充书架](https://leetcode.cn/problems/filling-bookcase-shelves/) 2014\r\n- [2547. 拆分数组的最小代价](https://leetcode.cn/problems/minimum-cost-to-split-an-array/) 2020\r\n- [3578. 统计极差最大为 K 的分割方式数](https://leetcode.cn/problems/count-partitions-with-max-min-difference-at-most-k/) 2033 优化\r\n- [2430. 对字母串可执行的最大删除数](https://leetcode.cn/problems/maximum-deletions-on-a-string/) 2102\r\n- [2463. 最小移动总距离](https://leetcode.cn/problems/minimum-total-distance-traveled/) 2454\r\n- [3579. 字符串转换需要的最小操作数](https://leetcode.cn/problems/minimum-steps-to-convert-string-with-operations/) 2493 可以做到 $\\mathcal{O}(n^2)$\r\n- [3500. 将数组分割为子数组的最小代价](https://leetcode.cn/problems/minimum-cost-to-divide-array-into-subarrays/) 2569 式子变形\r\n- [2977. 转换字符串的最小成本 II](https://leetcode.cn/problems/minimum-cost-to-convert-string-ii/) 2696\r\n- [3441. 变成好标题的最少代价](https://leetcode.cn/problems/minimum-cost-good-caption/) 2765\r\n- [2052. 将句子分隔成行的最低成本](https://leetcode.cn/problems/minimum-cost-to-separate-sentence-into-rows/)（会员题）\r\n- [2464. 有效分割中的最少子数组数目](https://leetcode.cn/problems/minimum-subarrays-in-a-valid-split/)（会员题）\r\n\r\n### §5.3 约束划分个数\r\n\r\n将数组分成（恰好/至多）$k$ 个连续子数组，计算与这些子数组有关的最优值。\r\n\r\n一般定义 $f[i][j]$ 表示将长为 $j$ 的前缀 $a[:j]$ 分成 $i$ 个连续子数组所得到的最优解。\r\n\r\n枚举最后一个子数组的左端点 $L$，从 $f[i-1][L]$ 转移到 $f[i][j]$，并考虑 $a[L:j]$ 对最优解的影响。\r\n\r\n\u003e 注：对于恰好型划分 DP，可以通过控制内层循环的上下界，把时间复杂度从 $\\mathcal{O}(nk)$ 优化至 $\\mathcal{O}((n-k)k)$。例如 3473 题。\r\n\r\n- [813. 最大平均值和的分组](https://leetcode.cn/problems/largest-sum-of-averages/) 1937\r\n- [3599. 划分数组得到最小 XOR](https://leetcode.cn/problems/partition-array-to-minimize-xor/) 1955 做法不止一种\r\n- [410. 分割数组的最大值](https://leetcode.cn/problems/split-array-largest-sum/)\r\n- [1278. 分割回文串 III](https://leetcode.cn/problems/palindrome-partitioning-iii/) 1979\r\n- [1745. 分割回文串 IV](https://leetcode.cn/problems/palindrome-partitioning-iv/)\r\n- [1335. 工作计划的最低难度](https://leetcode.cn/problems/minimum-difficulty-of-a-job-schedule/) 2035\r\n- [1473. 粉刷房子 III](https://leetcode.cn/problems/paint-house-iii/) 2056\r\n- [2209. 用地毯覆盖后的最少白色砖块](https://leetcode.cn/problems/minimum-white-tiles-after-covering-with-carpets/) 2106\r\n- [1478. 安排邮筒](https://leetcode.cn/problems/allocate-mailboxes/) 2190\r\n- [3473. 长度至少为 M 的 K 个子数组之和](https://leetcode.cn/problems/sum-of-k-subarrays-with-length-at-least-m/) 2274 优化\r\n- [1959. K 次调整数组大小浪费的最小总空间](https://leetcode.cn/problems/minimum-total-space-wasted-with-k-resizing-operations/) 2310\r\n- [2478. 完美分割的方案数](https://leetcode.cn/problems/number-of-beautiful-partitions/) 2344\r\n- [3538. 合并得到最小旅行时间](https://leetcode.cn/problems/merge-operations-for-minimum-travel-time/) 2461 相邻相关\r\n- [3505. 使 K 个子数组内元素相等的最少操作数](https://leetcode.cn/problems/minimum-operations-to-make-elements-within-k-subarrays-equal/) 2539\r\n- [3077. K 个不相交子数组的最大能量值](https://leetcode.cn/problems/maximum-strength-of-k-disjoint-subarrays/) 2557 优化\r\n- [2911. 得到 K 个半回文串的最少修改次数](https://leetcode.cn/problems/minimum-changes-to-make-k-semi-palindromes/) 2608\r\n- [3117. 划分数组得到最小的值之和](https://leetcode.cn/problems/minimum-sum-of-values-by-dividing-array/) 2735\r\n\r\n## 六、状态机 DP\r\n\r\n一般定义 $f[i][j]$ 表示前缀 $a[:i]$ 在状态 $j$ 下的最优值。$j$ 一般很小。\r\n\r\n### §6.1 买卖股票\r\n\r\n[讲解【基础算法精讲 21】](https://www.bilibili.com/video/BV1ho4y1W7QK/)\r\n\r\n- [121. 买卖股票的最佳时机](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock/) 交易一次\r\n- [122. 买卖股票的最佳时机 II](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-ii/) 交易次数不限\r\n- [123. 买卖股票的最佳时机 III](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iii/) 交易两次\r\n- [188. 买卖股票的最佳时机 IV](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iv/) 交易 $k$ 次\r\n- [3573. 买卖股票的最佳时机 V](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-v/) 交易 $k$ 次 1777\r\n- [309. 买卖股票的最佳时机含冷冻期](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-cooldown/) 交易次数不限\r\n- [714. 买卖股票的最佳时机含手续费](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-transaction-fee/) 交易次数不限\r\n\r\n### §6.2 基础\r\n\r\n- [3259. 超级饮料的最大强化能量](https://leetcode.cn/problems/maximum-energy-boost-from-two-drinks/) 1484\r\n- [2222. 选择建筑的方案数](https://leetcode.cn/problems/number-of-ways-to-select-buildings/) 1657\r\n- [2708. 一个小组的最大实力值](https://leetcode.cn/problems/maximum-strength-of-a-group/) 做到 $\\mathcal{O}(n)$ 时间（联系 152 题）\r\n- [1567. 乘积为正数的最长子数组长度](https://leetcode.cn/problems/maximum-length-of-subarray-with-positive-product/) 1710\r\n- [2786. 访问数组中的位置使分数最大](https://leetcode.cn/problems/visit-array-positions-to-maximize-score/) 1733\r\n- [1911. 最大交替子序列和](https://leetcode.cn/problems/maximum-alternating-subsequence-sum/) 1786\r\n- [376. 摆动序列](https://leetcode.cn/problems/wiggle-subsequence/)\r\n- [3466. 最大硬币收集量](https://leetcode.cn/problems/maximum-coin-collection/)（会员题）\r\n\r\n### §6.3 进阶\r\n\r\n- [3628. 插入一个字母的最大子序列数](https://leetcode.cn/problems/maximum-number-of-subsequences-after-one-inserting/) 1754\r\n- [2771. 构造最长非递减子数组](https://leetcode.cn/problems/longest-non-decreasing-subarray-from-two-arrays/) 1792\r\n- [1186. 删除一次得到子数组最大和](https://leetcode.cn/problems/maximum-subarray-sum-with-one-deletion/) 1799\r\n- [1594. 矩阵的最大非负积](https://leetcode.cn/problems/maximum-non-negative-product-in-a-matrix/) 1807\r\n- [3738. 替换至多一个元素后最长非递减子数组](https://leetcode.cn/problems/longest-non-decreasing-subarray-after-replacing-at-most-one-element/) 1811\r\n- [3196. 最大化子数组的总成本](https://leetcode.cn/problems/maximize-total-cost-of-alternating-subarrays/) 1847 也有划分型 DP 做法\r\n- [935. 骑士拨号器](https://leetcode.cn/problems/knight-dialer/)\r\n- [1537. 最大得分](https://leetcode.cn/problems/get-the-maximum-score/) 1961\r\n- [2919. 使数组变美的最小增量运算数](https://leetcode.cn/problems/minimum-increment-operations-to-make-array-beautiful/) 2031\r\n- [801. 使序列递增的最小交换次数](https://leetcode.cn/problems/minimum-swaps-to-make-sequences-increasing/) 2066\r\n- [3434. 子数组操作后的最大频率](https://leetcode.cn/problems/maximum-frequency-after-subarray-operation/) 2094\r\n- [1955. 统计特殊子序列的数目](https://leetcode.cn/problems/count-number-of-special-subsequences/) 2125\r\n- [3068. 最大节点价值之和](https://leetcode.cn/problems/find-the-maximum-sum-of-node-values/) 2268\r\n- [3640. 三段式数组 II](https://leetcode.cn/problems/trionic-array-ii/) 2278\r\n- [2272. 最大波动的子字符串](https://leetcode.cn/problems/substring-with-largest-variance/) 2516\r\n- [3661. 可以被机器人摧毁的最大墙壁数目](https://leetcode.cn/problems/maximum-walls-destroyed-by-robots/) 2525\r\n- [3743. 循环划分的最大得分](https://leetcode.cn/problems/maximize-cyclic-partition-score/) 3125 环形数组\r\n- [LCP 19. 秋叶收藏集](https://leetcode.cn/problems/UlBDOe/)\r\n- [276. 栅栏涂色](https://leetcode.cn/problems/paint-fence/)（会员题）\r\n- [1746. 经过一次操作后的最大子数组和](https://leetcode.cn/problems/maximum-subarray-sum-after-one-operation/)（会员题）\r\n- [2036. 最大交替子数组和](https://leetcode.cn/problems/maximum-alternating-subarray-sum/)（会员题）\r\n- [2361. 乘坐火车路线的最少费用](https://leetcode.cn/problems/minimum-costs-using-the-train-line/)（会员题）\r\n- [3269. 构建两个递增数组](https://leetcode.cn/problems/constructing-two-increasing-arrays/)（会员题）\r\n\r\n## 七、其他线性 DP\r\n\r\n### §7.1 一维 DP\r\n\r\n发生在前缀/后缀之间的转移，例如从 $f[i-1]$ 转移到 $f[i]$，或者从 $f[j]$ 转移到 $f[i]$。\r\n\r\n- [3147. 从魔法师身上吸取的最大能量](https://leetcode.cn/problems/taking-maximum-energy-from-the-mystic-dungeon/) 1460\r\n- [2944. 购买水果需要的最少金币数](https://leetcode.cn/problems/minimum-number-of-coins-for-fruits/) 1709\r\n- [2140. 解决智力问题](https://leetcode.cn/problems/solving-questions-with-brainpower/) 1709 可以用刷表法\r\n- [983. 最低票价](https://leetcode.cn/problems/minimum-cost-for-tickets/) 1786 有 $\\mathcal{O}(n)$ 做法\r\n- [368. 最大整除子集](https://leetcode.cn/problems/largest-divisible-subset/) 约 1800\r\n- [2901. 最长相邻不相等子序列 II](https://leetcode.cn/problems/longest-unequal-adjacent-groups-subsequence-ii/) 1899\r\n- [650. 两个键的键盘](https://leetcode.cn/problems/2-keys-keyboard/) 约 2000\r\n- [871. 最低加油次数](https://leetcode.cn/problems/minimum-number-of-refueling-stops/) 2074\r\n- [32. 最长有效括号](https://leetcode.cn/problems/longest-valid-parentheses/)\r\n- [2167. 移除所有载有违禁货物车厢所需的最少时间](https://leetcode.cn/problems/minimum-time-to-remove-all-cars-containing-illegal-goods/) 2219\r\n- [2188. 完成比赛的最少时间](https://leetcode.cn/problems/minimum-time-to-finish-the-race/) 2315\r\n- [2896. 执行操作使两个字符串相等](https://leetcode.cn/problems/apply-operations-to-make-two-strings-equal/) 做到 $\\mathcal{O}(n)$\r\n- [818. 赛车](https://leetcode.cn/problems/race-car/) 2392\r\n- [3389. 使字符频率相等的最少操作次数](https://leetcode.cn/problems/minimum-operations-to-make-character-frequencies-equal/) 2940\r\n- [3464. 正方形上的点之间的最大距离](https://leetcode.cn/problems/maximize-the-distance-between-points-on-a-square/)\r\n- [3205. 最大数组跳跃得分 I](https://leetcode.cn/problems/maximum-array-hopping-score-i/)（会员题）有 $\\mathcal{O}(n)$ 做法\r\n- [1259. 不相交的握手](https://leetcode.cn/problems/handshakes-that-dont-cross/)（会员题）\r\n- [2597. 美丽子集的数目](https://leetcode.cn/problems/the-number-of-beautiful-subsets/) 用 DP 解决\r\n- [2638. 统计 K-Free 子集的总数](https://leetcode.cn/problems/count-the-number-of-k-free-subsets/)（会员题）上面这题的加强版\r\n\r\n### §7.2 不相交区间\r\n\r\n- [2830. 销售利润最大化](https://leetcode.cn/problems/maximize-the-profit-as-the-salesman/) 1851\r\n- [2008. 出租车的最大盈利](https://leetcode.cn/problems/maximum-earnings-from-taxi/) 1872\r\n- [2054. 两个最好的不重叠活动](https://leetcode.cn/problems/two-best-non-overlapping-events/) 1883\r\n- [1235. 规划兼职工作](https://leetcode.cn/problems/maximum-profit-in-job-scheduling/) 2023 做法不止一种\r\n- [1751. 最多可以参加的会议数目 II](https://leetcode.cn/problems/maximum-number-of-events-that-can-be-attended-ii/) 2041\r\n- [3414. 不重叠区间的最大得分](https://leetcode.cn/problems/maximum-score-of-non-overlapping-intervals/) 2723\r\n\r\n### §7.3 子数组 DP\r\n\r\n- [53. 最大子数组和](https://leetcode.cn/problems/maximum-subarray/)\r\n- [152. 乘积最大子数组](https://leetcode.cn/problems/maximum-product-subarray/)\r\n- [1186. 删除一次得到子数组最大和](https://leetcode.cn/problems/maximum-subarray-sum-with-one-deletion/) 1799\r\n- [3738. 替换至多一个元素后最长非递减子数组](https://leetcode.cn/problems/longest-non-decreasing-subarray-after-replacing-at-most-one-element/) 1811\r\n- [3524. 求出数组的 X 值 I](https://leetcode.cn/problems/find-x-value-of-array-i/) 2008 刷表法\r\n- [3448. 统计可以被最后一个数位整除的子字符串数目](https://leetcode.cn/problems/count-substrings-divisible-by-last-digit/) 2387 刷表法\r\n\r\n**思维扩展**：\r\n\r\n- [2262. 字符串的总引力](https://leetcode.cn/problems/total-appeal-of-a-string/) 2033\r\n- [828. 统计子串中的唯一字符](https://leetcode.cn/problems/count-unique-characters-of-all-substrings-of-a-given-string/) 2034\r\n- [467. 环绕字符串中唯一的子字符串](https://leetcode.cn/problems/unique-substrings-in-wraparound-string/)\r\n\r\n### §7.4 合法子序列 DP\r\n\r\n计算合法子序列的最长长度、个数、元素和等。\r\n\r\n一般定义 $f[x]$ 表示以元素 $x$ 结尾的合法子序列的最长长度/个数/元素和，从子序列的倒数第二个数转移过来。\r\n\r\n注意这里的 $x$ 不是下标，是元素值。如果 $x$ 不是整数，或者值域范围很大，可以用哈希表代替数组。\r\n\r\n- [2501. 数组中最长的方波](https://leetcode.cn/problems/longest-square-streak-in-an-array/) 1480\r\n- [1218. 最长定差子序列](https://leetcode.cn/problems/longest-arithmetic-subsequence-of-given-difference/) 1597\r\n- [2826. 将三个组排序](https://leetcode.cn/problems/sorting-three-groups/) 1721 做法不止一种\r\n- [1027. 最长等差数列](https://leetcode.cn/problems/longest-arithmetic-subsequence/) 1759\r\n- [2370. 最长理想子序列](https://leetcode.cn/problems/longest-ideal-subsequence/) 1835\r\n- [873. 最长的斐波那契子序列的长度](https://leetcode.cn/problems/length-of-longest-fibonacci-subsequence/) 1911\r\n- [3686. 稳定子序列的数量](https://leetcode.cn/problems/number-of-stable-subsequences/) 1969\r\n- [3202. 找出有效子序列的最大长度 II](https://leetcode.cn/problems/find-the-maximum-length-of-valid-subsequence-ii/) 1974\r\n- [446. 等差数列划分 II - 子序列](https://leetcode.cn/problems/arithmetic-slices-ii-subsequence/) 求个数\r\n- [3351. 好子序列的元素之和](https://leetcode.cn/problems/sum-of-good-subsequences/) 2086 求和\r\n- [3041. 修改数组后最大化数组中的连续元素数目](https://leetcode.cn/problems/maximize-consecutive-elements-in-an-array-after-modification/) 2231\r\n- [3409. 最长相邻绝对差递减子序列](https://leetcode.cn/problems/longest-subsequence-with-decreasing-adjacent-difference/) 2500 状态设计\r\n- [3098. 求出所有子序列的能量和](https://leetcode.cn/problems/find-the-sum-of-subsequence-powers/) 2553\r\n- [2901. 最长相邻不相等子序列 II](https://leetcode.cn/problems/longest-unequal-adjacent-groups-subsequence-ii/) 做到线性复杂度\r\n- [3299. 连续子序列的和](https://leetcode.cn/problems/sum-of-consecutive-subsequences/)（会员题）\r\n\r\n**思维扩展**：\r\n\r\n- [1048. 最长字符串链](https://leetcode.cn/problems/longest-string-chain/) 1599\r\n- [940. 不同的子序列 II](https://leetcode.cn/problems/distinct-subsequences-ii/) 1985\r\n- [1987. 不同的好子序列数目](https://leetcode.cn/problems/number-of-unique-good-subsequences/) 2422 思考方式同 940 题\r\n- [730. 统计不同回文子序列](https://leetcode.cn/problems/count-different-palindromic-subsequences/)\r\n\r\n### §7.5 子矩形 DP\r\n\r\n- [3148. 矩阵中的最大得分](https://leetcode.cn/problems/maximum-difference-score-in-a-grid/) 1820\r\n- [221. 最大正方形](https://leetcode.cn/problems/maximal-square/)\r\n- [1277. 统计全为 1 的正方形子矩阵](https://leetcode.cn/problems/count-square-submatrices-with-all-ones/)\r\n- [2088. 统计农场中肥沃金字塔的数目](https://leetcode.cn/problems/count-fertile-pyramids-in-a-land/) 2105\r\n- [3197. 包含所有 1 的最小矩形面积 II](https://leetcode.cn/problems/find-the-minimum-area-to-cover-all-ones-ii/) 做到 $\\mathcal{O}(mn)$\r\n\r\n### §7.6 多维 DP\r\n\r\n不会设计状态？那你可要好好刷这一节了。\r\n\r\n- [2222. 选择建筑的方案数](https://leetcode.cn/problems/number-of-ways-to-select-buildings/) 1657 把 $3$ 改成 $k$ 怎么做？\r\n- [2826. 将三个组排序](https://leetcode.cn/problems/sorting-three-groups/) 1721 做法不止一种\r\n- [2400. 恰好移动 k 步到达某一位置的方法数目](https://leetcode.cn/problems/number-of-ways-to-reach-a-position-after-exactly-k-steps/) 1751\r\n- [1262. 可被三整除的最大和](https://leetcode.cn/problems/greatest-sum-divisible-by-three/) 1762\r\n- [3332. 旅客可以得到的最多点数](https://leetcode.cn/problems/maximum-points-tourist-can-earn/) 1828\r\n- [3176. 求出最长好子序列 I](https://leetcode.cn/problems/find-the-maximum-length-of-a-good-subsequence-i/) 1849\r\n- [1269. 停在原地的方案数](https://leetcode.cn/problems/number-of-ways-to-stay-in-the-same-place-after-some-steps/) 1854\r\n- [3250. 单调数组对的数目 I](https://leetcode.cn/problems/find-the-count-of-monotonic-pairs-i/) 1898\r\n- [3218. 切蛋糕的最小总开销 I](https://leetcode.cn/problems/minimum-cost-for-cutting-cake-i/) 也有贪心做法\r\n- [3122. 使矩阵满足条件的最少操作次数](https://leetcode.cn/problems/minimum-number-of-operations-to-satisfy-conditions/) 1905\r\n- [576. 出界的路径数](https://leetcode.cn/problems/out-of-boundary-paths/)\r\n- [403. 青蛙过河](https://leetcode.cn/problems/frog-jump/)\r\n- [3725. 统计每一行选择互质整数的方案数](https://leetcode.cn/problems/count-ways-to-choose-coprime-integers-from-rows/) 1982\r\n- [1223. 掷骰子模拟](https://leetcode.cn/problems/dice-roll-simulation/) 2008\r\n- [1320. 二指输入的的最小距离](https://leetcode.cn/problems/minimum-distance-to-type-a-word-using-two-fingers/) 2028 状态优化\r\n- [3366. 最小数组和](https://leetcode.cn/problems/minimum-array-sum/) 2040\r\n- [1575. 统计所有可行路径](https://leetcode.cn/problems/count-all-possible-routes/) 2055\r\n- [3154. 到达第 K 级台阶的方案数](https://leetcode.cn/problems/find-number-of-ways-to-reach-the-k-th-stair/) 2071\r\n- [2318. 不同骰子序列的数目](https://leetcode.cn/problems/number-of-distinct-roll-sequences/) 2090\r\n- [3469. 移除所有数组元素的最小代价](https://leetcode.cn/problems/find-minimum-cost-to-remove-array-elements/) 2112 状态设计\r\n- [2746. 字符串连接删减字母](https://leetcode.cn/problems/decremental-string-concatenation/) 2126\r\n- [1444. 切披萨的方案数](https://leetcode.cn/problems/number-of-ways-of-cutting-a-pizza/) 2127\r\n- [3320. 统计能获胜的出招序列数](https://leetcode.cn/problems/count-the-number-of-winning-sequences/) 2153\r\n- [3429. 粉刷房子 IV](https://leetcode.cn/problems/paint-house-iv/) 2166\r\n- [2896. 执行操作使两个字符串相等](https://leetcode.cn/problems/apply-operations-to-make-two-strings-equal/) 2172\r\n- [1420. 生成数组](https://leetcode.cn/problems/build-array-where-you-can-find-the-maximum-exactly-k-comparisons/) 2176\r\n- [3193. 统计逆序对的数目](https://leetcode.cn/problems/count-the-number-of-inversions/) 2266\r\n- [1079. 活字印刷](https://leetcode.cn/problems/letter-tile-possibilities/) 计数 DP，做到 $\\mathcal{O}(n^2)$\r\n- [1866. 恰有 K 根木棍可以看到的排列数目](https://leetcode.cn/problems/number-of-ways-to-rearrange-sticks-with-k-sticks-visible/) 2333\r\n- [2312. 卖木头块](https://leetcode.cn/problems/selling-pieces-of-wood/) 2363\r\n- [3177. 求出最长好子序列 II](https://leetcode.cn/problems/find-the-maximum-length-of-a-good-subsequence-ii/) 2365\r\n- [1884. 鸡蛋掉落-两枚鸡蛋](https://leetcode.cn/problems/egg-drop-with-2-eggs-and-n-floors/)\r\n- [887. 鸡蛋掉落](https://leetcode.cn/problems/super-egg-drop/) 2377\r\n- [920. 播放列表的数量](https://leetcode.cn/problems/number-of-music-playlists/) 2400\r\n- [514. 自由之路](https://leetcode.cn/problems/freedom-trail/) 做到 $\\mathcal{O}(nm)$\r\n- [3336. 最大公约数相等的子序列数量](https://leetcode.cn/problems/find-the-number-of-subsequences-with-equal-gcd/) 2403\r\n- [1388. 3n 块披萨](https://leetcode.cn/problems/pizza-with-3n-slices/) 2410\r\n- [903. DI 序列的有效排列](https://leetcode.cn/problems/valid-permutations-for-di-sequence/) 2433\r\n- [1900. 最佳运动员的比拼回合](https://leetcode.cn/problems/the-earliest-and-latest-rounds-where-players-compete/) 2455\r\n- [1531. 压缩字符串 II](https://leetcode.cn/problems/string-compression-ii/) 2576\r\n- [1883. 准时抵达会议现场的最小跳过休息次数](https://leetcode.cn/problems/minimum-skips-to-arrive-at-meeting-on-time/) 2588 避免浮点运算的技巧\r\n- [964. 表示数字的最少运算符](https://leetcode.cn/problems/least-operators-to-express-number/) 2594\r\n- [3343. 统计平衡排列的数目](https://leetcode.cn/problems/count-number-of-balanced-permutations/) 2615 计数 DP\r\n- [1787. 使所有区间的异或结果为零](https://leetcode.cn/problems/make-the-xor-of-all-segments-equal-to-zero/) 2640\r\n- [3509. 最大化交错和为 K 的子序列乘积](https://leetcode.cn/problems/maximum-product-of-subsequences-with-an-alternating-sum-equal-to-k/) 2703\r\n- [3441. 变成好标题的最少代价](https://leetcode.cn/problems/minimum-cost-good-caption/) 2765\r\n- [3539. 魔法序列的数组乘积之和](https://leetcode.cn/problems/find-sum-of-array-product-of-magical-sequences/) 2694 计数 DP\r\n- [2060. 同源字符串检测](https://leetcode.cn/problems/check-if-an-original-string-exists-given-two-encoded-strings/) 2804\r\n- [2809. 使数组和小于等于 x 的最少时间](https://leetcode.cn/problems/minimum-time-to-make-array-sum-at-most-x/) 2979\r\n- [3003. 执行操作后的最大分割数量](https://leetcode.cn/problems/maximize-the-number-of-partitions-after-operations/) 3039 如何分析时间复杂度\r\n- [3225. 网格图操作后的最大分数](https://leetcode.cn/problems/maximum-score-from-grid-operations/) 3028 IOI2022 原题\r\n- [LCP 57. 打地鼠](https://leetcode.cn/problems/ZbAuEH/)\r\n- [LCP 43. 十字路口的交通](https://leetcode.cn/problems/Y1VbOX/)\r\n- [LCP 65. 舒适的湿度](https://leetcode.cn/problems/3aqs1c/)\r\n- [LCP 36. 最多牌组数](https://leetcode.cn/problems/Up5XYM/)\r\n- [LCP 38. 守卫城堡](https://leetcode.cn/problems/7rLGCR/)\r\n- [256. 粉刷房子](https://leetcode.cn/problems/paint-house/)（会员题）\r\n- [265. 粉刷房子 II](https://leetcode.cn/problems/paint-house-ii/)（会员题）\r\n- [3339. 查找 K 偶数数组的数量](https://leetcode.cn/problems/find-the-number-of-k-even-arrays/)（会员题）\r\n- [568. 最大休假天数](https://leetcode.cn/problems/maximum-vacation-days/)（会员题）\r\n- [1692. 计算分配糖果的不同方式](https://leetcode.cn/problems/count-ways-to-distribute-candies/)（会员题）\r\n- [2143. 在两个数组的区间中选取数字](https://leetcode.cn/problems/choose-numbers-from-two-arrays-in-range/)（会员题）\r\n- [3269. 构建两个递增数组](https://leetcode.cn/problems/constructing-two-increasing-arrays/)（会员题）\r\n\r\n**思维扩展**：\r\n\r\n- [638. 大礼包](https://leetcode.cn/problems/shopping-offers/)\r\n\r\n## 八、区间 DP\r\n\r\n讲解：[区间 DP【基础算法精讲 22】](https://www.bilibili.com/video/BV1Gs4y1E7EU/)\r\n\r\n从数组的左右两端不断缩短，求解关于某段下标区间的最优值。\r\n\r\n一般定义 $f[i][j]$ 表示下标区间 $[i,j]$ 的最优值。\r\n\r\n### §8.1 最长回文子序列\r\n\r\n- [516. 最长回文子序列](https://leetcode.cn/problems/longest-palindromic-subsequence/)\r\n- [1312. 让字符串成为回文串的最少插入次数](https://leetcode.cn/problems/minimum-insertion-steps-to-make-a-string-palindrome/) 1787\r\n- [3472. 至多 K 次操作后的最长回文子序列](https://leetcode.cn/problems/longest-palindromic-subsequence-after-at-most-k-operations/) 1884\r\n- [1771. 由子序列构造的最长回文串的长度](https://leetcode.cn/problems/maximize-palindrome-length-from-subsequences/) 2182\r\n- [730. 统计不同回文子序列](https://leetcode.cn/problems/count-different-palindromic-subsequences/)\r\n- [1682. 最长回文子序列 II](https://leetcode.cn/problems/longest-palindromic-subsequence-ii/)（会员题）\r\n- [1216. 验证回文串 III](https://leetcode.cn/problems/valid-palindrome-iii/)（会员题）\r\n- [1246. 删除回文子数组](https://leetcode.cn/problems/palindrome-removal/)（会员题）\r\n\r\n### §8.2 区间 DP\r\n\r\n对于类似合法括号字符串（RBS）的消除问题，通常根据题意，会有如下性质：\r\n\r\n1. 可以消除相邻的匹配字符。\r\n2. 相邻匹配字符消除后，原本不相邻的字符会变成相邻，可以继续消除。换句话说，设子串 $A = x + B + y$，如果 $x$ 和 $y$ 是匹配的（可以消除），且子串 $B$ 可以完全消除，那么子串 $A$ 可以完全消除。\r\n3. 设子串 $A = B + C$，如果子串 $B$ 和 $C$ 可以完全消除，那么子串 $A$ 可以完全消除。\r\n\r\n满足上述性质的题目（例如 3563 题），可以用区间 DP 解决。\r\n\r\n定义 $f(i,j)$ 表示消除 $s[i]$ 到 $s[j]$ 的最优值。\r\n\r\n- 根据性质 2，可以把 $f(i,j)$ 缩小成子问题 $f(i+1,j-1)$。\r\n- 根据性质 3，可以枚举子串 $B$ 的右端点，即枚举 $k=i+1,i+3,i+5,\\ldots,j-2$，把 $f(i,j)$ 划分成子问题 $f(i,k)$ 和 $f(k+1,j)$。注意这里枚举 $k$ 的步长是 $2$，因为每次消除 $2$ 个字符，被消除的子串长度一定是偶数。\r\n\r\n边界：$f(i+1,i)$，即空串。\r\n\r\n答案：$f(0,n-1)$。\r\n\r\n- [5. 最长回文子串](https://leetcode.cn/problems/longest-palindromic-substring/)\r\n- [647. 回文子串](https://leetcode.cn/problems/palindromic-substrings/)\r\n- [3040. 相同分数的最大操作数目 II](https://leetcode.cn/problems/maximum-number-of-operations-with-the-same-score-ii/) 1709\r\n- [375. 猜数字大小 II](https://leetcode.cn/problems/guess-number-higher-or-lower-ii/)\r\n- [1130. 叶值的最小代价生成树](https://leetcode.cn/problems/minimum-cost-tree-from-leaf-values/) 1919\r\n- [96. 不同的二叉搜索树](https://leetcode.cn/problems/unique-binary-search-trees/)\r\n- [1770. 执行乘法运算的最大分数](https://leetcode.cn/problems/maximum-score-from-performing-multiplication-operations/) 2068\r\n- [1547. 切棍子的最小成本](https://leetcode.cn/problems/minimum-cost-to-cut-a-stick/) 2116\r\n- [1039. 多边形三角剖分的最低得分](https://leetcode.cn/problems/minimum-score-triangulation-of-polygon/) 2130\r\n- [1000. 合并石头的最低成本](https://leetcode.cn/problems/minimum-cost-to-merge-stones/) 2423\r\n- [2019. 解出数学表达式的学生分数](https://leetcode.cn/problems/the-score-of-students-solving-math-expression/) 2584\r\n- [面试题 08.14. 布尔运算](https://leetcode.cn/problems/boolean-evaluation-lcci/)\r\n- [3563. 移除相邻字符后字典序最小的字符串](https://leetcode.cn/problems/lexicographically-smallest-string-after-adjacent-removals/) 2585\r\n- [3277. 查询子数组最大异或值](https://leetcode.cn/problems/maximum-xor-score-subarray-queries/) 2693\r\n- [87. 扰乱字符串](https://leetcode.cn/problems/scramble-string/)\r\n- [312. 戳气球](https://leetcode.cn/problems/burst-balloons/)\r\n- [664. 奇怪的打印机](https://leetcode.cn/problems/strange-printer/)\r\n- [546. 移除盒子](https://leetcode.cn/problems/remove-boxes/) 同 CF1107E\r\n- [471. 编码最短长度的字符串](https://leetcode.cn/problems/encode-string-with-shortest-length/)（会员题）\r\n- [3018. 可处理的最大删除操作数 I](https://leetcode.cn/problems/maximum-number-of-removal-queries-that-can-be-processed-i/)（会员题）\r\n\r\n## 九、状态压缩 DP（状压 DP）\r\n\r\n### §9.1 排列型状压 DP ① 相邻无关\r\n\r\n学习指南：\r\n\r\n- [从集合论到位运算，常见位运算技巧分类总结](https://leetcode.cn/circle/discuss/CaOJ45/)\r\n- [教你一步步思考状压 DP：从记忆化搜索到递推](https://leetcode.cn/problems/beautiful-arrangement/solution/jiao-ni-yi-bu-bu-si-kao-zhuang-ya-dpcong-c6kd/)\r\n\r\n暴力做法是枚举所有排列，对每个排列计算和题目有关的值，时间复杂度（通常来说）是 $\\mathcal{O}(n!)$。可以解决 $n\\le 10$ 的问题。 \r\n\r\n状压 DP 可以把时间复杂度（通常来说）优化至 $\\mathcal{O}(n\\cdot 2^n)$。可以解决 $n\\le 20$ 的问题。\r\n\r\n一般有两种定义方式：\r\n\r\n1. 定义 $f[S]$ 表示已经排列好的元素（下标）集合为 $S$ 时，和题目有关的最优值。通过枚举当前位置要填的元素（下标）来转移。\r\n2. 定义 $f[S]$ 表示可以选的元素（下标）集合为 $S$ 时，和题目有关的最优值。通过枚举当前位置要填的元素（下标）来转移。\r\n\r\n\u003e 注：部分题目由于暴搜+剪枝也能过，难度分仅供参考。\r\n\r\n- [526. 优美的排列](https://leetcode.cn/problems/beautiful-arrangement/)\r\n- [3376. 破解锁的最少时间 I](https://leetcode.cn/problems/minimum-time-to-break-locks-i/)\r\n- [1879. 两个数组最小的异或值之和](https://leetcode.cn/problems/minimum-xor-sum-of-two-arrays/) 2145\r\n- [2850. 将石头分散到网格图的最少移动次数](https://leetcode.cn/problems/minimum-moves-to-spread-stones-over-grid/)\r\n- [1947. 最大兼容性评分和](https://leetcode.cn/problems/maximum-compatibility-score-sum/)\r\n- [1799. N 次操作后的最大分数和](https://leetcode.cn/problems/maximize-score-after-n-operations/)\r\n- [3533. 判断连接可整除性](https://leetcode.cn/problems/concatenated-divisibility/) 2257 字典序 暴搜\r\n- [3530. 有向无环图中合法拓扑排序的最大利润](https://leetcode.cn/problems/maximum-profit-from-valid-topological-order-in-dag/) 2353 拓扑序\r\n- [2172. 数组的最大与和](https://leetcode.cn/problems/maximum-and-sum-of-array/) 2392\r\n- [2992. 自整除排列的数量](https://leetcode.cn/problems/number-of-self-divisible-permutations/)（会员题）\r\n- [2403. 杀死所有怪物的最短时间](https://leetcode.cn/problems/minimum-time-to-kill-all-monsters/)（会员题）同 3376 题\r\n- [1066. 校园自行车分配 II](https://leetcode.cn/problems/campus-bikes-ii/)（会员题）\r\n\r\n### §9.2 排列型状压 DP ② 相邻相关\r\n\r\n一般定义 $f[S][i]$ 表示未选（或者已选）的集合为 $S$，且上一个填的元素（下标）为 $i$ 时，和题目有关的最优值。通过枚举当前位置要填的元素（下标）来转移。\r\n\r\n时间复杂度（通常来说）是 $\\mathcal{O}(n^2\\cdot 2^n)$。\r\n\r\n- [2741. 特别的排列](https://leetcode.cn/problems/special-permutations/) 2021\r\n- [996. 平方数组的数目](https://leetcode.cn/problems/number-of-squareful-arrays/)\r\n- [1681. 最小不兼容性](https://leetcode.cn/problems/minimum-incompatibility/) 2390 见我在官解下的评论\r\n- [3615. 图中的最长回文路径](https://leetcode.cn/problems/longest-palindromic-path-in-graph/) 2463\r\n- [3283. 吃掉所有兵需要的最多移动次数](https://leetcode.cn/problems/maximum-number-of-moves-to-kill-all-pawns/) 2473\r\n- [3149. 找出分数最低的排列](https://leetcode.cn/problems/find-the-minimum-cost-array-permutation/) 2642\r\n\r\n### §9.3 旅行商问题（TSP）\r\n\r\n本质上就是排列型 ②。\r\n\r\n- [943. 最短超级串](https://leetcode.cn/problems/find-the-shortest-superstring/) 2186\r\n- [847. 访问所有节点的最短路径](https://leetcode.cn/problems/shortest-path-visiting-all-nodes/) 2201\r\n- [LCP 13. 寻宝](https://leetcode.cn/problems/xun-bao/)\r\n- [2247. K 条高速公路的最大旅行费用](https://leetcode.cn/problems/maximum-cost-of-trip-with-k-highways/)（会员题）\r\n\r\n**相似问题**：\r\n\r\n- [3568. 清理教室的最少移动](https://leetcode.cn/problems/minimum-moves-to-clean-the-classroom/) 2143\r\n- [864. 获取所有钥匙的最短路径](https://leetcode.cn/problems/shortest-path-to-get-all-keys/) 2259\r\n\r\n### §9.4 子集状压 DP\r\n\r\n一般定义 $f[S]$ 表示未选（或者已选）的集合为 $S$ 时，和题目有关的最优值。通过枚举 $S$（或者 $S$ 的补集 $\\complement_US$）的子集来转移。\r\n\r\n时间复杂度（通常来说）是 $\\mathcal{O}(3^n)$，证明：\r\n\r\n对于大小为 $n$ 的集合，它的大小为 $m$ 的子集有 $\\binom n m$ 个，每个子集又有 $2^m$ 个子集。根据二项式定理，$\\sum\\limits_{m=0}^n \\binom n m 2^m = (2+1)^n = 3^n$，所以「枚举子集的子集」的总体时间复杂度为 $\\mathcal{O}(3^n)$。\r\n\r\n\u003e 注：某些网格图的题也可以用「选或不选」来做，从而减少状态个数，详见「§9.5 轮廓线 DP」。\r\n\r\n- [2305. 公平分发饼干](https://leetcode.cn/problems/fair-distribution-of-cookies/) 1887\r\n- [1986. 完成任务的最少工作时间段](https://leetcode.cn/problems/minimum-number-of-work-sessions-to-finish-the-tasks/) 1995\r\n- [3670. 没有公共位的整数最大乘积](https://leetcode.cn/problems/maximum-product-of-two-integers-with-no-common-bits/) 2234\r\n- [1723. 完成所有工作的最短时间](https://leetcode.cn/problems/find-minimum-time-to-finish-all-jobs/) 2284\r\n- [1655. 分配重复整数](https://leetcode.cn/problems/distribute-repeating-integers/) 2307\r\n- [3444. 使数组包含目标值倍数的最少增量](https://leetcode.cn/problems/minimum-increments-for-target-multiples-in-an-array/) 2337\r\n- [3575. 最大好子树分数](https://leetcode.cn/problems/maximum-good-subtree-score/) 2360\r\n- [1349. 参加考试的最大学生数](https://leetcode.cn/problems/maximum-students-taking-exam/) 2386\r\n- [1681. 最小不兼容性](https://leetcode.cn/problems/minimum-incompatibility/) 2390 有 $\\mathcal{O}(n^2\\cdot 2^n)$ 做法\r\n- [2572. 无平方子集计数](https://leetcode.cn/problems/count-the-number-of-square-free-subsets/) 2420\r\n- [1994. 好子集的数目](https://leetcode.cn/problems/the-number-of-good-subsets/) 2465\r\n- [1494. 并行课程 II](https://leetcode.cn/problems/parallel-courses-ii/)\r\n- [LCP 04. 覆盖](https://leetcode.cn/problems/broken-board-dominoes/)\r\n- [LCP 53. 守护太空城](https://leetcode.cn/problems/EJvmW4/)\r\n- [465. 最优账单平衡](https://leetcode.cn/problems/optimal-account-balancing/)（会员题）\r\n- [2152. 穿过所有点的所需最少直线数量](https://leetcode.cn/problems/minimum-number-of-lines-to-cover-points/)（会员题）\r\n\r\n**相关问题**：\r\n\r\n- [3594. 所有人渡河所需的最短时间](https://leetcode.cn/problems/minimum-time-to-transport-all-individuals/) 2604\r\n\r\n### §9.5 轮廓线 DP\r\n\r\n- [1411. 给 N x 3 网格图涂色的方案数](https://leetcode.cn/problems/number-of-ways-to-paint-n-3-grid/) 1845\r\n- [1931. 用三种不同颜色为网格涂色](https://leetcode.cn/problems/painting-a-grid-with-three-different-colors/) 2170\r\n- [1349. 参加考试的最大学生数](https://leetcode.cn/problems/maximum-students-taking-exam/) 2386\r\n- [1659. 最大化网格幸福感](https://leetcode.cn/problems/maximize-grid-happiness/) 2655\r\n- [980. 不同路径 III](https://leetcode.cn/problems/unique-paths-iii/)\r\n- [LCP 04. 覆盖](https://leetcode.cn/problems/broken-board-dominoes/)\r\n- [LCP 76. 魔法棋盘](https://leetcode.cn/problems/1ybDKD/)\r\n- [2184. 建造坚实的砖墙的方法数](https://leetcode.cn/problems/number-of-ways-to-build-sturdy-brick-wall/)（会员题）\r\n\r\n### §9.6 SOS DP\r\n\r\n子集和 DP（Sum Over Subsets DP，SOS DP），国内算法竞赛圈一般叫高维前缀和。\r\n\r\n[原理讲解（方法二）](https://leetcode.cn/problems/maximum-product-of-two-integers-with-no-common-bits/solutions/3768219/mo-ban-gao-wei-qian-zhui-he-sos-dppython-78fz/)\r\n\r\n模板（从子集转移过来）：\r\n\r\n```py [sol-Python3]\r\n# 设 w 为 a[i] 的二进制最大长度\r\n# 返回一个长为 2^w 的数组 f，其中 f[S] 表示 a 中是 S 的子集的元素个数（把二进制数视作集合）\r\n# 时间复杂度 O(n + U log U)，其中 U = max(a)\r\ndef sos_dp(a: List[int]) -\u003e List[int]:\r\n    mx = max(a)\r\n    w = mx.bit_length()  # 二进制长度上限\r\n    u = 1 \u003c\u003c w\r\n\r\n    f = [0] * u\r\n    for x in a:\r\n        f[x] += 1  # 初始值\r\n\r\n    for i in range(w):\r\n        bit = 1 \u003c\u003c i\r\n        s = 0\r\n        while s \u003c u:\r\n            s |= bit  # 优化：快速跳到 i 位是 1 的 s\r\n            f[s] += f[s ^ bit]\r\n            s += 1\r\n    return f\r\n```\r\n\r\n```java [sol-Java]\r\nclass Solution {\r\n    // 设 w 为 a[i] 的二进制最大长度\r\n    // 返回一个长为 2^w 的数组 f，其中 f[S] 表示 a 中是 S 的子集的元素个数（把二进制数视作集合）\r\n    // 时间复杂度 O(n + U log U)，其中 U = max(a)\r\n    public int[] sosDP(int[] a) {\r\n        int mx = 0;\r\n        for (int x : a) {\r\n            mx = Math.max(mx, x);\r\n        }\r\n\r\n        int w = 32 - Integer.numberOfLeadingZeros(mx); // 二进制长度上限\r\n        int[] f = new int[1 \u003c\u003c w];\r\n        for (int x : a) {\r\n            f[x]++; // 初始值\r\n        }\r\n\r\n        for (int i = 0; i \u003c w; i++) {\r\n            for (int s = 0; s \u003c (1 \u003c\u003c w); s++) {\r\n                s |= 1 \u003c\u003c i; // 优化：快速跳到 i 位是 1 的 s\r\n                f[s] += f[s ^ (1 \u003c\u003c i)];\r\n            }\r\n        }\r\n        return f;\r\n    }\r\n}\r\n```\r\n\r\n```cpp [sol-C++]\r\n// 设 w 为 a[i] 的二进制最大长度\r\n// 返回一个长为 2^w 的数组 f，其中 f[S] 表示 a 中是 S 的子集的元素个数（把二进制数视作集合）\r\n// 时间复杂度 O(n + U log U)，其中 U = max(a)\r\nvector\u003cint\u003e sos_dp(vector\u003cint\u003e\u0026 a) {\r\n    int mx = ranges::max(a);\r\n    int w = bit_width((uint32_t) mx); // 二进制长度上限\r\n\r\n    vector\u003cint\u003e f(1 \u003c\u003c w);\r\n    for (int x : a) {\r\n        f[x]++; // 初始值\r\n    }\r\n\r\n    for (int i = 0; i \u003c w; i++) {\r\n        for (int s = 0; s \u003c (1 \u003c\u003c w); s++) {\r\n            s |= 1 \u003c\u003c i; // 优化：快速跳到 i 位是 1 的 s\r\n            f[s] += f[s ^ (1 \u003c\u003c i)];\r\n        }\r\n    }\r\n    return f;\r\n}\r\n```\r\n\r\n```go [sol-Go]\r\n// 设 w 为 a[i] 的二进制最大长度\r\n// 返回一个长为 2^w 的数组 f，其中 f[S] 表示 a 中是 S 的子集的元素个数（把二进制数视作集合）\r\n// 时间复杂度 O(n + U log U)，其中 U = max(a)\r\nfunc sosDP(a []int) []int {\r\n    mx := slices.Max(a)\r\n    w := bits.Len(uint(mx)) // 二进制长度上限\r\n\r\n    f := make([]int, 1\u003c\u003cw)\r\n    for _, x := range a {\r\n        f[x]++ // 初始值\r\n    }\r\n\r\n    for i := range w {\r\n        for s := 0; s \u003c 1\u003c\u003cw; s++ {\r\n            s |= 1 \u003c\u003c i // 优化：快速跳到 i 位是 1 的 s\r\n            f[s] += f[s^1\u003c\u003ci]\r\n        }\r\n    }\r\n    return f\r\n}\r\n```\r\n\r\n模板（从超集转移过来）：\r\n\r\n```py [sol-Python3]\r\n# 设 w 为 a[i] 的二进制最大长度\r\n# 返回一个长为 2^w 的数组 f，其中 f[S] 表示 a 中是 S 的超集的元素个数（把二进制数视作集合）\r\n# 时间复杂度 O(n + U log U)，其中 U = max(a)\r\ndef sos_dp(a: List[int]) -\u003e List[int]:\r\n    mx = max(a)\r\n    w = mx.bit_length()  # 二进制长度上限\r\n    u = 1 \u003c\u003c w\r\n\r\n    f = [0] * u\r\n    for x in a:\r\n        f[x] += 1  # 初始值\r\n\r\n    for i in range(w):\r\n        bit = 1 \u003c\u003c i\r\n        s = 0\r\n        while s \u003c u:\r\n            s |= bit  # 优化：快速跳到 i 位是 1 的 s\r\n            f[s ^ bit] += f[s]\r\n            s += 1\r\n    return f\r\n```\r\n\r\n```java [sol-Java]\r\nclass Solution {\r\n    // 设 w 为 a[i] 的二进制最大长度\r\n    // 返回一个长为 2^w 的数组 f，其中 f[S] 表示 a 中是 S 的超集的元素个数（把二进制数视作集合）\r\n    // 时间复杂度 O(n + U log U)，其中 U = max(a)\r\n    public int[] sosDP(int[] a) {\r\n        int mx = 0;\r\n        for (int x : a) {\r\n            mx = Math.max(mx, x);\r\n        }\r\n\r\n        int w = 32 - Integer.numberOfLeadingZeros(mx); // 二进制长度上限\r\n        int[] f = new int[1 \u003c\u003c w];\r\n        for (int x : a) {\r\n            f[x]++; // 初始值\r\n        }\r\n\r\n        for (int i = 0; i \u003c w; i++) {\r\n            for (int s = 0; s \u003c (1 \u003c\u003c w); s++) {\r\n                s |= 1 \u003c\u003c i; // 优化：快速跳到 i 位是 1 的 s\r\n                f[s ^ (1 \u003c\u003c i)] += f[s];\r\n            }\r\n        }\r\n        return f;\r\n    }\r\n}\r\n```\r\n\r\n```cpp [sol-C++]\r\n// 设 w 为 a[i] 的二进制最大长度\r\n// 返回一个长为 2^w 的数组 f，其中 f[S] 表示 a 中是 S 的超集的元素个数（把二进制数视作集合）\r\n// 时间复杂度 O(n + U log U)，其中 U = max(a)\r\nvector\u003cint\u003e sos_dp(vector\u003cint\u003e\u0026 a) {\r\n    int mx = ranges::max(a);\r\n    int w = bit_width((uint32_t) mx); // 二进制长度上限\r\n\r\n    vector\u003cint\u003e f(1 \u003c\u003c w);\r\n    for (int x : a) {\r\n        f[x]++; // 初始值\r\n    }\r\n\r\n    for (int i = 0; i \u003c w; i++) {\r\n        for (int s = 0; s \u003c (1 \u003c\u003c w); s++) {\r\n            s |= 1 \u003c\u003c i; // 优化：快速跳到 i 位是 1 的 s\r\n            f[s ^ (1 \u003c\u003c i)] += f[s];\r\n        }\r\n    }\r\n    return f;\r\n}\r\n```\r\n\r\n```go [sol-Go]\r\n// 设 w 为 a[i] 的二进制最大长度\r\n// 返回一个长为 2^w 的数组 f，其中 f[S] 表示 a 中是 S 的超集的元素个数（把二进制数视作集合）\r\n// 时间复杂度 O(n + U log U)，其中 U = max(a)\r\nfunc sosDP(a []int) []int {\r\n    mx := slices.Max(a)\r\n    w := bits.Len(uint(mx)) // 二进制长度上限\r\n\r\n    f := make([]int, 1\u003c\u003cw)\r\n    for _, x := range a {\r\n        f[x]++ // 初始值\r\n    }\r\n\r\n    for i := range w {\r\n        for s := 0; s \u003c 1\u003c\u003cw; s++ {\r\n            s |= 1 \u003c\u003c i // 优化：快速跳到 i 位是 1 的 s\r\n            f[s^1\u003c\u003ci] += f[s]\r\n        }\r\n    }\r\n    return f\r\n}\r\n```\r\n\r\n- [3670. 没有公共位的整数最大乘积](https://leetcode.cn/problems/maximum-product-of-two-integers-with-no-common-bits/) 2234\r\n- [2044. 统计按位或能得到最大值的子集数目](https://leetcode.cn/problems/count-number-of-maximum-bitwise-or-subsets/)\r\n- [2732. 找到矩阵中的好子集](https://leetcode.cn/problems/find-a-good-subset-of-the-matrix/)\r\n- [3757. 有效子序列的数量](https://leetcode.cn/problems/number-of-effective-subsequences/) 2519\r\n\r\n### §9.7 其他状压 DP\r\n\r\n- [473. 火柴拼正方形](https://leetcode.cn/problems/matchsticks-to-square/)\r\n- [698. 划分为k个相等的子集](https://leetcode.cn/problems/partition-to-k-equal-sum-subsets/)\r\n- [2002. 两个回文子序列长度的最大乘积](https://leetcode.cn/problems/maximum-product-of-the-length-of-two-palindromic-subsequences/) 1869\r\n- [1125. 最小的必要团队](https://leetcode.cn/problems/smallest-sufficient-team/) 2251\r\n- [1434. 每个人戴不同帽子的方案数](https://leetcode.cn/problems/number-of-ways-to-wear-different-hats-to-each-other/) 2273\r\n- [464. 我能赢吗](https://leetcode.cn/problems/can-i-win/)\r\n- [691. 贴纸拼词](https://leetcode.cn/problems/stickers-to-spell-word/)\r\n- [3276. 选择矩阵中单元格的最大得分](https://leetcode.cn/problems/select-cells-in-grid-with-maximum-score/) 2403 横看成岭侧成峰\r\n- [1595. 连通两组点的最小成本](https://leetcode.cn/problems/minimum-cost-to-connect-two-groups-of-points/) 2538\r\n- [1815. 得到新鲜甜甜圈的最多组数](https://leetcode.cn/problems/maximum-number-of-groups-getting-fresh-donuts/) 2559\r\n- [LCP 69. Hello LeetCode!](https://leetcode.cn/problems/rMeRt2/)\r\n- [LCP 82. 万灵之树](https://leetcode.cn/problems/cnHoX6/)\r\n- [351. 安卓系统手势解锁](https://leetcode.cn/problems/android-unlock-patterns/)（会员题）\r\n\r\n## 十、数位 DP\r\n\r\n### §10.1 统计合法元素的数目\r\n\r\n[数位 DP v1.0 模板讲解](https://www.bilibili.com/video/BV1rS4y1s721/?t=19m36s)\r\n\r\n[数位 DP v2.0 模板讲解](https://www.bilibili.com/video/BV1Fg4y1Q7wv/?t=31m28s)（上下界数位 DP）\r\n\r\n下面是数位 DP v2.1 模板。相比 v2.0，不需要写 $\\textit{isNum}$ 参数。\r\n\r\n\u003e 注：只有上界约束的题目，相当于 $\\textit{low}=0$ 或者 $\\textit{low}=1$。\r\n\r\n```py [sol-Python3]\r\n# 代码示例：返回 [low, high] 中的恰好包含 target 个 0 的数字个数\r\n# 比如 digitDP(0, 10, 1) == 2\r\n# 要点：我们统计的是 0 的个数，需要区分【前导零】和【数字中的零】，前导零不能计入，而数字中的零需要计入\r\ndef digitDP(low: int, high: int, target: int) -\u003e int:\r\n    low_s = list(map(int, str(low)))  # 避免在 dfs 中频繁调用 int()\r\n    high_s = list(map(int, str(high)))\r\n    n = len(high_s)\r\n    diff_lh = n - len(low_s)\r\n\r\n    @cache\r\n    def dfs(i: int, cnt0: int, limit_low: bool, limit_high: bool) -\u003e int:\r\n        if cnt0 \u003e target:\r\n            return 0  # 不合法\r\n        if i == n:\r\n            return 1 if cnt0 == target else 0\r\n\r\n        lo = low_s[i - diff_lh] if limit_low and i \u003e= diff_lh else 0\r\n        hi = high_s[i] if limit_high else 9\r\n\r\n        res = 0\r\n        start = lo\r\n\r\n        # 通过 limit_low 和 i 可以判断能否不填数字，无需 is_num 参数\r\n        # 如果前导零不影响答案，去掉这个 if block\r\n        if limit_low and i \u003c diff_lh:\r\n            # 不填数字，上界不受约束\r\n            res = dfs(i + 1, 0, True, False)\r\n            start = 1\r\n\r\n        for d in range(start, hi + 1):\r\n            res += dfs(i + 1,\r\n                       cnt0 + (1 if d == 0 else 0),  # 统计 0 的个数\r\n                       limit_low and d == lo,\r\n                       limit_high and d == hi)\r\n\r\n        # res %= MOD\r\n        return res\r\n\r\n    return dfs(0, 0, True, True)\r\n```\r\n\r\n```java [sol-Java]\r\n// 代码示例：返回 [low, high] 中的恰好包含 target 个 0 的数字个数\r\n// 比如 digitDP(0, 10, 1) == 2\r\n// 要点：我们统计的是 0 的个数，需要区分【前导零】和【数字中的零】，前导零不能计入，而数字中的零需要计入\r\nclass Solution {\r\n    public long digitDP(long low, long high, int target) {\r\n        char[] lowS = String.valueOf(low).toCharArray();\r\n        char[] highS = String.valueOf(high).toCharArray();\r\n\r\n        int n = highS.length;\r\n        long[][] memo = new long[n][target + 1];\r\n        for (long[] row : memo) {\r\n            Arrays.fill(row, -1);\r\n        }\r\n\r\n        return dfs(0, 0, true, true, lowS, highS, target, memo);\r\n    }\r\n\r\n    private long dfs(int i, int cnt0, boolean limitLow, boolean limitHigh, char[] lowS, char[] highS, int target, long[][] memo) {\r\n        if (cnt0 \u003e target) {\r\n            return 0; // 不合法\r\n        }\r\n        if (i == highS.length) {\r\n            return cnt0 == target ? 1 : 0;\r\n        }\r\n\r\n        if (!limitLow \u0026\u0026 !limitHigh \u0026\u0026 memo[i][cnt0] \u003e= 0) {\r\n            return memo[i][cnt0];\r\n        }\r\n\r\n        int diff = highS.length - lowS.length;\r\n        int lo = limitLow \u0026\u0026 i \u003e= diff ? lowS[i - diff] - '0' : 0;\r\n        int hi = limitHigh ? highS[i] - '0' : 9;\r\n\r\n        long res = 0;\r\n        int d = lo;\r\n\r\n        // 通过 limitLow 和 i 可以判断能否不填数字，无需 isNum 参数\r\n        // 如果前导零不影响答案，去掉这个 if block\r\n        if (limitLow \u0026\u0026 i \u003c diff) {\r\n            // 不填数字，上界不受约束\r\n            res = dfs(i + 1, 0, true, false, lowS, highS, target, memo);\r\n            d = 1;\r\n        }\r\n\r\n        for (; d \u003c= hi; d++) {\r\n            res += dfs(i + 1,\r\n                       cnt0 + (d == 0 ? 1 : 0), // 统计 0 的个数\r\n                       limitLow \u0026\u0026 d == lo,\r\n                       limitHigh \u0026\u0026 d == hi,\r\n                       lowS, highS, target, memo);\r\n            // res %= MOD;\r\n        }\r\n\r\n        if (!limitLow \u0026\u0026 !limitHigh) {\r\n            memo[i][cnt0] = res;\r\n        }\r\n        return res;\r\n    }\r\n}\r\n```\r\n\r\n```cpp [sol-C++]\r\n// 代码示例：返回 [low, high] 中的恰好包含 target 个 0 的数字个数\r\n// 比如 digitDP(0, 10, 1) == 2\r\n// 要点：我们统计的是 0 的个数，需要区分【前导零】和【数字中的零】，前导零不能计入，而数字中的零需要计入\r\nlong long digitDP(long long low, long long high, int target) {\r\n    string low_s = to_string(low);\r\n    string high_s = to_string(high);\r\n    int n = high_s.size();\r\n    int diff_lh = n - low_s.size();\r\n    vector memo(n, vector\u003clong long\u003e(target + 1, -1));\r\n\r\n    auto dfs = [\u0026](this auto\u0026\u0026 dfs, int i, int cnt0, bool limit_low, bool limit_high) -\u003e long long {\r\n        if (cnt0 \u003e target) {\r\n            return 0; // 不合法\r\n        }\r\n        if (i == n) {\r\n            return cnt0 == target;\r\n        }\r\n\r\n        if (!limit_low \u0026\u0026 !limit_high \u0026\u0026 memo[i][cnt0] \u003e= 0) {\r\n            return memo[i][cnt0];\r\n        }\r\n\r\n        int lo = limit_low \u0026\u0026 i \u003e= diff_lh ? low_s[i - diff_lh] - '0' : 0;\r\n        int hi = limit_high ? high_s[i] - '0' : 9;\r\n\r\n        long long res = 0;\r\n        int d = lo;\r\n\r\n        // 通过 limit_low 和 i 可以判断能否不填数字，无需 is_num 参数\r\n        // 如果前导零不影响答案，去掉这个 if block\r\n        if (limit_low \u0026\u0026 i \u003c diff_lh) {\r\n            // 不填数字，上界不受约束\r\n            res = dfs(i + 1, 0, true, false);\r\n            d = 1;\r\n        }\r\n\r\n        for (; d \u003c= hi; d++) {\r\n            // 统计 0 的个数\r\n            res += dfs(i + 1, cnt0 + (d == 0), limit_low \u0026\u0026 d == lo, limit_high \u0026\u0026 d == hi);\r\n            // res %= MOD;\r\n        }\r\n\r\n        if (!limit_low \u0026\u0026 !limit_high) {\r\n            memo[i][cnt0] = res;\r\n        }\r\n        return res;\r\n    };\r\n\r\n    return dfs(0, 0, true, true);\r\n}\r\n```\r\n\r\n```go [sol-Go]\r\n// 代码示例：返回 [low, high] 中的恰好包含 target 个 0 的数字个数\r\n// 比如 digitDP(0, 10, 1) == 2\r\n// 要点：我们统计的是 0 的个数，需要区分【前导零】和【数字中的零】，前导零不能计入，而数字中的零需要计入\r\nfunc digitDP(low, high int, target int) int {\r\n    lowS := strconv.Itoa(low)\r\n    highS := strconv.Itoa(high)\r\n    n := len(highS)\r\n    diffLH := n - len(lowS)\r\n    memo := make([][]int, n)\r\n    for i := range memo {\r\n        memo[i] = make([]int, target+1)\r\n        for j := range memo[i] {\r\n            memo[i][j] = -1\r\n        }\r\n    }\r\n\r\n    var dfs func(int, int, bool, bool) int\r\n    dfs = func(i, cnt0 int, limitLow, limitHigh bool) (res int) {\r\n        // 不合法\r\n        if cnt0 \u003e target {\r\n            return 0\r\n        }\r\n        if i == n {\r\n            // 不合法\r\n            if cnt0 \u003c target {\r\n                return 0\r\n            }\r\n            // 合法\r\n            return 1\r\n        }\r\n        if !limitLow \u0026\u0026 !limitHigh {\r\n            p := \u0026memo[i][cnt0]\r\n            if *p \u003e= 0 {\r\n                return *p\r\n            }\r\n            defer func() { *p = res }()\r\n        }\r\n\r\n        lo := 0\r\n        if limitLow \u0026\u0026 i \u003e= diffLH {\r\n            lo = int(lowS[i-diffLH] - '0')\r\n        }\r\n        hi := 9\r\n        if limitHigh {\r\n            hi = int(highS[i] - '0')\r\n        }\r\n\r\n        d := lo\r\n        // 通过 limitLow 和 i 可以判断能否不填数字，无需 isNum 参数\r\n        // 如果前导零不影响答案，去掉这个 if block\r\n        if limitLow \u0026\u0026 i \u003c diffLH {\r\n            // 不填数字，上界不受约束\r\n            res = dfs(i+1, 0, true, false)\r\n            d = 1\r\n        }\r\n\r\n        for ; d \u003c= hi; d++ {\r\n            c0 := cnt0\r\n            if d == 0 {\r\n                c0++ // 统计 0 的个数\r\n            }\r\n            res += dfs(i+1, c0, limitLow \u0026\u0026 d == lo, limitHigh \u0026\u0026 d == hi)\r\n            // res %= mod\r\n        }\r\n        return\r\n    }\r\n\r\n    return dfs(0, 0, true, true)\r\n}\r\n```\r\n\r\n- [3747. 统计移除零后不同整数的数目](https://leetcode.cn/problems/count-distinct-integers-after-removing-zeros/) 1848\r\n- [2719. 统计整数数目](https://leetcode.cn/problems/count-of-integers/)\r\n- [1399. 统计最大组的数目](https://leetcode.cn/problems/count-largest-group/) 非暴力做法\r\n- [1742. 盒子中小球的最大数量](https://leetcode.cn/problems/maximum-number-of-balls-in-a-box/) 非暴力做法\r\n- [788. 旋转数字](https://leetcode.cn/problems/rotated-digits/) 非暴力做法\r\n- [902. 最大为 N 的数字组合](https://leetcode.cn/problems/numbers-at-most-n-given-digit-set/) 1990\r\n- [600. 不含连续 1 的非负整数](https://leetcode.cn/problems/non-negative-integers-without-consecutive-ones/)\r\n- [2376. 统计特殊整数](https://leetcode.cn/problems/count-special-integers/) 2120\r\n- [357. 统计各位数字都不同的数字个数](https://leetcode.cn/problems/count-numbers-with-unique-digits/) 同 2376 题\r\n- [1012. 至少有 1 位重复的数字](https://leetcode.cn/problems/numbers-with-repeated-digits/) 2230\r\n- [3519. 统计逐位非递减的整数](https://leetcode.cn/problems/count-numbers-with-non-decreasing-digits/) 2246 进制转换\r\n- [2827. 范围中美丽整数的数目](https://leetcode.cn/problems/number-of-beautiful-integers-in-the-range/) 2324\r\n- [2999. 统计强大整数的数目](https://leetcode.cn/problems/count-the-number-of-powerful-integers/) 2351\r\n- [2801. 统计范围内的步进数字数目](https://leetcode.cn/problems/count-stepping-numbers-in-range/) 2367\r\n- [2843. 统计对称整数的数目](https://leetcode.cn/problems/count-symmetric-integers/) 非暴力做法\r\n- [3352. 统计小于 N 的 K 可约简整数](https://leetcode.cn/problems/count-k-reducible-numbers-less-than-n/) 2451\r\n- [3621. 位计数深度为 K 的整数数目 I](https://leetcode.cn/problems/number-of-integers-with-popcount-depth-equal-to-k-i/) 同 3352 题\r\n- [3490. 统计美丽整数的数目](https://leetcode.cn/problems/count-beautiful-numbers/) 2502\r\n- [1397. 找到所有好字符串](https://leetcode.cn/problems/find-all-good-strings/) 2667\r\n- [1215. 步进数](https://leetcode.cn/problems/stepping-numbers/)（会员题）\r\n- [1067. 范围内的数字计数](https://leetcode.cn/problems/digit-count-in-range/)（会员题）\r\n- [3032. 统计各位数字都不同的数字个数 II](https://leetcode.cn/problems/count-numbers-with-unique-digits-ii/)（会员题）\r\n\r\n**从低到高**：\r\n\r\n- [3704. 统计和为 N 的无零数对](https://leetcode.cn/problems/count-no-zero-pairs-that-sum-to-n/) 2419 数对\r\n\r\n### §10.2 统计合法元素的价值总和\r\n\r\n每个元素 $x$ 都有一个相应的价值 $f(x)$，计算 $[\\textit{low},\\textit{high}]$ 中的满足题目约束的元素的价值总和。\r\n\r\n例如 $f(x) = x$ 是计算满足题目约束的元素和，$f(x) = \\text{digsum}(x)$ 是计算满足题目约束的元素的数位和。\r\n\r\n模板（数位和）：\r\n\r\n```py [sol-Python3]\r\n# 计算在 [low, high] 中的整数 x 的数位和，满足 x 中的不同数字个数不超过 k\r\ndef digitDPContribution(low: int, high: int, k: int) -\u003e int:\r\n    low_s = list(map(int, str(low)))  # 避免在 dfs 中频繁调用 int()\r\n    high_s = list(map(int, str(high)))\r\n    n = len(high_s)\r\n    diff_lh = n - len(low_s)\r\n\r\n    # dfs 返回两个数：子树合法数字个数，子树数位总和\r\n    @cache\r\n    def dfs(i: int, mask: int, limit_low: bool, limit_high: bool) -\u003e Tuple[int, int]:\r\n        if i == n:\r\n            # 如果没有特殊约束，那么能递归到终点的都是合法数字\r\n            return 1, 0\r\n\r\n        lo = low_s[i - diff_lh] if limit_low and i \u003e= diff_lh else 0\r\n        hi = high_s[i] if limit_high else 9\r\n\r\n        cnt = res = 0\r\n        start = lo\r\n\r\n        # 如果前导零不影响答案，去掉这个 if block\r\n        if limit_low and i \u003c diff_lh:\r\n            # 不填数字，上界不受约束\r\n            cnt, res = dfs(i + 1, 0, True, False)\r\n            start = 1\r\n\r\n        for d in range(start, hi + 1):\r\n            new_mask = mask | 1 \u003c\u003c d\r\n            if new_mask.bit_count() \u003e k:  # 不满足要求\r\n                continue\r\n            sub_cnt, sub_sum = dfs(i + 1,\r\n                                   new_mask,\r\n                                   limit_low and d == lo,\r\n                                   limit_high and d == hi)\r\n            cnt += sub_cnt  # 累加子树的合法数字个数\r\n            res += sub_sum  # 累加子树的数位总和\r\n            res += d * sub_cnt  # d 会出现在 sub_cnt 个数中（贡献法）\r\n\r\n        # cnt %= MOD; res %= MOD\r\n        return cnt, res\r\n\r\n    return dfs(0, 0, True, True)[1]\r\n```\r\n\r\n```java [sol-Java]\r\n// 计算在 [low, high] 中的整数 x 的数位和，满足 x 中的不同数字个数不超过 k\r\nclass Solution {\r\n    public long digitDPContribution(long low, long high, int k) {\r\n        char[] lowS = String.valueOf(low).toCharArray();\r\n        char[] highS = String.valueOf(high).toCharArray();\r\n\r\n        int n = highS.length;\r\n        long[][][] memo = new long[n][1 \u003c\u003c 10][];\r\n\r\n        return dfs(0, 0, true, true, lowS, highS, k, memo)[1];\r\n    }\r\n\r\n    // dfs 返回两个数：子树合法数字个数，子树数位总和\r\n    private long[] dfs(int i, int mask, boolean limitLow, boolean limitHigh, char[] lowS, char[] highS, int k, long[][][] memo) {\r\n        if (i == highS.length) {\r\n            // 如果没有特殊约束，那么能递归到终点的都是合法数字\r\n            return new long[]{1, 0};\r\n        }\r\n\r\n        if (!limitLow \u0026\u0026 !limitHigh \u0026\u0026 memo[i][mask] != null) {\r\n            return memo[i][mask];\r\n        }\r\n\r\n        int diff = highS.length - lowS.length;\r\n        int lo = limitLow \u0026\u0026 i \u003e= diff ? lowS[i - diff] - '0' : 0;\r\n        int hi = limitHigh ? highS[i] - '0' : 9;\r\n\r\n        long cnt = 0;\r\n        long sum = 0;\r\n        int d = lo;\r\n\r\n        // 如果前导零不影响答案，去掉这个 if block\r\n        if (limitLow \u0026\u0026 i \u003c diff) {\r\n            // 不填数字，上界不受约束\r\n            long[] sub = dfs(i + 1, 0, true, false, lowS, highS, k, memo);\r\n            cnt = sub[0];\r\n            sum = sub[1];\r\n            d = 1;\r\n        }\r\n\r\n        for (; d \u003c= hi; d++) {\r\n            int newMask = mask | 1 \u003c\u003c d;\r\n            if (Integer.bitCount(newMask) \u003e k) { // 不满足要求\r\n                continue;\r\n            }\r\n            long[] sub = dfs(i + 1,\r\n                             newMask,\r\n                             limitLow \u0026\u0026 d == lo,\r\n                             limitHigh \u0026\u0026 d == hi,\r\n                             lowS, highS, k, memo);\r\n            cnt += sub[0]; // 累加子树的合法数字个数\r\n            sum += sub[1]; // 累加子树的数位总和\r\n            sum += d * sub[0]; // d 会出现在 sub[0] 个数中（贡献法）\r\n            // cnt %= MOD; sum %= MOD;\r\n        }\r\n\r\n        long[] res = new long[]{cnt, sum};\r\n        if (!limitLow \u0026\u0026 !limitHigh) {\r\n            memo[i][mask] = res;\r\n        }\r\n        return res;\r\n    }\r\n}\r\n```\r\n\r\n```cpp [sol-C++]\r\n// 计算在 [low, high] 中的整数 x 的数位和，满足 x 中的不同数字个数不超过 k\r\nlong long digitDPContribution(long long low, long long high, int k) {\r\n    string low_s = to_string(low);\r\n    string high_s = to_string(high);\r\n    int n = high_s.size();\r\n    int diff_lh = n - low_s.size();\r\n    vector memo(n, vector\u003cpair\u003clong long, long long\u003e\u003e(1 \u003c\u003c 10, {-1, -1}));\r\n\r\n    // dfs 返回两个数：子树合法数字个数，子树数位总和\r\n    auto dfs = [\u0026](this auto\u0026\u0026 dfs, int i, int mask, bool limit_low, bool limit_high) -\u003e pair\u003clong long, long long\u003e {\r\n        if (i == n) {\r\n            // 如果没有特殊约束，那么能递归到终点的都是合法数字\r\n            return {1, 0};\r\n        }\r\n\r\n        if (!limit_low \u0026\u0026 !limit_high \u0026\u0026 memo[i][mask].first \u003e= 0) {\r\n            return memo[i][mask];\r\n        }\r\n\r\n        int lo = limit_low \u0026\u0026 i \u003e= diff_lh ? low_s[i - diff_lh] - '0' : 0;\r\n        int hi = limit_high ? high_s[i] - '0' : 9;\r\n\r\n        long long cnt = 0, sum = 0;\r\n        int d = lo;\r\n\r\n        // 如果前导零不影响答案，去掉这个 if block\r\n        if (limit_low \u0026\u0026 i \u003c diff_lh) {\r\n            // 不填数字，上界不受约束\r\n            tie(cnt, sum) = dfs(i + 1, 0, true, false);\r\n            d = 1;\r\n        }\r\n\r\n        for (; d \u003c= hi; d++) {\r\n            int new_mask = mask | 1 \u003c\u003c d;\r\n            if (popcount((uint32_t) new_mask) \u003e k) { // 不满足要求\r\n                continue;\r\n            }\r\n            auto [sub_cnt, sub_sum] = dfs(i + 1, new_mask, limit_low \u0026\u0026 d == lo, limit_high \u0026\u0026 d == hi);\r\n            cnt += sub_cnt; // 累加子树的合法数字个数\r\n            sum += sub_sum; // 累加子树的数位总和\r\n            sum += d * sub_cnt; // d 会出现在 sub_cnt 个数中（贡献法）\r\n            // cnt %= MOD; sum %= MOD;\r\n        }\r\n\r\n        pair\u003clong long, long long\u003e res = {cnt, sum};\r\n        if (!limit_low \u0026\u0026 !limit_high) {\r\n            memo[i][mask] = res;\r\n        }\r\n        return res;\r\n    };\r\n\r\n    return dfs(0, 0, true, true).second;\r\n}\r\n```\r\n\r\n```go [sol-Go]\r\n// 计算在 [low, high] 中的整数 x 的数位和，满足 x 中的不同数字个数不超过 k\r\nfunc digitDPContribution(low, high int, k int) int {\r\n    lowS := strconv.Itoa(low)\r\n    highS := strconv.Itoa(high)\r\n    n := len(highS)\r\n    diffLH := n - len(lowS)\r\n    type pair struct{ cnt, sum int }\r\n    memo := make([][1 \u003c\u003c 10]pair, n)\r\n    for i := range memo {\r\n        for j := range memo[i] {\r\n            memo[i][j].cnt = -1\r\n        }\r\n    }\r\n\r\n    // dfs 返回两个数：子树合法数字个数，子树数位总和\r\n    var dfs func(int, int, bool, bool) pair\r\n    dfs = func(i, mask int, limitLow, limitHigh bool) (res pair) {\r\n        if i == n {\r\n            // 如果没有特殊约束，那么能递归到终点的都是合法数字\r\n            return pair{1, 0}\r\n        }\r\n        if !limitLow \u0026\u0026 !limitHigh {\r\n            p := \u0026memo[i][mask]\r\n            if p.cnt \u003e= 0 {\r\n                return *p\r\n            }\r\n            defer func() { *p = res }()\r\n        }\r\n\r\n        lo := 0\r\n        if limitLow \u0026\u0026 i \u003e= diffLH {\r\n            lo = int(lowS[i-diffLH] - '0')\r\n        }\r\n        hi := 9\r\n        if limitHigh {\r\n            hi = int(highS[i] - '0')\r\n        }\r\n\r\n        d := lo\r\n        // 如果前导零不影响答案，可以去掉这个 if block\r\n        if limitLow \u0026\u0026 i \u003c diffLH {\r\n            // 不填数字，上界不受约束\r\n            res = dfs(i+1, 0, true, false)\r\n            d = 1\r\n        }\r\n\r\n        for ; d \u003c= hi; d++ {\r\n            newMask := mask | 1\u003c\u003cd\r\n            if bits.OnesCount(uint(newMask)) \u003e k { // 不满足要求\r\n                continue\r\n            }\r\n            sub := dfs(i+1, newMask, limitLow \u0026\u0026 d == lo, limitHigh \u0026\u0026 d == hi)\r\n            res.cnt += sub.cnt     // 累加子树的合法数字个数\r\n            res.sum += sub.sum     // 累加子树的数位总和\r\n            res.sum += d * sub.cnt // d 会出现在 sub.cnt 个数中（贡献法）\r\n            // res.cnt %= mod; res.sum %= mod\r\n        }\r\n        return\r\n    }\r\n\r\n    return dfs(0, 0, true, true).sum\r\n}\r\n```\r\n\r\n- [233. 数字 1 的个数](https://leetcode.cn/problems/number-of-digit-one/)\r\n- [面试题 17.06. 2 出现的次数](https://leetcode.cn/problems/number-of-2s-in-range-lcci/)\r\n- [3007. 价值和小于等于 K 的最大数字](https://leetcode.cn/problems/maximum-number-that-sum-of-the-prices-is-less-than-or-equal-to-k/) 2258 做法不止一种\r\n- [3753. 范围内总波动值 II](https://leetcode.cn/problems/total-waviness-of-numbers-in-range-ii/) 2297\r\n\r\n### §10.3 其他数位 DP\r\n\r\n- [3677. 统计二进制回文数字的数目](https://leetcode.cn/problems/count-binary-palindromic-numbers/) 2223\r\n- [3348. 最小可整除数位乘积 II](https://leetcode.cn/problems/smallest-divisible-digit-product-ii/) 3101 只有下界\r\n\r\n## 十一、优化 DP\r\n\r\n### §11.1 前缀和优化 DP\r\n\r\n- [1871. 跳跃游戏 VII](https://leetcode.cn/problems/jump-game-vii/) 1896 也可以用滑动窗口优化\r\n- [2327. 知道秘密的人数](https://leetcode.cn/problems/number-of-people-aware-of-a-secret/) 做到 $\\mathcal{O}(n)$\r\n- [3699. 锯齿形数组的总数 I](https://leetcode.cn/problems/number-of-zigzag-arrays-i/) 2123\r\n- [1997. 访问完所有房间的第一天](https://leetcode.cn/problems/first-day-where-you-have-been-in-all-the-rooms/) 2260\r\n- [629. K 个逆序对数组](https://leetcode.cn/problems/k-inverse-pairs-array/)\r\n- [3193. 统计逆序对的数目](https://leetcode.cn/problems/count-the-number-of-inversions/) 2266\r\n- [3473. 长度至少为 M 的 K 个子数组之和](https://leetcode.cn/problems/sum-of-k-subarrays-with-length-at-least-m/) 2274 划分型\r\n- [3251. 单调数组对的数目 II](https://leetcode.cn/problems/find-the-count-of-monotonic-pairs-ii/) 2323 也有组合数学做法\r\n- [2478. 完美分割的方案数](https://leetcode.cn/problems/number-of-beautiful-partitions/) 2344\r\n- [837. 新 21 点](https://leetcode.cn/problems/new-21-game/) 2350 也可以用滑动窗口优化\r\n- [3077. K 个不相交子数组的最大能量值](https://leetcode.cn/problems/maximum-strength-of-k-disjoint-subarrays/) 2557 划分型\r\n- [3333. 找到初始输入字符串 II](https://leetcode.cn/problems/find-the-original-typed-string-ii/) 2629 也有生成函数做法\r\n- [2902. 和带限制的子多重集合的数目](https://leetcode.cn/problems/count-of-sub-multisets-with-bounded-sum/) 2759\r\n- [1977. 划分数字的方案数](https://leetcode.cn/problems/number-of-ways-to-separate-numbers/) 2817\r\n- [3130. 找出所有稳定的二进制数组 II](https://leetcode.cn/problems/find-all-possible-stable-binary-arrays-ii/) 2825 也有组合数学做法\r\n\r\n### §11.2 单调栈优化 DP\r\n\r\n前置题单：[单调栈（矩形系列/字典序最小/贡献法）](https://leetcode.cn/circle/discuss/9oZFK9/)\r\n\r\n- [1335. 工作计划的最低难度](https://leetcode.cn/problems/minimum-difficulty-of-a-job-schedule/) 2035\r\n- [2866. 美丽塔 II](https://leetcode.cn/problems/beautiful-towers-ii/) 2072\r\n- [2617. 网格图中最少访问的格子数](https://leetcode.cn/problems/minimum-number-of-visited-cells-in-a-grid/) 2582\r\n- [2355. 你能拿走的最大图书数量](https://leetcode.cn/problems/maximum-number-of-books-you-can-take/)（会员题）\r\n\r\n### §11.3 单调队列优化 DP\r\n\r\n一般用来维护一段转移来源的最值。\r\n\r\n1. 前提：区间右端点变大时，左端点也在变大（同滑动窗口）。\r\n2. 转移前，去掉队首无用数据。\r\n3. 计算转移（直接从队首转移）。\r\n4. 把数据（一般是 $f[i]$）插入队尾前，去掉队尾无用数据。\r\n\r\n- [2944. 购买水果需要的最少金币数](https://leetcode.cn/problems/minimum-number-of-coins-for-fruits/) 1709 做到 $\\mathcal{O}(n)$\r\n- [1696. 跳跃游戏 VI](https://leetcode.cn/problems/jump-game-vi/) 1954\r\n- [1425. 带限制的子序列和](https://leetcode.cn/problems/constrained-subsequence-sum/) 2032\r\n- [3578. 统计极差最大为 K 的分割方式数](https://leetcode.cn/problems/count-partitions-with-max-min-difference-at-most-k/) 2033\r\n- [375. 猜数字大小 II](https://leetcode.cn/problems/guess-number-higher-or-lower-ii/) 做到 $\\mathcal{O}(n^2)$\r\n- [1687. 从仓库到码头运输箱子](https://leetcode.cn/problems/delivering-boxes-from-storage-to-ports/) 2610\r\n- [2463. 最小移动总距离](https://leetcode.cn/problems/minimum-total-distance-traveled/) 做到 $\\mathcal{O}(nm)$（注：还有 $\\mathcal{O}((n+m)\\log(n+m))$ 的反悔贪心做法）\r\n- [3117. 划分数组得到最小的值之和](https://leetcode.cn/problems/minimum-sum-of-values-by-dividing-array/) 2735\r\n- [2945. 找到最大非递减数组的长度](https://leetcode.cn/problems/find-maximum-non-decreasing-array-length/) 2943\r\n- [2969. 购买水果需要的最少金币数 II](https://leetcode.cn/problems/minimum-number-of-coins-for-fruits-ii/)（会员题）\r\n\r\n### §11.4 树状数组/线段树优化 DP\r\n\r\n- [1626. 无矛盾的最佳球队](https://leetcode.cn/problems/best-team-with-no-conflicts/) 2027\r\n- [2407. 最长递增子序列 II](https://leetcode.cn/problems/longest-increasing-subsequence-ii/) 2280\r\n- [2770. 达到末尾下标所需的最大跳跃次数](https://leetcode.cn/problems/maximum-number-of-jumps-to-reach-the-last-index/) 见我题解下的 [评论](https://leetcode.cn/problems/maximum-number-of-jumps-to-reach-the-last-index/solutions/2336752/dong-tai-gui-hua-cong-ji-yi-hua-sou-suo-2ptkg/comments/2060234)\r\n- [2926. 平衡子序列的最大和](https://leetcode.cn/problems/maximum-balanced-subsequence-sum/) 2448\r\n- [2547. 拆分数组的最小代价](https://leetcode.cn/problems/minimum-cost-to-split-an-array/) 做到 $\\mathcal{O}(n\\log n)$\r\n- [3671. 子序列美丽值求和](https://leetcode.cn/problems/sum-of-beautiful-subsequences/) 2647\r\n- [2916. 子数组不同元素数目的平方和 II](https://leetcode.cn/problems/subarrays-distinct-element-sum-of-squares-ii/) 2816 思路类似 2547 题\r\n\r\n### §11.5 字典树优化 DP\r\n\r\n- [139. 单词拆分](https://leetcode.cn/problems/word-break/)\r\n- [2707. 字符串中的额外字符](https://leetcode.cn/problems/extra-characters-in-a-string/)\r\n- [面试题 17.13. 恢复空格](https://leetcode.cn/problems/re-space-lcci/)\r\n- [472. 连接词](https://leetcode.cn/problems/concatenated-words/) 约 2300\r\n- [2977. 转换字符串的最小成本 II](https://leetcode.cn/problems/minimum-cost-to-convert-string-ii/) 2696\r\n\r\n### §11.6 矩阵快速幂优化 DP\r\n\r\n有两种类型的矩阵快速幂优化 DP：\r\n\r\n1. 线性 DP（常系数齐次线性递推），转移系数写在第一行，其余行 $m_{i+1,i} = 1$，例如 [70](https://leetcode.cn/problems/climbing-stairs/)，[1137](https://leetcode.cn/problems/n-th-tribonacci-number/)。[讲解](https://leetcode.cn/problems/climbing-stairs/solutions/2560716/jiao-ni-yi-bu-bu-si-kao-dong-tai-gui-hua-7zm1/)。\r\n2. 多维 DP 或者状态机 DP，转移系数可表示为一个 $k\\times k$ 大小的矩阵，例如 [935](https://leetcode.cn/problems/knight-dialer/)。[讲解](https://leetcode.cn/problems/knight-dialer/solutions/3004116/jiao-ni-yi-bu-bu-si-kao-dpcong-ji-yi-hua-x06l/)。\r\n\r\n时间复杂度一般为 $\\mathcal{O}(k^3\\log n)$。\r\n\r\n**进阶做法**：先用 **Berlekamp-Massey 算法**找规律，得到线性递推式，然后用 **Kitamasa 算法**（或者 Bostan-Mori 算法）优化。\r\n\r\n请看我的知乎科普文章：\r\n\r\n[Berlekamp-Massey 算法：如何预测数列的下一项？](https://zhuanlan.zhihu.com/p/1966417899825665440)\r\n\r\n[Kitamasa 算法：更快地计算线性递推的第 n 项](https://zhuanlan.zhihu.com/p/1964051212304364939)\r\n\r\n具体例子见 3700 题 [我的题解的方法二](https://leetcode.cn/problems/number-of-zigzag-arrays-ii/solutions/3794101/ju-zhen-kuai-su-mi-you-hua-dppythonnumpy-77e7/)。\r\n\r\n时间复杂度一般为 $\\mathcal{O}(k^2\\log n)$。\r\n\r\n- [70. 爬楼梯](https://leetcode.cn/problems/climbing-stairs/)\r\n- [509. 斐波那契数](https://leetcode.cn/problems/fibonacci-number/)\r\n- [1137. 第 N 个泰波那契数](https://leetcode.cn/problems/n-th-tribonacci-number/)\r\n- [1220. 统计元音字母序列的数目](https://leetcode.cn/problems/count-vowels-permutation/)\r\n- [552. 学生出勤记录 II](https://leetcode.cn/problems/student-attendance-record-ii/)\r\n- [935. 骑士拨号器](https://leetcode.cn/problems/knight-dialer/)\r\n- [790. 多米诺和托米诺平铺](https://leetcode.cn/problems/domino-and-tromino-tiling/)\r\n- [1411. 给 N x 3 网格图涂色的方案数](https://leetcode.cn/problems/number-of-ways-to-paint-n-3-grid/)\r\n- [1931. 用三种不同颜色为网格涂色](https://leetcode.cn/problems/painting-a-grid-with-three-different-colors/)\r\n- [3337. 字符串转换后的长度 II](https://leetcode.cn/problems/total-characters-in-string-after-transformations-ii/) 2412\r\n- [3700. 锯齿形数组的总数 II](https://leetcode.cn/problems/number-of-zigzag-arrays-ii/) 2435\r\n- [2851. 字符串转换](https://leetcode.cn/problems/string-transformation/) 2858\r\n- [2912. 在网格上移动到目的地的方法数](https://leetcode.cn/problems/number-of-ways-to-reach-destination-in-the-grid/)（会员题）\r\n\r\n### §11.7 斜率优化 DP\r\n\r\n也叫凸包优化/凸壳优化（CHT，Convex Hull Trick）。\r\n\r\n- [3494. 酿造药水需要的最少总时间](https://leetcode.cn/problems/find-the-minimum-amount-of-time-to-brew-potions/)\r\n- [3500. 将数组分割为子数组的最小代价](https://leetcode.cn/problems/minimum-cost-to-divide-array-into-subarrays/)\r\n- [3693. 爬楼梯 II](https://leetcode.cn/problems/climbing-stairs-ii/) 与 $K=3$ 无关的做法\r\n\r\n### §11.8 WQS 二分优化 DP\r\n\r\n把最多选 $k$ 个物品的问题（时间复杂度高）转换成选任意个物品的问题（时间复杂度低）。\r\n\r\n一般时间复杂度为 $\\mathcal{O}(n\\log U)$ 或者 $\\mathcal{O}(n\\log n)$。\r\n\r\n- [188. 买卖股票的最佳时机 IV](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iv/)\r\n- [3573. 买卖股票的最佳时机 V](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-v/)\r\n- [2209. 用地毯覆盖后的最少白色砖块](https://leetcode.cn/problems/minimum-white-tiles-after-covering-with-carpets/)\r\n- [3743. 循环划分的最大得分](https://leetcode.cn/problems/maximize-cyclic-partition-score/)\r\n\r\n此外「§5.3 约束划分个数」的部分题目也可以用 WQS 二分优化。\r\n\r\n### §11.9 其他优化 DP\r\n\r\n- [3654. 删除可整除和后的最小数组和](https://leetcode.cn/problems/minimum-sum-after-divisible-sum-deletions/) 2039\r\n- [1937. 扣分后的最大得分](https://leetcode.cn/problems/maximum-number-of-points-with-cost/) 2106\r\n- [2713. 矩阵中严格递增的单元格数](https://leetcode.cn/problems/maximum-strictly-increasing-cells-in-a-matrix/) 2387\r\n- [3651. 带传送的最小路径成本](https://leetcode.cn/problems/minimum-cost-path-with-teleportations/) 2411\r\n- [2318. 不同骰子序列的数目](https://leetcode.cn/problems/number-of-distinct-roll-sequences/) 容斥优化（类似 CF1943D2）\r\n- [3181. 执行操作可获得的最大总奖励 II](https://leetcode.cn/problems/maximum-total-reward-using-operations-ii/) 2688 bitset 优化\r\n- [2267. 检查是否有合法括号字符串路径](https://leetcode.cn/problems/check-if-there-is-a-valid-parentheses-string-path/) 可以进一步地用 bitset 优化\r\n- [3213. 最小代价构造字符串](https://leetcode.cn/problems/construct-string-with-minimum-cost/) 字符串哈希 / 后缀数组 / AC 自动机优化\r\n- [3292. 形成目标字符串需要的最少字符串数 II](https://leetcode.cn/problems/minimum-number-of-valid-strings-to-form-target-ii/) 字符串哈希 / AC 自动机优化\r\n- [3743. 循环划分的最大得分](https://leetcode.cn/problems/maximize-cyclic-partition-score/) 闵可夫斯基和\r\n- [LCP 14. 切分数组](https://leetcode.cn/problems/qie-fen-shu-zu/)\r\n- [LCP 59. 搭桥过河](https://leetcode.cn/problems/NfY1m5/) Slope Trick\r\n- [2263. 数组变为有序的最小操作次数](https://leetcode.cn/problems/make-array-non-decreasing-or-non-increasing/)（会员题）Slope Trick\r\n\r\n关于**倍增算法**，见 [题单](https://leetcode.cn/circle/discuss/K0n2gO/) 的「§3.8 最近公共祖先（LCA）、倍增算法」。\r\n\r\n## 十二、树形 DP\r\n\r\n**注**：可能有同学觉得树形 DP 没有重复访问同一个状态（重叠子问题），并不能算作 DP，而是算作普通的递归。这么说也有一定道理，不过考虑到思维方式和 DP 是一样的自底向上，所以仍然叫做树形 DP。此外，如果是自顶向下的递归做法，是存在重叠子问题的，一般要结合记忆化搜索实现。\r\n\r\n### §12.1 树的直径\r\n\r\n讲解：[树形 DP：树的直径【基础算法精讲 23】](https://www.bilibili.com/video/BV17o4y187h1/)\r\n\r\n- [543. 二叉树的直径](https://leetcode.cn/problems/diameter-of-binary-tree/)\r\n- [687. 最长同值路径](https://leetcode.cn/problems/longest-univalue-path/)\r\n- [124. 二叉树中的最大路径和](https://leetcode.cn/problems/binary-tree-maximum-path-sum/)\r\n- [2385. 感染二叉树需要的总时间](https://leetcode.cn/problems/amount-of-time-for-binary-tree-to-be-infected/) 1711\r\n- [2246. 相邻字符不同的最长路径](https://leetcode.cn/problems/longest-path-with-different-adjacent-characters/) 2126\r\n- [3203. 合并两棵树后的最小直径](https://leetcode.cn/problems/find-minimum-diameter-after-merging-two-trees/) 2266\r\n- [1617. 统计子树中城市之间最大距离](https://leetcode.cn/problems/count-subtrees-with-max-distance-between-cities/) 2309\r\n- [2538. 最大价值和与最小价值和的差值](https://leetcode.cn/problems/difference-between-maximum-and-minimum-price-sum/) 2398\r\n- [1522. N 叉树的直径](https://leetcode.cn/problems/diameter-of-n-ary-tree/)（会员题）\r\n- [1245. 树的直径](https://leetcode.cn/problems/tree-diameter/)（会员题）\r\n- [549. 二叉树最长连续序列 II](https://leetcode.cn/problems/binary-tree-longest-consecutive-sequence-ii/)（会员题）\r\n- [3372. 连接两棵树后最大目标节点数目 I](https://leetcode.cn/problems/maximize-the-number-of-target-nodes-after-connecting-trees-i/) 算法优化\r\n\r\n\u003e 注：求直径也有两次 DFS 的做法。\r\n\r\n### §12.2 树上最大独立集\r\n\r\n讲解：[树形 DP：打家劫舍 III【基础算法精讲 24】](https://www.bilibili.com/video/BV1vu4y1f7dn/)\r\n\r\n- [337. 打家劫舍 III](https://leetcode.cn/problems/house-robber-iii/)（没有上司的舞会）\r\n- [2646. 最小化旅行的价格总和](https://leetcode.cn/problems/minimize-the-total-price-of-the-trips/) 2238\r\n- [3544. 子树反转和](https://leetcode.cn/problems/subtree-inversion-sum/) 2545 记忆化搜索 / 树上刷表法\r\n- [2378. 选择边来最大化树的得分](https://leetcode.cn/problems/choose-edges-to-maximize-score-in-a-tree/)（会员题）\r\n\r\n### §12.3 树上最小支配集\r\n\r\n讲解：[树形 DP：监控二叉树【基础算法精讲 25】](https://www.bilibili.com/video/BV1oF411U7qL/)，包含 968 的变形题。\r\n\r\n- [968. 监控二叉树](https://leetcode.cn/problems/binary-tree-cameras/) 2124\r\n\r\n### §12.4 换根 DP\r\n\r\n\u003e 也叫二次扫描法。\r\n\r\n设 $y$ 是 $x$ 的子节点。从「以 $x$ 为整棵树的根」变成「以 $y$ 为整棵树的根」，发生了什么？\r\n\r\n1. 站在 $x$ 的视角，去掉子树 $y$。设剩余部分为 $F$。\r\n2. 以 $y$ 为根时，$x$ 挂在 $y$ 的下面，$F$ 变成 $y$ 的一棵子树。\r\n\r\n[【图解】一张图秒懂换根 DP！](https://leetcode.cn/problems/sum-of-distances-in-tree/solution/tu-jie-yi-zhang-tu-miao-dong-huan-gen-dp-6bgb/)\r\n\r\n模板一：简单场景（3772 题）\r\n\r\n```py [sol-Python3]\r\nclass Solution:\r\n    def maxSubgraphScore(self, n: int, edges: List[List[int]], good: List[int]) -\u003e List[int]:\r\n        g = [[] for _ in range(n)]\r\n        for x, y in edges:\r\n            g[x].append(y)\r\n            g[y].append(x)\r\n\r\n        # sub_score[x] 表示（以 0 为根时）包含 x 的子树 x 的最大得分\r\n        sub_score = [0] * n\r\n        # 计算 sub_score[x]\r\n        def dfs(x: int, fa: int) -\u003e None:\r\n            sub_score[x] = 1 if good[x] else -1  # sub_score[x] 一定包含 x\r\n            for y in g[x]:\r\n                if y != fa:\r\n                    dfs(y, x)\r\n                    # 如果子树 y 的最大得分 \u003e 0，选子树 y，否则不选\r\n                    sub_score[x] += max(sub_score[y], 0)\r\n        dfs(0, -1)\r\n\r\n        ans = [0] * n\r\n        ans[0] = sub_score[0]\r\n        # 对于 x 的儿子 y，计算包含 y 的子图最大得分\r\n        def reroot(x: int, fa: int) -\u003e None:\r\n            for y in g[x]:\r\n                if y != fa:\r\n                    # 从 ans[x] 中去掉子树 y，剩余部分记作 F\r\n                    score_f = ans[x] - max(sub_score[y], 0)\r\n                    # 换根后，x 挂在 y 的下面，F 变成 y 的一棵子树\r\n                    # 计算 F 对 y 的贡献：如果 F 的最大得分 \u003e 0，选 F，否则不选\r\n                    ans[y] = sub_score[y] + max(score_f, 0)\r\n                    reroot(y, x)\r\n        reroot(0, -1)\r\n        return ans\r\n```\r\n\r\n```java [sol-Java]\r\nclass Solution {\r\n    public int[] maxSubgraphScore(int n, int[][] edges, int[] good) {\r\n        List\u003cInteger\u003e[] g = new ArrayList[n];\r\n        Arrays.setAll(g, _ -\u003e new ArrayList\u003c\u003e());\r\n        for (int[] e : edges) {\r\n            int x = e[0];\r\n            int y = e[1];\r\n            g[x].add(y);\r\n            g[y].add(x);\r\n        }\r\n\r\n        // subScore[x] 表示（以 0 为根时）包含 x 的子树 x 的最大得分\r\n        int[] subScore = new int[n];\r\n        dfs(0, -1, g, good, subScore);\r\n\r\n        int[] ans = new int[n];\r\n        ans[0] = subScore[0];\r\n        reroot(0, -1, g, subScore, ans);\r\n        return ans;\r\n    }\r\n\r\n    // 计算 subScore[x]\r\n    private void dfs(int x, int fa, List\u003cInteger\u003e[] g, int[] good, int[] subScore) {\r\n        subScore[x] = good[x] == 0 ? -1 : 1; // subScore[x] 一定包含 x\r\n        for (int y : g[x]) {\r\n            if (y != fa) {\r\n                dfs(y, x, g, good, subScore);\r\n                // 如果子树 y 的最大得分 \u003e 0，选子树 y，否则不选\r\n                subScore[x] += Math.max(subScore[y], 0);\r\n            }\r\n        }\r\n    }\r\n\r\n    // 对于 x 的儿子 y，计算包含 y 的子图最大得分\r\n    private void reroot(int x, int fa, List\u003cInteger\u003e[] g, int[] subScore, int[] ans) {\r\n        for (int y : g[x]) {\r\n            if (y != fa) {\r\n                // 从 ans[x] 中去掉子树 y，剩余部分记作 F\r\n                int scoreF = ans[x] - Math.max(subScore[y], 0);\r\n                // 换根后，x 挂在 y 的下面，F 变成 y 的一棵子树\r\n                // 计算 F 对 y 的贡献：如果 F 的最大得分 \u003e 0，选 F，否则不选\r\n                ans[y] = subScore[y] + Math.max(scoreF, 0);\r\n                reroot(y, x, g, subScore, ans);\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n```cpp [sol-C++]\r\nclass Solution {\r\npublic:\r\n    vector\u003cint\u003e maxSubgraphScore(int n, vector\u003cvector\u003cint\u003e\u003e\u0026 edges, vector\u003cint\u003e\u0026 good) {\r\n        vector\u003cvector\u003cint\u003e\u003e g(n);\r\n        for (auto\u0026 e : edges) {\r\n            int x = e[0], y = e[1];\r\n            g[x].push_back(y);\r\n            g[y].push_back(x);\r\n        }\r\n\r\n        // sub_score[x] 表示（以 0 为根时）包含 x 的子树 x 的最大得分\r\n        vector\u003cint\u003e sub_score(n);\r\n        // 计算 sub_score[x]\r\n        auto dfs = [\u0026](this auto\u0026\u0026 dfs, int x, int fa) -\u003e void {\r\n            sub_score[x] = good[x] ? 1 : -1; // subScore[x] 一定包含 x\r\n            for (int y : g[x]) {\r\n                if (y != fa) {\r\n                    dfs(y, x);\r\n                    // 如果子树 y 的最大得分 \u003e 0，选子树 y，否则不选\r\n                    sub_score[x] += max(sub_score[y], 0);\r\n                }\r\n            }\r\n        };\r\n        dfs(0, -1);\r\n\r\n        vector\u003cint\u003e ans(n);\r\n        ans[0] = sub_score[0];\r\n        // 对于 x 的儿子 y，计算包含 y 的子图最大得分\r\n        auto reroot = [\u0026](this auto\u0026\u0026 reroot, int x, int fa) -\u003e void {\r\n            for (int y : g[x]) {\r\n                if (y != fa) {\r\n                    // 从 ans[x] 中去掉子树 y，剩余部分记作 F\r\n                    int score_f = ans[x] - max(sub_score[y], 0);\r\n                    // 换根后，x 挂在 y 的下面，F 变成 y 的一棵子树\r\n                    // 计算 F 对 y 的贡献：如果 F 的最大得分 \u003e 0，选 F，否则不选\r\n                    ans[y] = sub_score[y] + max(score_f, 0);\r\n                    reroot(y, x);\r\n                }\r\n            }\r\n        };\r\n        reroot(0, -1);\r\n        return ans;\r\n    }\r\n};\r\n```\r\n\r\n```go [sol-Go]\r\nfunc maxSubgraphScore(n int, edges [][]int, good []int) []int {\r\n    g := make([][]int, n)\r\n    for _, e := range edges {\r\n        x, y := e[0], e[1]\r\n        g[x] = append(g[x], y)\r\n        g[y] = append(g[y], x)\r\n    }\r\n\r\n    // subScore[x] 表示（以 0 为根时）包含 x 的子树 x 的最大得分\r\n    subScore := make([]int, n)\r\n    // 计算 subScore[x]\r\n    var dfs func(int, int)\r\n    dfs = func(x, fa int) {\r\n        subScore[x] = good[x]*2 - 1 // subScore[x] 一定包含 x\r\n        for _, y := range g[x] {\r\n            if y != fa {\r\n                dfs(y, x)\r\n                // 如果子树 y 的最大得分 \u003e 0，选子树 y，否则不选\r\n                subScore[x] += max(subScore[y], 0)\r\n            }\r\n        }\r\n    }\r\n    dfs(0, -1)\r\n\r\n    ans := make([]int, n)\r\n    ans[0] = subScore[0]\r\n    // 对于 x 的儿子 y，计算包含 y 的子图最大得分\r\n    var reroot func(int, int)\r\n    reroot = func(x, fa int) {\r\n        for _, y := range g[x] {\r\n            if y != fa {\r\n                // 从 ans[x] 中去掉子树 y，剩余部分记作 F\r\n                scoreF := ans[x] - max(subScore[y], 0)\r\n                // 换根后，x 挂在 y 的下面，F 变成 y 的一棵子树\r\n                // 计算 F 对 y 的贡献：如果 F 的最大得分 \u003e 0，选 F，否则不选\r\n                ans[y] = subScore[y] + max(scoreF, 0)\r\n                reroot(y, x)\r\n            }\r\n        }\r\n    }\r\n    reroot(0, -1)\r\n    return ans\r\n}\r\n```\r\n\r\n模板二：维护最大次大（3241 题）\r\n\r\n```py [sol-Python3]\r\nclass Solution:\r\n    def timeTaken(self, edges: List[List[int]]) -\u003e List[int]:\r\n        n = len(edges) + 1\r\n        g = [[] for _ in range(n)]\r\n        for x, y in edges:\r\n            g[x].append(y)\r\n            g[y].append(x)\r\n\r\n        # sub_res[x] 保存子树 x 的最大深度，次大深度，以及最大深度要往哪个儿子走\r\n        sub_res = [None] * n\r\n        # 计算 sub_res[x]\r\n        def dfs(x: int, fa: int) -\u003e None:\r\n            max_d = max_d2 = my = 0\r\n            for y in g[x]:\r\n                if y == fa:\r\n                    continue\r\n                dfs(y, x)\r\n                w = 2 - y % 2  # 从 x 到 y 的边权\r\n                max_y = sub_res[y][0] + w  # 从 x 出发，往 y 方向的最大深度\r\n                if max_y \u003e max_d:\r\n                    max_d2 = max_d\r\n                    max_d = max_y\r\n                    my = y\r\n                elif max_y \u003e max_d2:\r\n                    max_d2 = max_y\r\n            sub_res[x] = (max_d, max_d2, my)\r\n        dfs(0, -1)\r\n\r\n        # ans[x] 表示当 x 是树根时，整棵树的最大深度\r\n        ans = [0] * n\r\n        # 计算 ans[x]\r\n        def reroot(x: int, fa: int, from_up: int) -\u003e None:\r\n            max_d, max_d2, my = sub_res[x]\r\n            ans[x] = max(max_d, from_up)\r\n            for y in g[x]:\r\n                if y == fa:\r\n                    continue\r\n                w = 2 - x % 2  # 从 y 到 x 的边权\r\n                mx = max_d if y != my else max_d2\r\n                # 站在 x 的角度，不往 y 走，能走多远？\r\n                # 要么往上走（from_up），要么往除了 y 的其余子树走（mx），二者取最大值\r\n                reroot(y, x, max(from_up, mx) + w)  # 对于 y 来说，加上从 y 到 x 的边权 w\r\n        reroot(0, -1, 0)\r\n        return ans\r\n```\r\n\r\n```java [sol-Java]\r\nclass Solution {\r\n    public int[] timeTaken(int[][] edges) {\r\n        int n = edges.length + 1;\r\n        List\u003cInteger\u003e[] g = new ArrayList[n];\r\n        Arrays.setAll(g, _ -\u003e new ArrayList\u003c\u003e());\r\n        for (int[] e : edges) {\r\n            int x = e[0];\r\n            int y = e[1];\r\n            g[x].add(y);\r\n            g[y].add(x);\r\n        }\r\n\r\n        // subRes[x] 保存子树 x 的最大深度，次大深度，以及最大深度要往哪个儿子走\r\n        int[][] subRes = new int[n][];\r\n        dfs(0, -1, g, subRes);\r\n\r\n        // ans[x] 表示当 x 是树根时，整棵树的最大深度\r\n        int[] ans = new int[n];\r\n        reroot(0, -1, 0, g, subRes, ans);\r\n        return ans;\r\n    }\r\n\r\n    // 计算 subRes[x]\r\n    private void dfs(int x, int fa, List\u003cInteger\u003e[] g, int[][] subRes) {\r\n        int maxD = 0;\r\n        int maxD2 = 0;\r\n        int my = 0;\r\n        for (int y : g[x]) {\r\n            if (y == fa) {\r\n                continue;\r\n            }\r\n            dfs(y, x, g, subRes);\r\n            int w = 2 - y % 2; // 从 x 到 y 的边权\r\n            int maxY = subRes[y][0] + w; // 从 x 出发，往 y 方向的最大深度\r\n            if (maxY \u003e maxD) {\r\n                maxD2 = maxD;\r\n                maxD = maxY;\r\n                my = y;\r\n            } else if (maxY \u003e maxD2) {\r\n                maxD2 = maxY;\r\n            }\r\n        }\r\n        subRes[x] = new int[]{maxD, maxD2, my};\r\n    }\r\n\r\n    // 计算 ans[x]\r\n    private void reroot(int x, int fa, int fromUp, List\u003cInteger\u003e[] g, int[][] subRes, int[] ans) {\r\n        int maxD = subRes[x][0];\r\n        int maxD2 = subRes[x][1];\r\n        int my = subRes[x][2];\r\n        ans[x] = Math.max(maxD, fromUp);\r\n        for (int y : g[x]) {\r\n            if (y == fa) {\r\n                continue;\r\n            }\r\n            int w = 2 - x % 2; // 从 y 到 x 的边权\r\n            int mx = y != my ? maxD : maxD2;\r\n            // 站在 x 的角度，不往 y 走，能走多远？\r\n            // 要么往上走（fromUp），要么往除了 y 的其余子树走（mx），二者取最大值\r\n            reroot(y, x, Math.max(fromUp, mx) + w, g, subRes, ans);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n```cpp [sol-C++]\r\nclass Solution {\r\npublic:\r\n    vector\u003cint\u003e timeTaken(vector\u003cvector\u003cint\u003e\u003e\u0026 edges) {\r\n        int n = edges.size() + 1;\r\n        vector\u003cvector\u003cint\u003e\u003e g(n);\r\n        for (auto\u0026 e : edges) {\r\n            int x = e[0], y = e[1];\r\n            g[x].push_back(y);\r\n            g[y].push_back(x);\r\n        }\r\n\r\n        // sub_res[x] 保存子树 x 的最大深度，次大深度，以及最大深度要往哪个儿子走\r\n        vector\u003ctuple\u003cint, int, int\u003e\u003e sub_res(n);\r\n        // 计算 sub_res[x]\r\n        auto dfs = [\u0026](this auto\u0026\u0026 dfs, int x, int fa) -\u003e void {\r\n            int max_d = 0, max_d2 = 0, my = 0;\r\n            for (int y : g[x]) {\r\n                if (y == fa) {\r\n                    continue;\r\n                }\r\n                dfs(y, x);\r\n                int w = 2 - y % 2; // 从 x 到 y 的边权\r\n                int max_y = get\u003c0\u003e(sub_res[y]) + w; // 从 x 出发，往 y 方向的最大深度\r\n                if (max_y \u003e max_d) {\r\n                    max_d2 = max_d;\r\n                    max_d = max_y;\r\n                    my = y;\r\n                } else if (max_y \u003e max_d2) {\r\n                    max_d2 = max_y;\r\n                }\r\n            }\r\n            sub_res[x] = {max_d, max_d2, my};\r\n        };\r\n        dfs(0, -1);\r\n\r\n        // ans[x] 表示当 x 是树根时，整棵树的最大深度\r\n        vector\u003cint\u003e ans(n);\r\n        // 计算 ans[x]\r\n        auto reroot = [\u0026](this auto\u0026\u0026 reroot, int x, int fa, int from_up) -\u003e void {\r\n            auto [max_d, max_d2, my] = sub_res[x];\r\n            ans[x] = max(max_d, from_up);\r\n            for (int y : g[x]) {\r\n                if (y == fa) {\r\n                    continue;\r\n                }\r\n                int w = 2 - x % 2; // 从 y 到 x 的边权\r\n                int mx = y != my ? max_d : max_d2;\r\n                // 站在 x 的角度，不往 y 走，能走多远？\r\n                // 要么往上走（from_up），要么往除了 y 的其余子树走（mx），二者取最大值\r\n                reroot(y, x, max(from_up, mx) + w); // 对于 y 来说，加上从 y 到 x 的边权 w\r\n            }\r\n        };\r\n        reroot(0, -1, 0);\r\n        return ans;\r\n    }\r\n};\r\n```\r\n\r\n```go [sol-Go]\r\nfunc timeTaken(edges [][]int) []int {\r\n    n := len(edges) + 1\r\n    g := make([][]int, n)\r\n    for _, e := range edges {\r\n        x, y := e[0], e[1]\r\n        g[x] = append(g[x], y)\r\n        g[y] = append(g[y], x)\r\n    }\r\n\r\n    // subRes[x] 保存子树 x 的最大深度 maxD，次大深度 maxD2，以及最大深度要往儿子 y 走\r\n    subRes := make([]struct{ maxD, maxD2, y int }, n)\r\n    // 计算 subRes[x]\r\n    var dfs func(int, int)\r\n    dfs = func(x, fa int) {\r\n        res := \u0026subRes[x]\r\n        for _, y := range g[x] {\r\n            if y == fa {\r\n                continue\r\n            }\r\n            dfs(y, x)\r\n            w := 2 - y%2 // 从 x 到 y 的边权\r\n            maxD := subRes[y].maxD + w // 从 x 出发，往 y 方向的最大深度\r\n            if maxD \u003e res.maxD {\r\n                res.maxD2 = res.maxD\r\n                res.maxD = maxD\r\n                res.y = y\r\n            } else if maxD \u003e res.maxD2 {\r\n                res.maxD2 = maxD\r\n            }\r\n        }\r\n    }\r\n    dfs(0, -1)\r\n\r\n    // ans[x] 表示当 x 是树根时，整棵树的最大深度\r\n    ans := make([]int, n)\r\n    // 计算 ans[x]\r\n    var reroot func(int, int, int)\r\n    reroot = func(x, fa, fromUp int) {\r\n        sub := subRes[x]\r\n        ans[x] = max(sub.maxD, fromUp)\r\n        for _, y := range g[x] {\r\n            if y == fa {\r\n                continue\r\n            }\r\n            w := 2 - x%2 // 从 y 到 x 的边权\r\n            mx := sub.maxD\r\n            if y == sub.y { // 对于 y 来说，上面要选次大的\r\n                mx = sub.maxD2\r\n            }\r\n            // 站在 x 的角度，不往 y 走，能走多远？\r\n            // 要么往上走（fromUp），要么往除了 y 的其余子树走（mx），二者取最大值\r\n            reroot(y, x, max(fromUp, mx)+w) // 对于 y 来说，加上从 y 到 x 的边权 w\r\n        }\r\n    }\r\n    reroot(0, -1, 0)\r\n    return ans\r\n}\r\n```\r\n\r\n- [834. 树中距离之和](https://leetcode.cn/problems/sum-of-distances-in-tree/) 2197\r\n- [2581. 统计可能的树根数目](https://leetcode.cn/problems/count-number-of-possible-root-nodes/) 2228\r\n- [3772. 子图的最大得分](https://leetcode.cn/problems/maximum-subgraph-score-in-a-tree/) 2235\r\n- [2858. 可以到达每一个节点的最少边反转次数](https://leetcode.cn/problems/minimum-edge-reversals-so-every-node-is-reachable/) 2295\r\n- [310. 最小高度树](https://leetcode.cn/problems/minimum-height-trees/) 也可以用拓扑排序做\r\n- [3241. 标记所有节点需要的时间](https://leetcode.cn/problems/time-taken-to-mark-all-nodes/) 2522\r\n- [3372. 连接两棵树后最大目标节点数目 I](https://leetcode.cn/problems/maximize-the-number-of-target-nodes-after-connecting-trees-i/) 做到 $\\mathcal{O}((n+m)k)$，解决 $n$ 和 $m$ 很大但 $k$ 很小的场景\r\n\r\n\u003e **注**：前后缀分解，可以视作一条链上的换根 DP。\r\n\r\n### §12.5 其他树形 DP\r\n\r\n- [2925. 在树上执行操作以后得到的最大分数](https://leetcode.cn/problems/maximum-score-after-applying-operations-on-a-tree/) 1940\r\n- [3068. 最大节点价值之和](https://leetcode.cn/problems/find-the-maximum-sum-of-node-values/) 2268\r\n- [2920. 收集所有金币可获得的最大积分](https://leetcode.cn/problems/maximum-points-after-collecting-coins-from-all-nodes/) 2351 记忆化搜索\r\n- [3575. 最大好子树分数](https://leetcode.cn/problems/maximum-good-subtree-score/) 2360\r\n- [3562. 折扣价交易股票的最大利润](https://leetcode.cn/problems/maximum-profit-from-trading-stocks-with-discounts/) 2458 背包\r\n- [1916. 统计为蚁群构筑房间的不同顺序](https://leetcode.cn/problems/count-ways-to-build-rooms-in-an-ant-colony/) 2486\r\n- [3367. 移除边之后的权重最大和](https://leetcode.cn/problems/maximize-sum-of-weights-after-edge-removals/) 2602\r\n- [LCP 10. 二叉树任务调度](https://leetcode.cn/problems/er-cha-shu-ren-wu-diao-du/)\r\n- [LCP 34. 二叉树染色](https://leetcode.cn/problems/er-cha-shu-ran-se-UGC/)\r\n- [LCP 64. 二叉树灯饰](https://leetcode.cn/problems/U7WvvU/)\r\n- [2313. 二叉树中得到结果所需的最少翻转次数](https://leetcode.cn/problems/minimum-flips-in-binary-tree-to-get-result/)（会员题）\r\n\r\n## 十三、图 DP\r\n\r\n- [3243. 新增道路查询后的最短距离 I](https://leetcode.cn/problems/shortest-distance-after-road-addition-queries-i/) 1568\r\n- [787. K 站中转内最便宜的航班](https://leetcode.cn/problems/cheapest-flights-within-k-stops/) 1786\r\n- [1786. 从第一个节点出发到最后一个节点的受限路径数](https://leetcode.cn/problems/number-of-restricted-paths-from-first-to-last-node/) 2079\r\n- [2050. 并行课程 III](https://leetcode.cn/problems/parallel-courses-iii/) 2084 **DAG**\r\n- [3620. 恢复网络路径](https://leetcode.cn/problems/network-recovery-pathways/) **DAG**\r\n- [1976. 到达目的地的方案数](https://leetcode.cn/problems/number-of-ways-to-arrive-at-destination/) 2095\r\n- [3543. K 条边路径的最大边权和](https://leetcode.cn/problems/maximum-weighted-k-edge-path/) 2110 **DAG** bitset\r\n- [1857. 有向图中最大颜色值](https://leetcode.cn/problems/largest-color-value-in-a-directed-graph/) 2313 **DAG**\r\n- [1928. 规定时间内到达终点的最小花费](https://leetcode.cn/problems/minimum-cost-to-reach-destination-in-time/) 2413\r\n- [913. 猫和老鼠](https://leetcode.cn/problems/cat-and-mouse/) 2800 拓扑序\r\n- [1728. 猫和老鼠 II](https://leetcode.cn/problems/cat-and-mouse-ii/) 2849 拓扑序\r\n- [LCP 07. 传递信息](https://leetcode.cn/problems/chuan-di-xin-xi/)\r\n- [1548. 图中最相似的路径](https://leetcode.cn/problems/the-most-similar-path-in-a-graph/)（会员题）\r\n\r\n另见[【题单】图论算法](https://leetcode.cn/circle/discuss/01LUak/) 中的「全源最短路：Floyd」，本质是多维 DP。\r\n\r\n## 十四、博弈 DP\r\n\r\n- [1025. 除数博弈](https://leetcode.cn/problems/divisor-game/) 1435 有数学做法\r\n- [877. 石子游戏](https://leetcode.cn/problems/stone-game/) 1590 有数学做法\r\n- [486. 预测赢家](https://leetcode.cn/problems/predict-the-winner/)\r\n- [1510. 石子游戏 IV](https://leetcode.cn/problems/stone-game-iv/) 1787\r\n- [1690. 石子游戏 VII](https://leetcode.cn/problems/stone-game-vii/) 1951\r\n- [1406. 石子游戏 III](https://leetcode.cn/problems/stone-game-iii/) 2027\r\n- [1140. 石子游戏 II](https://leetcode.cn/problems/stone-game-ii/) 2035\r\n- [1563. 石子游戏 V](https://leetcode.cn/problems/stone-game-v/) 2087\r\n- [464. 我能赢吗](https://leetcode.cn/problems/can-i-win/)\r\n- [1872. 石子游戏 VIII](https://leetcode.cn/problems/stone-game-viii/) 2440\r\n- [913. 猫和老鼠](https://leetcode.cn/problems/cat-and-mouse/) 2800\r\n- [1728. 猫和老鼠 II](https://leetcode.cn/problems/cat-and-mouse-ii/) 2849\r\n- [294. 翻转游戏 II](https://leetcode.cn/problems/flip-game-ii/)（会员题）\r\n\r\n## 十五、概率/期望 DP\r\n\r\n- [688. 骑士在棋盘上的概率](https://leetcode.cn/problems/knight-probability-in-chessboard/)\r\n- [837. 新 21 点](https://leetcode.cn/problems/new-21-game/) 2350\r\n- [1467. 两个盒子中球的颜色数相同的概率](https://leetcode.cn/problems/probability-of-a-two-boxes-having-the-same-number-of-distinct-balls/) 2357\r\n- [808. 分汤](https://leetcode.cn/problems/soup-servings/) 2397\r\n- [LCR 185. 统计结果概率](https://leetcode.cn/problems/nge-tou-zi-de-dian-shu-lcof/)\r\n- [九坤-04. 筹码游戏](https://leetcode.cn/contest/ubiquant2022/problems/I3Gm2h/)\r\n- [1230. 抛掷硬币](https://leetcode.cn/problems/toss-strange-coins/)（会员题）\r\n\r\n## 专题：输出具体方案（打印方案）\r\n\r\n注意这些题目和回溯的区别，某些回溯题目要求输出**所有**方案，这里只要求输出**一个**。\r\n\r\n[讲解](https://leetcode.cn/problems/shortest-common-supersequence/solution/cong-di-gui-dao-di-tui-jiao-ni-yi-bu-bu-auy8z/)\r\n\r\n- [368. 最大整除子集](https://leetcode.cn/problems/largest-divisible-subset/)\r\n- [1363. 形成三的最大倍数](https://leetcode.cn/problems/largest-multiple-of-three/) 1823 字典序\r\n- [1449. 数位成本和为目标值的最大数字](https://leetcode.cn/problems/form-largest-integer-with-digits-that-add-up-to-target/) 1927 字典序\r\n- [1092. 最短公共超序列](https://leetcode.cn/problems/shortest-common-supersequence/) 1977\r\n- [943. 最短超级串](https://leetcode.cn/problems/find-the-shortest-superstring/) 2186\r\n- [1125. 最小的必要团队](https://leetcode.cn/problems/smallest-sufficient-team/) 2251\r\n- [3533. 判断连接可整除性](https://leetcode.cn/problems/concatenated-divisibility/) 2257 字典序 暴搜\r\n- [3260. 找出最大的 N 位 K 回文数](https://leetcode.cn/problems/find-the-largest-palindrome-divisible-by-k/) 2370 字典序 暴搜\r\n- [3149. 找出分数最低的排列](https://leetcode.cn/problems/find-the-minimum-cost-array-permutation/) 2642 字典序\r\n- [3441. 变成好标题的最少代价](https://leetcode.cn/problems/minimum-cost-good-caption/) 2765 字典序\r\n- [3348. 最小可整除数位乘积 II](https://leetcode.cn/problems/smallest-divisible-digit-product-ii/) 3101 字典序 暴搜\r\n- [656. 金币路径](https://leetcode.cn/problems/coin-path/)（会员题）字典序\r\n- [471. 编码最短长度的字符串](https://leetcode.cn/problems/encode-string-with-shortest-length/)（会员题）\r\n\r\n## 专题：前后缀分解\r\n\r\n部分题目也可以用状态机 DP 解决。\r\n\r\n如果涉及到的只是若干元素，而不是前缀/后缀这样的一段元素，也可以用「枚举右，维护左」思考，详见数据结构题单。\r\n\r\n- [724. 寻找数组的中心下标](https://leetcode.cn/problems/find-pivot-index/) 做到 $\\mathcal{O}(n)$\r\n- [1991. 找到数组的中间位置](https://leetcode.cn/problems/find-the-middle-index-in-array/) 同 724 题\r\n- [3707. 相等子字符串分数](https://leetcode.cn/problems/equal-score-substrings/) 1262\r\n- [2270. 分割数组的方案数](https://leetcode.cn/problems/number-of-ways-to-split-array/) 1334\r\n- [2256. 最小平均差](https://leetcode.cn/problems/minimum-average-difference/) 1395\r\n- [1422. 分割字符串的最大得分](https://leetcode.cn/problems/maximum-score-after-splitting-a-string/) 做到 $\\mathcal{O}(n)$\r\n- [238. 除自身以外数组的乘积](https://leetcode.cn/problems/product-of-array-except-self/)\r\n- [1493. 删掉一个元素以后全为 1 的最长子数组](https://leetcode.cn/problems/longest-subarray-of-1s-after-deleting-one-element/) 1423\r\n- [845. 数组中的最长山脉](https://leetcode.cn/problems/longest-mountain-in-array/) 1437 也可以分组循环\r\n- [2012. 数组美丽值求和](https://leetcode.cn/problems/sum-of-beauty-in-the-array/) 1468\r\n- [2909. 元素和最小的山形三元组 II](https://leetcode.cn/problems/minimum-sum-of-mountain-triplets-ii/) 1479\r\n- [2483. 商店的最少代价](https://leetcode.cn/problems/minimum-penalty-for-a-shop/) 1495\r\n- [1525. 字符串的好分割数目](https://leetcode.cn/problems/number-of-good-ways-to-split-a-string/) 1500\r\n- [3583. 统计特殊三元组](https://leetcode.cn/problems/count-special-triplets/) 1510\r\n- [3354. 使数组元素等于零](https://leetcode.cn/problems/make-array-elements-equal-to-zero/) 做到 $\\mathcal{O}(n)$\r\n- [1930. 长度为 3 的不同回文子序列](https://leetcode.cn/problems/unique-length-3-palindromic-subsequences/) 1533\r\n- [2874. 有序三元组中的最大值 II](https://leetcode.cn/problems/maximum-value-of-an-ordered-triplet-ii/) 1583\r\n- [1664. 生成平衡数组的方案数](https://leetcode.cn/problems/ways-to-make-a-fair-array/) 1590\r\n- [123. 买卖股票的最佳时机 III](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iii/) 拆分成两个 121 题\r\n- [3698. 分割数组得到最小绝对差](https://leetcode.cn/problems/split-array-with-minimum-difference/) 1649\r\n- [3598. 相邻字符串之间的最长公共前缀](https://leetcode.cn/problems/longest-common-prefix-between-adjacent-strings-after-removals/) 1655\r\n- [2222. 选择建筑的方案数](https://leetcode.cn/problems/number-of-ways-to-select-buildings/) 1657\r\n- [1031. 两个无重叠子数组的最大和](https://leetcode.cn/problems/maximum-sum-of-two-non-overlapping-subarrays/) 1680\r\n- [689. 三个无重叠子数组的最大和](https://leetcode.cn/problems/maximum-sum-of-3-non-overlapping-subarrays/)\r\n- [2420. 找到所有好下标](https://leetcode.cn/problems/find-all-good-indices/) 1695\r\n- [2100. 适合野炊的日子](https://leetcode.cn/problems/find-good-days-to-rob-the-bank/) 1702\r\n- [926. 将字符串翻转到单调递增](https://leetcode.cn/problems/flip-string-to-monotone-increasing/)\r\n- [334. 递增的三元子序列](https://leetcode.cn/problems/increasing-triplet-subsequence/)\r\n- [1653. 使字符串平衡的最少删除次数](https://leetcode.cn/problems/minimum-deletions-to-make-string-balanced/) 1794\r\n- [1186. 删除一次得到子数组最大和](https://leetcode.cn/problems/maximum-subarray-sum-with-one-deletion/) 1799\r\n- [3738. 替换至多一个元素后最长非递减子数组](https://leetcode.cn/problems/longest-non-decreasing-subarray-after-replacing-at-most-one-element/) 1811\r\n- [42. 接雨水](https://leetcode.cn/problems/trapping-rain-water/)（[讲解](https://www.bilibili.com/video/BV1Qg411q7ia/?t=3m05s)）\r\n- [2711. 对角线上不同值的数量差](https://leetcode.cn/problems/difference-of-number-of-distinct-values-on-diagonals/) 做到 $\\mathcal{O}(mn)$\r\n- [1477. 找两个和为目标值且不重叠的子数组](https://leetcode.cn/problems/find-two-non-overlapping-sub-arrays-each-with-target-sum/) 1851\r\n- [2680. 最大或值](https://leetcode.cn/problems/maximum-or/) 1912\r\n- [1671. 得到山形数组的最少删除次数](https://leetcode.cn/problems/minimum-number-of-removals-to-make-mountain-array/) 1913\r\n- [2906. 构造乘积矩阵](https://leetcode.cn/problems/construct-product-matrix/) 2075\r\n- [3334. 数组的最大因子得分](https://leetcode.cn/problems/find-the-maximum-factor-score-of-array/) 非暴力做法\r\n- [2167. 移除所有载有违禁货物车厢所需的最少时间](https://leetcode.cn/problems/minimum-time-to-remove-all-cars-containing-illegal-goods/) 2219\r\n- [2484. 统计回文子序列数目](https://leetcode.cn/problems/count-palindromic-subsequences/) 2223\r\n- [2163. 删除元素后和的最小差值](https://leetcode.cn/problems/minimum-difference-in-sums-after-removal-of-elements/) 2225\r\n- [2565. 最少得分子序列](https://leetcode.cn/problems/subsequence-with-the-minimum-score/) 2432\r\n- [1995. 统计特殊四元组](https://leetcode.cn/problems/count-special-quadruplets/) 四个数\r\n- [2552. 统计上升四元组](https://leetcode.cn/problems/count-increasing-quadruplets/) 2433 四个数\r\n- [3302. 字典序最小的合法序列](https://leetcode.cn/problems/find-the-lexicographically-smallest-valid-sequence/) 2474 第 2565 题的进阶版本\r\n- [3404. 统计特殊子序列的数目](https://leetcode.cn/problems/count-special-subsequences/) 2445 四个数\r\n- [3303. 第一个几乎相等子字符串的下标](https://leetcode.cn/problems/find-the-occurrence-of-first-almost-equal-substring/) 2509\r\n- [3287. 求出数组中最大序列值](https://leetcode.cn/problems/find-the-maximum-sequence-value-of-array/) 2545\r\n- [3257. 放三个车的价值之和最大 II](https://leetcode.cn/problems/maximum-value-sum-by-placing-three-rooks-ii/) 2553\r\n- [3410. 删除所有值为某个元素后的最大子数组和](https://leetcode.cn/problems/maximize-subarray-sum-after-removing-all-occurrences-of-one-element/) 2844\r\n- [3003. 执行操作后的最大分割数量](https://leetcode.cn/problems/maximize-the-number-of-partitions-after-operations/) 3039\r\n- [487. 最大连续 1 的个数 II](https://leetcode.cn/problems/max-consecutive-ones-ii/)（会员题）\r\n- [1746. 经过一次操作后的最大子数组和](https://leetcode.cn/problems/maximum-subarray-sum-after-one-operation/)（会员题）\r\n\r\n补充题目：\r\n\r\n- 输入一个长为 $n$ 的 $\\textit{prices}$ 数组，你需要返回一个长为 $n$ 的 $\\textit{answer}$ 数组，其中 $\\textit{answer}[i]$ 表示删除 $\\textit{prices}[i]$，也就是禁止在第 $i$ 天买卖股票，在此约束下 [121. 买卖股票的最佳时机](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock/) 的答案。\r\n\r\n## 专题：把 X 变成 Y\r\n\r\n部分题目也可以用 BFS 解决。\r\n\r\n- [397. 整数替换](https://leetcode.cn/problems/integer-replacement/)\r\n- [2998. 使 X 和 Y 相等的最少操作次数](https://leetcode.cn/problems/minimum-number-of-operations-to-make-x-and-y-equal/) 1795\r\n- [2059. 转化数字的最小运算数](https://leetcode.cn/problems/minimum-operations-to-convert-number/) 1850\r\n- [991. 坏了的计算器](https://leetcode.cn/problems/broken-calculator/) 1909\r\n- [1553. 吃掉 N 个橘子的最少天数](https://leetcode.cn/problems/minimum-number-of-days-to-eat-n-oranges/) 2048\r\n\r\n另见 [图论题单](https://leetcode.cn/circle/discuss/01LUak/) 中的 Dijkstra 算法，例如：\r\n\r\n- [3377. 使两个整数相等的数位操作](https://leetcode.cn/problems/digit-operations-to-make-two-integers-equal/) 2186\r\n\r\n## 专题：跳跃游戏\r\n\r\n- [1306. 跳跃游戏 III](https://leetcode.cn/problems/jump-game-iii/) 1397\r\n- [2770. 达到末尾下标所需的最大跳跃次数](https://leetcode.cn/problems/maximum-number-of-jumps-to-reach-the-last-index/) 1533\r\n- [403. 青蛙过河](https://leetcode.cn/problems/frog-jump/)\r\n- [1340. 跳跃游戏 V](https://leetcode.cn/problems/jump-game-v/) 1866\r\n- [1871. 跳跃游戏 VII](https://leetcode.cn/problems/jump-game-vii/) 1896\r\n- [1696. 跳跃游戏 VI](https://leetcode.cn/problems/jump-game-vi/) 1954\r\n- [975. 奇偶跳](https://leetcode.cn/problems/odd-even-jump/) 2079\r\n- [1654. 到家的最少跳跃次数](https://leetcode.cn/problems/minimum-jumps-to-reach-home/) 2124\r\n- [LCP 09. 最小跳跃次数](https://leetcode.cn/problems/zui-xiao-tiao-yue-ci-shu/)\r\n- [LCP 20. 快速公交](https://leetcode.cn/problems/meChtZ/)\r\n- [656. 金币路径](https://leetcode.cn/problems/coin-path/)（会员题）\r\n- [2297. 跳跃游戏 VIII](https://leetcode.cn/problems/jump-game-viii/)（会员题）\r\n\r\n## 其他\r\n\r\n- [1387. 将整数按权重排序](https://leetcode.cn/problems/sort-integers-by-the-power-value/) 1507\r\n- [823. 带因子的二叉树](https://leetcode.cn/problems/binary-trees-with-factors/) 1900\r\n- [756. 金字塔转换矩阵](https://leetcode.cn/problems/pyramid-transition-matrix/) 1990\r\n- [2930. 重新排列后包含指定子字符串的字符串数目](https://leetcode.cn/problems/number-of-strings-which-can-be-rearranged-to-contain-substring/) 2227\r\n- [1896. 反转表达式值的最少操作次数](https://leetcode.cn/problems/minimum-cost-to-change-the-final-value-of-expression/) 2532\r\n\r\n## 算法题单\r\n\r\n[如何科学刷题？](https://leetcode.cn/circle/discuss/RvFUtj/)\r\n\r\n1. [滑动窗口与双指针（定长/不定长/单序列/双序列/三指针/分组循环）](https://leetcode.cn/circle/discuss/0viNMK/)\r\n2. [二分算法（二分答案/最小化最大值/最大化最小值/第K小）](https://leetcode.cn/circle/discuss/SqopEo/)\r\n3. [单调栈（基础/矩形面积/贡献法/最小字典序）](https://leetcode.cn/circle/discuss/9oZFK9/)\r\n4. [网格图（DFS/BFS/综合应用）](https://leetcode.cn/circle/discuss/YiXPXW/)\r\n5. [位运算（基础/性质/拆位/试填/恒等式/思维）](https://leetcode.cn/circle/discuss/dHn9Vk/)\r\n6. [图论算法（DFS/BFS/拓扑排序/基环树/最短路/最小生成树/网络流）](https://leetcode.cn/circle/discuss/01LUak/)\r\n7. [动态规划（入门/背包/划分/状态机/区间/状压/数位/数据结构优化/树形/博弈/概率期望）](https://leetcode.cn/circle/discuss/tXLS3i/)\r\n8. [常用数据结构（前缀和/差分/栈/队列/堆/字典树/并查集/树状数组/线段树）](https://leetcode.cn/circle/discuss/mOr1u6/)\r\n9. [数学算法（数论/组合/概率期望/博弈/计算几何/随机算法）](https://leetcode.cn/circle/discuss/IYT3ss/)\r\n10. [贪心与思维（基本贪心策略/反悔/区间/字典序/数学/思维/脑筋急转弯/构造）](https://leetcode.cn/circle/discuss/g6KTKL/)\r\n11. [链表、树与回溯（前后指针/快慢指针/DFS/BFS/直径/LCA）](https://leetcode.cn/circle/discuss/K0n2gO/)\r\n12. [字符串（KMP/Z函数/Manacher/字符串哈希/AC自动机/后缀数组/子序列自动机）](https://leetcode.cn/circle/discuss/SJFwQI/)\r\n\r\n[我的题解精选（已分类）](https://github.com/EndlessCheng/codeforces-go/blob/master/leetcode/SOLUTIONS.md)\r\n\r\n欢迎关注 [B站@灵茶山艾府](https://space.bilibili.com/206214)\r\n\r\n如果你发现有题目可以补充进来，欢迎评论反馈。\r\n","slateValue":"","sunk":false,"pinned":false,"pinnedGlobally":false,"byLeetcode":false,"isRecommended":false,"isRecommendedGlobally":false,"subscribed":false,"hitCount":749465,"numAnswers":436,"numPeopleInvolved":309,"numSubscribed":233,"createdAt":"2024-03-19T02:12:25.502605+00:00","updatedAt":"2025-12-14T12:03:20.859416+00:00","status":"PUBLISHED","identifier":"tXLS3i","resourceType":"ARTICLE","articleType":"QUESTION","alwaysShow":false,"alwaysExpand":false,"score":null,"favoriteCount":9829,"isMyFavorite":false,"isAnonymous":false,"isOwner":false,"canEdit":false,"canSee":true,"reactionType":null,"atQuestionTitleSlug":"[]","blockComments":false,"manualRate":100,"reactionsV2":[{"count":3816,"reactionType":"UPVOTE"}],"tags":[{"name":"Bit Manipulation","nameTranslated":"位运算","slug":"bit-manipulation","imgUrl":null,"tagType":"TOPIC"},{"name":"Tree","nameTranslated":"树","slug":"tree","imgUrl":null,"tagType":"TOPIC"},{"name":"Recursion","nameTranslated":"递归","slug":"recursion","imgUrl":null,"tagType":"TOPIC"},{"name":"Memoization","nameTranslated":"记忆化搜索","slug":"memoization","imgUrl":null,"tagType":"TOPIC"},{"name":"Math","nameTranslated":"数学","slug":"math","imgUrl":null,"tagType":"TOPIC"},{"name":"Dynamic Programming","nameTranslated":"动态规划","slug":"dynamic-programming","imgUrl":null,"tagType":"TOPIC"},{"name":"Game Theory","nameTranslated":"博弈","slug":"game-theory","imgUrl":null,"tagType":"TOPIC"},{"name":"周赛","nameTranslated":"","slug":"zhou-sai","imgUrl":null,"tagType":"ADDITIONAL_TOPIC"},{"name":"数据结构","nameTranslated":"","slug":"shu-ju-jie-gou","imgUrl":null,"tagType":"ADDITIONAL_TOPIC"},{"name":"数据结构与算法","nameTranslated":"","slug":"shu-ju-jie-gou-yu-suan-fa","imgUrl":null,"tagType":"ADDITIONAL_TOPIC"},{"name":"Monotonic Queue","nameTranslated":"单调队列","slug":"monotonic-queue","imgUrl":null,"tagType":"TOPIC"},{"name":"Monotonic Stack","nameTranslated":"单调栈","slug":"monotonic-stack","imgUrl":null,"tagType":"TOPIC"},{"name":"双周赛","nameTranslated":"","slug":"shuang-zhou-sai","imgUrl":null,"tagType":"ADDITIONAL_TOPIC"},{"name":"Probability and Statistics","nameTranslated":"概率与统计","slug":"probability-and-statistics","imgUrl":null,"tagType":"TOPIC"},{"name":"学习分享","nameTranslated":"","slug":"study-sharing","imgUrl":null,"tagType":"ADDITIONAL_TOPIC"}],"subject":{"slug":"study-sharing","title":"学习分享"},"contentAuthor":{"username":"endlesscheng","userSlug":"endlesscheng","realName":"灵茶山艾府","avatar":"https://assets.leetcode.cn/aliyun-lc-upload/users/endlesscheng/avatar_1690721039.png","certificationLevel":"NORMAL"},"realAuthor":null,"myAnswerId":null}},"dataUpdateCount":1,"dataUpdatedAt":1770563037467,"error":null,"errorUpdateCount":0,"errorUpdatedAt":0,"fetchFailureCount":0,"fetchFailureReason":null,"fetchMeta":null,"isInvalidated":false,"status":"success","fetchStatus":"idle"},"queryKey":["discussPostDetail",{"uuid":"tXLS3i"}],"queryHash":"[\"discussPostDetail\",{\"uuid\":\"tXLS3i\"}]"}]},"_nextI18Next":{"initialI18nStore":{"zh":{"common":{"404":{"title":"力扣","pageNotFound":"页面不存在","message":"抱歉！我们找不到您想访问的页面..."},"meta":{"title":"","description":"","keywords":""},"home":{"title":"力扣 (LeetCode) 全球极客挚爱的技术成长平台","description":"海量技术面试题库，拥有算法、数据结构、系统设计等 1000+题目，帮助你高效提升编程技能，轻松拿下世界 IT 名企 Dream Offer。"},"loading":"加载中...","ok":"好","cancel":"取消","confirm":"确认","update":"更新","submit":"提交","more":"更多","save":"保存","netFailed":"网络错误","close":"关闭","header":{"logo":{"url":"","description":""},"title":{"problemset-all":""},"action":{"login":{"text":"","url":""}}},"conjunctions":{"and":"and","or":"或"},"pages":{"leetcode":"LeetCode","explore":"学习","problems":"题库","interview":{"interview":"求职","onlineInterview":"在线面试","assessment":"Assessment"},"contest":"竞赛","discuss":"讨论","store":{"store":"商店","redeem":"力扣周边","premium":"Plus 会员","shop":"精品商城"},"admin":{"admin":"管理员","library":"题库","translation":"翻译","operations":"运营管理","scores":"点数","contribute":"贡献","backend":"后台管理","twoStepVerification":"二步验证","internalContest":"Internal Contest Dashboard","contestAdmin":"Contest Cheating Dashboard","dangerZone":"Danger Zone","review":"Review","contestDashboard":"Contest Dashboard"},"mobileApp":"下载 App","playground":"Playground","myPlayground":"我的 Playground","signIn":"登录","register":"注册","signOut":"退出"},"userMenu":{"renew":"续订","getPremium":"升级 Plus 会员享专属特权","tryNewFeatures":"体验新功能","orders":"订单","resume":"个人资料","translateQuestions":"题目以中文展示","translateQuestionsEn":"题目以英文显示","enterprise":"企业招聘","revertToOldVersion":"经典模式","categories":{"myList":"收藏夹","notebook":"笔记本","submissions":"我的题解","session":"进度管理","points":"积分","progress":"进展分析"},"unmockUser":"Unmock User","account":"账号设置","appearance":"外观","appearanceContent":{"auto":"跟随系统","light":"浅色","dark":"深色"}},"streakCounter":{"finished":"干的好！明天再来挑战！","unfinished":"解决今天的「每日 1 题」，刷新你的连胜记录！","buyTimeTravelTicket":"购买补签卡","missedOneDayThisMonth":"这个月你错过了 1 天.","missedDaysThisMonth":"这个月你错过了 {{count}} 天."},"playground":{"playground":"Playground","remainingPlaygrounds":"数量","renew":"升级","myPlaygrounds":"我的 Playgrounds","templates":{"consoleApplication":"控制台程序","empty":"空白 Playground","frontend":"前端程序","machineLearning":"机器学习"}},"links":{"admin":{"scores":"/library/scores","translation":"/contribution/translation/question/admin/","operations":"/management"},"premium":"/premium","discuss":"/discuss","interview":"/company","shop":"https://detail.youzan.com/show/goods/newest?alias=271n43vr9hen7","onlineInterview":"https://leetcode.cn/interview","profileArticles":"/profile/articles","tryNewFeatures":"/new/","orders":"/settings/orders","explore":"/leetbook","resume":"/settings/profile","playground":"/playground","assessment":"/assessment/","account":"/settings"},"pagination":{"perpage":" 条/页"},"expand":"展开","collapse":"收起","difficulty":{"easy":"简单","medium":"中等","hard":"困难"},"data":{"question":{"difficulty":{"easy":"简单","medium":"中等","hard":"困难"}}},"markdown":{"heading":"heading","quote":"Quote"},"mentions":{"users":"用户","problems":"题目"},"confirmModal":{"title":"确定执行此操作?","confirmBtn":"确定","cancelBtn":"取消"},"saving":"保存中...","saved":"保存成功","autoSaved":"已自动保存","loginRequired":"您尚未登录","verifiedRequired":"请绑定手机号或者邮箱后继续操作","phoneVerifiedRequired":"请绑定手机号后继续操作","maybeVerifiedRequired":"请绑定手机号后继续操作","copy":"复制","copyToEditor":"复制到编辑器","copied":"已复制","copyLink":"复制链接","zoomIn":"放大","zoomOut":"缩小","zoomReset":"适应窗口","viewMore":"查看更多","viewLess":"收起","viewDetails":"查看详情","code":"代码","diagram":"图表","loadingDiagram":"加载图表中...","diagramError":"图表加载失败","openDiagram":"打开","dailyCheckIn":"+1 每日登录","//maybeVerifiedRequired":"maybeVerifiedRequired means email in LCUS and phone in LCCN","easterEgg":{"rewardMessage":"恭喜您获得了 10 积分，Happy LeetCoding!"},"survey":{"veryDissatisfied":"非常不满意","verySatisfied":"非常满意","next":"下一题","continue":"继续","submit":"提交","questionNo":"问卷题目 {{current}}/{{total}}","thanksMsg":"🎉 感谢您的反馈!"},"qdNav":{"backTitle":"题库","expandPanel":"展开面板","expandNamePanel":"展开{{listName}}列表","preQuestion":"上一题","nextQuestion":"下一题","next":"下一题","prev":"上一题","pickOne":"随机一题","openInNewTab":"在新的标签页打开"},"premiumModal":{"learnMore":"了解更多权益","subscribe":"升级 Plus 会员"},"truncatedContent":{"viewAll":"查看全部","viewLess":"收起","openRaw":"打开源码","showMore":"显示更多","showLess":"显示更少"},"chromeNotSupport":"当前浏览器版本较低，可能导致部分功能无法正常使用。建议升级至最新版本，享受更流畅的体验。","lcAppWebviewNotSupport":"检测到当前内置浏览器版本过低，可能无法正常预览页面。您可以复制链接并在浏览器中打开查看。","medal":{"metadataTitle":"勋章 - 力扣（LeetCode）","congratulation":"恭喜获得","genPoster":"生成海报","genPostering":"生成中...","saveImgMobile":"长按图片保存","saveImgPc":"右键保存图片","medalEmpty":"暂无可领取的勋章"},"recordEventType":{"start":"开始","switchQuestion":"切换问题","switchLang":"切换语言","pageVisible":"切换页面","interpretCode":"运行代码","submitCode":"提交代码","end":"结束","input":"输入","undo":"撤销","redo":"重做","paste":"外部粘贴","changeCursor":"改变光标","debug":"调试","debugEnd":"结束调试"},"codeReplay":{"title":"代码回放","redirectContent":"这个账号属于 LeetCode 国际服. 前往 leetcode.com 查看?","doNotShowAgain":"不再提示","eventHistory":"回放事件","skipInactive":"跳过非活跃事件","noCodeResults":"没有代码结果","size":"大小","chars":"字符","leaveContestPageN":"离开竞赛作答页","returnContestPage":"回到竞赛作答页","speed":"播放速度","showEventsIndicator":"显示事件定位点","settings":"设定","toggleEventList":"切换显示事件列表"},"verified":"已认证","phonePlaceholder":"请输入手机号"},"solutions":{"filter":{"searchPlaceholder":"搜索","tags":{"all":"不限","mySolution":"我的"},"sortBy":{"placeholder":"排序","hot":"热度最高","most_posts":"发布数量","most_relevant":"默认排序","most_votes":"点赞最多","newest_to_oldest":"最新发布","oldest_to_newest":"最早发布","recent_activity":"默认排序","recent_activity_short":"默认排序","hot_short":"热度最高","newest_to_oldest_short":"最新发布","oldest_to_newest_short":"最早发布","most_votes_short":"点赞最多","most_relevant_short":"默认排序"}},"solution":"题解","writeSolution":"写题解","continueSolution":"继续写题解","tags":{"editorial":"官方题解","premiumVideo":"Plus Video","official":"官方","pinned":"精选","favorite":"收藏","mySolution":"我的题解","saved":"我收藏的","created":"我创建的","hidden":"灰屏"},"post":{"invalidSolutionTitle":"题解不存在","invalidSolutionDescription":"请查看其他题解","prevLabel":"上一篇题解","nextLabel":"下一篇题解","isAdmin":"管理员","reputationTooltip":"声望","share":"分享","addToCollection":"收藏","isInCollection":"已收藏","votes":"({{votesCount}} votes)","shareCopySuccess":"分享链接复制到剪切板","addToFavoriteSuccess":"添加成功","removeFromFavoriteSuccess":"移除成功","feedbackTooltip":"反馈","backToTop":"回到顶部","genericError":"未知错误","upvote":"有用","comments":"评论","allSolutions":"全部题解","updatedAt":"编辑于","more":{"error":"网络错误","cancel":"取消","edit":"编辑","editorsPick":"设为精选","subscribe":"Subscribe","subscribeMessage":"Subscribed","unsubscribe":"Unsubscribe","unsubscribeMessage":"Unsubscribed","delete":"删除","deleteMessage":"删除成功","deleteConfirmText":"确定删除?","deleteConfirmBtn":"删除","remove":"下线","restore":"Restore","restoreMessage":"Restored","restoreConfirmText":"Are you sure you want to restore this post?","restoreConfirmBtn":"Restore","report":"举报","reportMessage":"举报成功","officialPick":"设为官方","pin":"Pin","pinMessage":"Pinned","pinConfirmText":"Are you sure you want to pin this post?","pinConfirmBtn":"Pin","uneditorsPick":"取消精选","undelete":"恢复删除","unmute":"取消屏蔽","unofficialPick":"取消官方","unpin":"Unpin","unpinMessage":"Unpinned","unpinConfirmText":"Are you sure you want to unpin this post?","unpinConfirmBtn":"Unpin","unsunk":"取消下沉","hide":"Hide","hideMessage":"Hid the post","hideConfirmText":"Are you sure you want to hide this post?","hideConfirmBtn":"Hide","hideFromTrending":"Hide from trending","hideFromTrendingMessage":"Hid post from trending","hideFromTrendingConfirmText":"Are you sure you want to hide this post from trending?","hideFromTrendingConfirmBtn":"Hide from trending","unlist":"Unlist","unlistMessage":"Unlisted the post","unlistConfirmText":"Are you sure you want to unlist this post?","unlistConfirmBtn":"Unlist","unlistFromTrending":"Unlist from trending","unlistFromTrendingMessage":"Unlisted post from trending","unlistFromTrendingConfirmText":"Are you sure you want to unlist this post from trending?","unlistFromTrendingConfirmBtn":"Unlist from trending","show":"Show","showMessage":"Showed the post","showConfirmText":"Are you sure you want to show this post to everyone?","showConfirmBtn":"Show","open":"Open","openMessage":"Opened the post","openConfirmText":"Are you sure you want to open this post to everyone?","openConfirmBtn":"Open","sunk":"下沉","moveToDiscussion":"Move to Discussion","moveToDiscussionMessage":"Moved to Discussion","moveToDiscussionConfirmText":"Are you sure you want to move this post to Discussion?","moveToDiscussionConfirmBtn":"Move to Discussion","mute":"灰色屏蔽","recommend":"Recommend","setRecommendationCoefficient":"Set Recommendation Coefficient","value":"Value","custom":"Custom","enterAnInteger":"Enter an integer","notOfficial":"unofficial","official":"official","notOfficialMessage":"Set post to unofficial","officialMessage":"Set post to official","notOfficialConfirmText":"Are you sure you want to set this post to unofficial?","officialConfirmText":"Are you sure you want to set this post to official?","notOfficialConfirmBtn":"Set to unofficial","officialConfirmBtn":"Set to official","free":"Set to free","freeMessage":"Set post to free","freeConfirmText":"Are you sure you want to make this post free to all users?","freeConfirmBtn":"Set to free","premium":"Set to premium","premiumMessage":"Set post to premium","premiumConfirmText":"Are you sure you want to make this post premium?","premiumConfirmBtn":"Set to premium"},"rateSuccess":"Thanks for rating this solution!"},"searchResult":{"commentPrefix":" comment","replyPrefix":" reply to ","colon":": "},"noDirectResultsHint":"No result. Show you some related content","noResults":"暂无相关题解内容","noMoreResults":"已经到底了","backToTop":"回到顶部","report":{"reportModalTitle":"举报","contentPlaceholder":"其他","cancel":"取消","confirm":"确认","advertising":"骚扰广告","sexual":"黄色内容","violent":"暴力内容","terrorism":"恐怖言论","illegal":"违法内容","politics":"政治言论","abuse":"辱骂他人","fake":"造谣传谣","nonEnglish":"Non English content","other":"其他","reportSuccess":"提交成功","reportError":"提交遇到问题，请稍后再试！"},"blocker":{"subscribeToUnlock":"Subscribe to unlock.","subscribeSubTitle":"Thanks for using LeetCode! To view this solution you must subscribe to premium.","subscribe":"Subscribe"},"videoSolutionTooltip":"Video Solution","premiumOnlyTooltip":"Premium Solution","switchToRightTooltip":"移到右边","switchToLeftTooltip":"移到左边","switchFirstTimePopoverContent":"您可以通过点击 “切换视图” 的按钮将题解文章的视图进行左右切换","switchFirstTimePopoverBtn":"明白了","shareSolutionBanner":{"lastSubmissionBeats":"你最近一次提交运行时间超过了 \u003c0\u003e{{percentage}}\u003c/0\u003e 的用户","lastSubmissionBeatsSmall":"你最近一次提交运行时间超过了 \u003c0\u003e{{percentage}}\u003c/0\u003e 的用户","lastSubmissionMemoryBeats":"你最近一次提交运行内存超过了 \u003c0\u003e{{percentage}}\u003c/0\u003e 的用户","lastSubmissionMemoryBeatsSmall":"你最近一次提交运行内存超过了 \u003c0\u003e{{percentage}}\u003c/0\u003e 的用户","signInAndShareSolutions":"登录并分享题解","signIn":"登录","shareMySolution":"发布题解","share":"分享","getACSubmissionsToPublish":"你需要先通过这道题目才能发布题解"},"sideBySide":{"enterMode":"开启双栏模式","exitMode":"退出双栏模式","modeOn":"已开启双栏模式","modeOff":"已退出双栏模式","enterGuideTitle":"浏览多份内容?","enterGuideDesc":"试试开启双栏模式，你还可以进一步在设置中自定义你的浏览体验。","exitGuideTitle":"退出双栏模式","exitGuideDesc":"退出后，即可专注浏览唯一标签页。","goToSettings":"打开设置","gotIt":"我知道了"}},"new-study-plan":{"detail":{"metadata":{"title":"{{plan}} - 学习计划 - 力扣（LeetCode）全球极客挚爱的技术成长平台","description":"学习计划 - 力扣（LeetCode）全球极客挚爱的技术成长平台","notFound":"未找到学习计划"},"weekTextAbbr":{"sun":"周日","mon":"周一","tue":"周二","wed":"周三","thu":"周四","fri":"周五","sat":"周六"},"weekText":{"sun":"周日","mon":"周一","tue":"周二","wed":"周三","thu":"周四","fri":"周五","sat":"周六"},"myPlan":"我的计划","problemLeft":"题待完成","problemsLeft":"题待完成","notification":"注意","setUpSp":"设置学习计划","solvedText":"完成","problem":"题","problems":"题","learnMore":"更多信息","you":"你","weeklyRanking":"周榜","weeklyRankingToolTip":"按本周完成题目数计算排名，若干小时更新一次榜单数据（若本周未完成任何计划内题目，不计算排名）","solvePrev":"以下时间每天完成","solveNext":"道题","startTitle":"设置学习计划","confirmStartText":"计划保存后不可修改哦，确定保存吗？","quitTypeTipPrev":"请输入本计划标题：","quitTypeTipNext":" ","subscribeToUnlock":"升级 Plus 会员","subscribeToUnlockContent":"升级到 Plus 会员，可解锁该学习计划","start":"开始","share":"分享","backToExplore":"返回学习计划","goCurrentPage":"重新尝试该计划","premiumTip":"开通会员","copyLink":"复制链接","copiedSuccess":"已复制分享链接","more":"更多","quit":"退出","back":"返回","quitTitle":"关闭学习计划","quitContent":"当关闭此学习计划时，所有已解决问题的都会被重置，且无法恢复进度。你确定你要关闭吗？","showTags":"显示标签","summary":"概述","showMore":"展开","showLess":"收起","award":"勋章","awardCongratulation":"太棒啦！你已经获得此勋章","related":"相关计划","viewMore":"查看更多","todo":"待完成","attempted":"尝试过","solved":"已解答","markAsSolved":"标记为已解决","markAsSolvedTip":"你以前曾解决过这道题目，是否将其 '标记为已解决' ？","difficulty":"难度","congratulation":"🎉 恭喜你！","solvedAllProblemsText":"你已经解决了 {{title}} 中的所有问题！","checkBadge":"前往您的","profilePage":"个人主页","wearGlory":"并佩戴勋章！","checkMyStudyPlan":"回到我的学习计划","joinSuccessfully":"已加入","quitSuccessfully":"已退出","setSuccessfully":"已设置","errorTip":"遇到些问题，请再次尝试","quitTip":"若您退出该学习计划，所有已解决的问题都将被重置，且无法恢复。","pastSolved":"解答过","solution":"题解","points":"分","ranking":"排名"},"list":{"metadata":{"title":"学习计划 - 在 LeetCode 上持续练习来获得面试的成功"},"title":"学习计划","ongoing":"进行中","myPlan":"我的学习计划","featured":"精选","showMore":"展开","revertOldPlan":"查看旧版的学习计划","revertOldPlanTipTitle":"🌟 返回到旧版的学习计划","revertOldPlanTipDesc":"你可以点击该按钮前往旧版的学习计划","cancel":"取消","iSee":"知道了"},"myStudyPlan":{"metadata":{"title":"我的学习计划 - 力扣 (LeetCode) 全球极客挚爱的技术成长平台","desc":"加入到该学习计划可以追踪你的做题进度，有效地获得能力的提升！"},"title":"我的学习计划","ongoing":"进行中","history":"已结束的计划","noOngoingPlan":"暂无进行中的计划","noHistoryPlan":"暂无已结束的计划"},"common":{"studyPlan":"学习计划","tryNow":"立即开启","noTanks":"暂不尝试","newPlan":"✨ 全新的学习计划！","newPlanDesc":"加入一个新的学习计划，最大限度地发挥你的学习潜力。追踪你的进展，专注于每天的问题，以取得持续增长","seeAll":"查看更多","totalProgress":"完成进度","totalScore":"得分","progress":"完成进度","completed":"完成时间","giveUp":"退出时间","ongoing":"进行中","ongoingStudyPlan":"进行中的学习计划","later":"暂不参与","joinInQDTitle":"是否开始该学习计划？","joinInQD":"加入到该学习计划可以追踪你的做题进度，有效地获得能力的提升！","doNotRemind":"今天不再提示","exploreButton":"探索学习计划","notFoundText":"抱歉，无法找到该网页，请检查你的输入内容或重新探索一个新的学习计划"},"survey":{"submit":"提交"},"satisfactionSurvey":{"submitBtnText":"提交"}},"comments":{"metadata":{"title":"讨论 - 力扣（LeetCode）全球极客挚爱的技术成长平台","description":"讨论 - 力扣（LeetCode）全球极客挚爱的技术成长平台","notFound":"未找到讨论"},"publish":"发帖","edited":"(编辑过)","tooShort":"评论过短","noComments":"暂无评论","reply":"回复","mentionInputPlaceholder":"用户或题目","user":"用户","problem":"题目","mdRules":{"inlineCode":"行内代码...","codeBlock":"code block","link":"leetcode","href":"https://leetcode.cn"},"pinnedBy":"被 {{pinnedBy}} 置顶","share":"分享","edit":"编辑","save":"保存","shareCopySuccess":"已复制到剪切板","hideReplies":"隐藏回复","showReplies":"展示 {{num}} 条回复","cancel":"取消","confirm":"确定","preview":"预览","comment":"评论","typeCommentHere":"请输入评论...","typeReplyHere":"请输入回复...","typeCommentHereAnon":"请输入评论...（匿名发布）","typeReplyHereAnon":"请输入回复...（匿名发布）","comments":"评论","sortBy":"排序","newestToOldest":"最新","oldestToNewest":"最早","mostVotes":"赞成数","best":"最热","editor":"编辑","youMust":"您需要先","verifyYourEmail":"绑定邮箱","first":"first","readMore":"查看更多","readLess":"收起","somethingWentWrong":"未知错误","areYouSure":"操作确认","confirmDeleteComment":"确定删除该条评论？","confirmRestoreComment":"确定恢复该条评论？","confirmHideComment":"确定将该条评论灰色屏蔽？","confirmShowComment":"确定将该条评论取消灰色屏蔽？","confirmPinComment":"确定置顶该评论？","confirmUnpinComment":"确定取消置顶？","reward":"赞赏","delete":"删除","hide":"隐藏","show":"展示","askQuestion":"问问题","feedback":"反馈","tips":"提示","chooseAType":"请选择一个类型","showMoreReplies":"展示更多","hideSuccess":"灰色屏蔽成功.","showSuccess":"取消灰色屏蔽成功.","pinSuccess":"置顶成功","unpinSuccess":"取消置顶成功","deleteSuccess":"删除成功","restore":"Restore","restoreSuccess":"成功恢复评论","hidden":"Hidden","report":"举报","pin":"置顶","pinned":"置顶","unpin":"取消置顶","hideComment":"灰色屏蔽","showComment":"取消灰色屏蔽","move":"Move to Solution","moveTitle":"Title:","moveTitlePlaceholder":"Enter title here","moveSuccess":"Comment Successfully Moved","postSuccess":"发布成功","genericError":"Something went wrong","signInVoteError":"You must sign in to vote","verifyVoteError":"You must verify your email to vote"},"problemlist":{"metadata":{"defaultTitle":"题单 - 力扣（LeetCode）全球极客挚爱的技术成长平台","title":"{{title}} - 力扣（LeetCode）全球极客挚爱的技术成长平台"},"tags":"Tags","todo":"待完成","attempted":"尝试过","solved":"已解答","move":"拖动排序","removeFromList":"移除","addToList":"添加至题单","moveToTop":"置顶","moveToBottom":"置底","nullList":"Oops, 该题单不存在！","privateList":"该题单已设为私密","noQuestions":"暂无题目","noSearchResult":"无搜索结果","goToProblemSet":"前往题库","difficulty":{"easy":"简单","medium":"中等","hard":"困难"},"nullText":"暂无搜索结果","acceptance":"通过率","point":"分","nav-panel":{"title":"我的题单","fold":"折叠","unfold":"展开","createdByMe":"我创建的","savedByMe":"我收藏的","public":"公开","private":"私密","remove":"取消收藏","listInvalid":"题单已失效","newList":"创建题单","newSmartList":"生成智能题单...","smartList":"智能题单","studyPlan":"学习计划","discuss":"讨论","oldLibrary":"题库","library":"题目","myList":"我的题单","oldMyList":"我创建的","mySaved":"我收藏的","quest":"探险模式"},"description":{"cover":{"editCover":"修改封面","emojis":"表情符号","image":"自定义","random":"随机一图","background":"背景色","chooseBackground":"请选择背景色","Recommend":"推荐","Smileys \u0026 Emotion":"表情","People \u0026 Body":"角色","Animals \u0026 Nature":"动物与自然","Food \u0026 Drink":"食物与饮品","Activities":"活动","Travel \u0026 Places":"旅行与景点","Objects":"物品","Symbols":"符号","Flags":"旗帜","uploadImage":"上传图片","uploadRecommendedSize":"建议尺寸为 200 x 200 像素","uploadSizeLimit":"每个文件的最大尺寸为 5 MB","cancel":"取消","save":"保存"},"operations":{"updated":"更新时间：","noQuestions":"暂无题目","questions":"题","public":"公开","makePublic":"设为公开","private":"私密","makePrivate":"设为私密","publicToast":"题单已公开","privateToast":"已设为私密","practice":"开始练习","random":"随机一题","listSave":"收藏","listSaved":"已收藏","listSavedByCount":"人收藏","listSavedToast":"已收藏","listUnsavedToast":"已取消收藏","share":"分享","fork":"Fork","forkToast":"题单已 Fork!","more":"更多","delete":"删除","deleteList":"删除题单","deleteAlert":"您确定要删除此题单吗？本操作无法撤销。","cancel":"取消","create":"创建","created":"已创建","addQuestions":"添加题目","addToList":"添加到题单","hasSelected":"已选 {{count}} 题","genSmartList":"生成智能题单","createNewList":"创建新题单","updateRuleQuestionTip":"已包含 {{count}} 道题，将根据所选条件自动更新","updateRuleQuestionsTip":"已包含 {{count}} 道题，将根据所选条件自动更新","editRule":"设置规则","addRules":"添加规则","editRuleDesc":"添加难度、知识点等多维条件，按需定制你的专属题集","setCondition":"设置条件","acceptDelete":"确定","deleteToast":"题单已删除","edit":"编辑","editListInfo":"编辑题单信息","title":"标题","titlePlaceholder":"请输入题单名称","description":"描述","descriptionPlaceholder":"请简述本题单内容主题，例如：收集有趣的动态规划题","save":"保存","infoSavedToast":"保存成功！","clickToReadMore":"点击查看全文","nonLoggedInDialog":{"saveTitle":"收藏题单","saveContent":"登录后即可收藏题单","forkTitle":"Fork 题单","forkContent":"登录后即可 fork 题单","notNow":"以后再说","logIn":"登录"},"confirmPlusDialogTitle":"升级 Plus 会员","confirmPlusDialogContent1":"本智能题单含会员专享筛选条件，需升级为会员才能使用。","confirmPlusDialogContent2":"若会员失效后编辑规则，会员专享筛选条件将会被清除。","confirmPlusEditRulesDialogBtn":"编辑规则","confirmPlusDialogBtn":"升级 Plus 会员"},"progress":{"progress":"进度","resetProgress":"重置进度","resetAlert":"重置后，本题单进度将被清除（不影响题库或其他题单）。确定重置吗？此操作不可撤销。","cancel":"取消","reset":"确定","resetToast":"进度已重置","easy":"简单","medium":"中等","hard":"困难","solved":"已解答","acceptance":"通过率","beats":"击败比例","attempting":"尝试过","checkReset":"同时清除代码编辑器草稿"}},"company":{"nullList":"Oops, 该企业不存在！","subscribeText1":"升级至 Plus 会员","subscribeText2":"解锁更多企业高频面试题。","subscribe":"升级 Plus 会员","learnMore":"查看权益","freeQuestion":"免费高频面试题","claim":"领取","claiming":"领取中…","saved":"已收藏","savedByCount":"人收藏","updated":"更新时间：","description":"简介","filter":"筛选","status":"状态","todo":"未开始","attempted":"尝试过","solved":"已解答","difficulty":"难度","easy":"简单","medium":"中等","hard":"困难","role":"岗位","rolePlaceholder":"请选择","reset":"清空筛选","tags":"标签","showTags":"显示标签","frequency":"出题频率","discuss":"讨论","chanceUsedUp":"免费机会已用完，升级 Plus 会员获取更多高频面试题。","subscribeNow":"升级会员","claimSignIn":"登录后领取 1 道面试题。","signIn":"登录","clickToReadMore":"点击查看详情","interviewTime":"面试时间","interviewTimeTip":"题单进度与当前所选面试时间相关","frequencyTip":"按出题频率倒序排列","ok":"好的","subscribeFrequency":"升级 Plus 会员查看出题频率"},"points":"分","filter":{"difficulty":"难度","status":"状态","list":"题单","tag":"标签","tagSearch":"筛选标签","expand":"展开","collapse":"收起","reset":"重置","searchPlaceholder":"搜索题目、编号或内容","noResult":"暂无搜索结果","search":"搜索","filter":"筛选","filtered":"已筛选","showSaveAsSmartListBtn":"保存为智能题单","match":"匹配","matchTitle":"过滤条件：","is":"等于","not":"不等于","range":"介于","past":"过去","all":"所有","any":"任一","days":"天","including":"Plus 内容","excluding":"非 Plus 内容","filterName":{"frequency":"出题频率","companies":"企业","position":"岗位","positionLevel":"职级","status":"状态","difficulty":"难度","topics":"知识点","lang":"语言","acceptance":"通过率","lastSubmit":"最近提交时间","published":"题目发布时间","premium":"Plus 内容","questionId":"题号","contestPoint":"竞赛分"},"filterNameAbbr":{"frequency":"出题频率","companies":"企业","position":"岗位","positionLevel":"职级","status":"状态","difficulty":"难度","topics":"知识点","lang":"语言","acceptance":"通过率","lastSubmit":"最近提交","published":"发布","premium":"Plus","frontendId":"题号","contestPoint":"竞赛分"},"premiumTooltip":{"frequency":"升级 Plus 会员筛选出题频率","companies":"升级 Plus 会员筛选企业","position":"升级 Plus 会员筛选岗位","positionLevel":"升级 Plus 会员筛选职级","contestPoint":"升级 Plus 会员筛选竞赛分"},"sort":{"custom":"默认排序","frequency":"出题频率","difficulty":"难度","ac_rate":"通过率","contest_point":"竞赛分","frontend_id":"题号","last_submitted_time":"最近提交时间","premiumOnlyTip_frequency":"升级 Plus 会员筛选出题频率","premiumOnlyTip_contest_point":"升级 Plus 会员筛选竞赛分","tooltip":{"custom":"默认排序","frequency":"按出题频率排序","difficulty":"按难度排序","ac_rate":"按通过率排序","contest_point":"按竞赛分排序","frontend_id":"按标题排序","last_submitted_time":"按最近提交时间排序"}},"random":"随机一题","addQuestionsToListTip_one":"将 {{count}} 题添加至题单","addQuestionsToListTip_other":"将 {{count}} 题添加至题单","backToTop":"回到顶部","totalNum_one":"{{count}} 题","totalNum_other":"{{count}} 题","searchPlaceholderNew":"搜索题目","addQuestionsToListConfirm":"添加至题单","addQuestionsToListConfirmInfo1":"确定将 ","addQuestionsToListConfirmInfo2":" 题添加至 ","addQuestionsToListConfirmInfo3":" 吗？","addQuestionsToListConfirmTip":"此操作无法撤销。"},"quest":{"lockedLevelDesc":"完成前面的关卡以解锁本关！","lockedPremiumDesc":"升级 Plus 会员，解锁隐藏关卡。","lockedQuizDesc":"通关单元以解锁进阶测试！","backToMyLevel":"返回我的关卡","subscribe":"升级 Plus 会员","learnMore":"了解更多"},"signInTip1":"登录查看题单","signInTip2":"追踪学习进度","signIn":"登录"},"discuss":{"meta":{"title":"讨论 - 力扣（LeetCode）","titleSuffix":"- 讨论 - 力扣（LeetCode）","description":"程序员的专属社区，在这里探讨、学习、交友、聊天。","keywords":"","ogImage":"https://static.leetcode.cn/cn-legacy-assets/images/LeetCode_Sharing.png"},"forYou":"推荐","mostVotes":"高赞","allTime":"全部时间","thisWeek":"本周","thisMonth":"本月","thisYear":"今年","newest":"最新","setting":"设置","pinnedTopics":"我的 Pin","dragToRearrange":"在话题详情中 Pin 你关注的话题后，可在此处拖拽以调整排序","cancel":"取消","save":"保存","create":"发帖","pinToHome":"Pin 至讨论首页","unpinFromHome":"取消 Pin","pinFailedToast":"Pin 上限为 100 个","searchPlaceholder":"搜索","qts":"题","explore":"探索","showMore":"更多","hide":"隐藏","verifyTooltip":"已认证","official":"官方","postAction":{"edit":"编辑","delete":"删除","deleteAlert":"确定删除?","report":"举报","recommend":"设置推荐系数","setOfficial":"设为官方","setUnofficial":"取消官方","setOfficialToast":"已设为官方","setUnofficialToast":"已取消官方"},"emptyHint":"暂无相关内容"},"public-profile":{"meta":{"title":"{{username}} - 力扣（LeetCode）","description":"View {{username}}'s profile on LeetCode, the world's largest programming community.","keywords":"","ogImage":"https://leetcode.com/static/images/LeetCode_Sharing.png"},"basic":{"aboutMe":"个人简介","followers":"关注者","following":"关注","follow":"关注","followed":"已关注","mutualFollow":"互相关注","unfollow":"取消关注","editProfile":"编辑个人资料"},"problemsSolved":{"solved":"解决问题","solvedProblems":"解题数量","notEnoughData":"暂无数据","beats":"击败用户","difficulty":{"easy":"简单","medium":"中等","hard":"困难"}},"community":{"lastWeek":"上周","lastDay":"昨日","title":"成就贡献","views":"阅读总数","vote":"获得点赞","level":"声望等级","reputation":"声望","favorite":"获得收藏","solution":"题解","discuss":"讨论"},"submissionHeatMap":{"submission":"过去一年共提交","submissionInYear":"{{year}} 年的提交","totalActiveDays":"累计提交天数","maxStreak":"连续提交","utcTimezone":"提交按 UTC 时间记录","timePeriod":{"current":"过去一年"}},"languages":{"title":"语言","notEnoughData":"暂无数据","calculatingData":"计算中...","problemsSolved_one":"解题数 ","problemsSolved_other":"解题数 ","showMore":"查看更多","showLess":"收起"},"skills":{"title":"技能","advanced":"高级","intermediate":"进阶","fundamental":"基础","notEnoughData":"暂无数据","showMore":"查看更多","showLess":"收起"},"recentsList":{"showMore":"加载更多","allSubmissions":"所有提交记录","recentAc":"最近通过","solutions":"题解","discuss":"讨论发布","mostVotes":"Most Votes","mostRecent":"Most Recent","votes":"Votes","recent":"Recent","noSubmissions":"","noSolution":"","noDiscuss":"","viewAll":"View all","problemList":"题单","viewAllList":"所有题单","noListText":"暂无公开题单","seeViewAll":"查看所有题单"},"badges":{"badges":"勋章成就","lockedBadge":"即将获得","mostRecentBadge":"最近获得","dailyChallenge":"每日打卡","historyAwards":"历史勋章","showMoreBadges":"查看更多勋章","badgeList":"勋章列表","competitionMedals":"竞赛勋章","dailyMedals":"打卡勋章","studyPlanMedals":"学习计划勋章","activityMedals":"活动勋章","annualMedals":"年度勋章","submissionMedals":"提交天数","active":"已佩戴","notActive":"未佩戴"},"contestGraph":{"contestBadge":{"self":"需要达到 top {{percentage}}% 才能重新获得勋章","anonymous":"曾获得"},"level":"当前段位","historyLevel":"历史段位","contest":"竞赛场次","rank":"排名","solved":"得分","score":"得分","contestRating":"竞赛分数","globalRanking":"全球排名","localRanking":"全国排名","attended":"参赛总数"},"histogram":{"top":"Top","numberOfUsers":"{{numberOfUsers}} 用户"},"feedback":{"feedback":"问题反馈","revertToOld":"返回旧版"},"socialProfile":{"uploadAvatar":"上传头像","cancel":"取消","save":"保存"}}}},"initialLocale":"zh","ns":["common","solutions","new-study-plan","comments","problemlist","discuss","public-profile"],"userConfig":{"i18n":{"defaultLocale":"zh","locales":["en","zh"]},"react":{"useSuspense":false},"reloadOnPrerender":false,"default":{"i18n":{"defaultLocale":"zh","locales":["en","zh"]},"react":{"useSuspense":false},"reloadOnPrerender":false}}}},"userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36","__N_SSP":true},"page":"/discuss/[[...page]]","query":{"page":["post","tXLS3i"]},"buildId":"uCvNwKv4DVCx0X_dqT3sP","assetPrefix":"https://static.leetcode.cn/cn-frontendx-assets/production","isFallback":false,"isExperimentalCompile":false,"gssp":true,"appGip":true,"scriptLoader":[]}</script><div id="modal-root"></div></body></html>